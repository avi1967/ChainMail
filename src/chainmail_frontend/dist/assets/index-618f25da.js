(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const u of i)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&n(f)}).observe(document,{childList:!0,subtree:!0});function r(i){const u={};return i.integrity&&(u.integrity=i.integrity),i.referrerPolicy&&(u.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?u.credentials="include":i.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function n(i){if(i.ep)return;i.ep=!0;const u=r(i);fetch(i.href,u)}})();var qr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Hc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Eo={},fn={};fn.byteLength=Zc;fn.toByteArray=zc;fn.fromByteArray=Xc;var It=[],lt=[],jc=typeof Uint8Array<"u"?Uint8Array:Array,Ni="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Er=0,Yc=Ni.length;Er<Yc;++Er)It[Er]=Ni[Er],lt[Ni.charCodeAt(Er)]=Er;lt["-".charCodeAt(0)]=62;lt["_".charCodeAt(0)]=63;function Bo(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function Zc(t){var e=Bo(t),r=e[0],n=e[1];return(r+n)*3/4-n}function Kc(t,e,r){return(e+r)*3/4-r}function zc(t){var e,r=Bo(t),n=r[0],i=r[1],u=new jc(Kc(t,n,i)),f=0,o=i>0?n-4:n,w;for(w=0;w<o;w+=4)e=lt[t.charCodeAt(w)]<<18|lt[t.charCodeAt(w+1)]<<12|lt[t.charCodeAt(w+2)]<<6|lt[t.charCodeAt(w+3)],u[f++]=e>>16&255,u[f++]=e>>8&255,u[f++]=e&255;return i===2&&(e=lt[t.charCodeAt(w)]<<2|lt[t.charCodeAt(w+1)]>>4,u[f++]=e&255),i===1&&(e=lt[t.charCodeAt(w)]<<10|lt[t.charCodeAt(w+1)]<<4|lt[t.charCodeAt(w+2)]>>2,u[f++]=e>>8&255,u[f++]=e&255),u}function Wc(t){return It[t>>18&63]+It[t>>12&63]+It[t>>6&63]+It[t&63]}function Lc(t,e,r){for(var n,i=[],u=e;u<r;u+=3)n=(t[u]<<16&16711680)+(t[u+1]<<8&65280)+(t[u+2]&255),i.push(Wc(n));return i.join("")}function Xc(t){for(var e,r=t.length,n=r%3,i=[],u=16383,f=0,o=r-n;f<o;f+=u)i.push(Lc(t,f,f+u>o?o:f+u));return n===1?(e=t[r-1],i.push(It[e>>2]+It[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(It[e>>10]+It[e>>4&63]+It[e<<2&63]+"=")),i.join("")}var ln={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ln.read=function(t,e,r,n,i){var u,f,o=i*8-n-1,w=(1<<o)-1,g=w>>1,S=-7,T=r?i-1:0,x=r?-1:1,_=t[e+T];for(T+=x,u=_&(1<<-S)-1,_>>=-S,S+=o;S>0;u=u*256+t[e+T],T+=x,S-=8);for(f=u&(1<<-S)-1,u>>=-S,S+=n;S>0;f=f*256+t[e+T],T+=x,S-=8);if(u===0)u=1-g;else{if(u===w)return f?NaN:(_?-1:1)*(1/0);f=f+Math.pow(2,n),u=u-g}return(_?-1:1)*f*Math.pow(2,u-n)};ln.write=function(t,e,r,n,i,u){var f,o,w,g=u*8-i-1,S=(1<<g)-1,T=S>>1,x=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,_=n?0:u-1,y=n?1:-1,$=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,f=S):(f=Math.floor(Math.log(e)/Math.LN2),e*(w=Math.pow(2,-f))<1&&(f--,w*=2),f+T>=1?e+=x/w:e+=x*Math.pow(2,1-T),e*w>=2&&(f++,w/=2),f+T>=S?(o=0,f=S):f+T>=1?(o=(e*w-1)*Math.pow(2,i),f=f+T):(o=e*Math.pow(2,T-1)*Math.pow(2,i),f=0));i>=8;t[r+_]=o&255,_+=y,o/=256,i-=8);for(f=f<<i|o,g+=i;g>0;t[r+_]=f&255,_+=y,f/=256,g-=8);t[r+_-y]|=$*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=fn,r=ln,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=o,t.SlowBuffer=K,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i,o.TYPED_ARRAY_SUPPORT=u(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function u(){try{const d=new Uint8Array(1),c={foo:function(){return 42}};return Object.setPrototypeOf(c,Uint8Array.prototype),Object.setPrototypeOf(d,c),d.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function f(d){if(d>i)throw new RangeError('The value "'+d+'" is invalid for option "size"');const c=new Uint8Array(d);return Object.setPrototypeOf(c,o.prototype),c}function o(d,c,l){if(typeof d=="number"){if(typeof c=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return T(d)}return w(d,c,l)}o.poolSize=8192;function w(d,c,l){if(typeof d=="string")return x(d,c);if(ArrayBuffer.isView(d))return y(d);if(d==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d);if(Y(d,ArrayBuffer)||d&&Y(d.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Y(d,SharedArrayBuffer)||d&&Y(d.buffer,SharedArrayBuffer)))return $(d,c,l);if(typeof d=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const A=d.valueOf&&d.valueOf();if(A!=null&&A!==d)return o.from(A,c,l);const k=q(d);if(k)return k;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof d[Symbol.toPrimitive]=="function")return o.from(d[Symbol.toPrimitive]("string"),c,l);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d)}o.from=function(d,c,l){return w(d,c,l)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function g(d){if(typeof d!="number")throw new TypeError('"size" argument must be of type number');if(d<0)throw new RangeError('The value "'+d+'" is invalid for option "size"')}function S(d,c,l){return g(d),d<=0?f(d):c!==void 0?typeof l=="string"?f(d).fill(c,l):f(d).fill(c):f(d)}o.alloc=function(d,c,l){return S(d,c,l)};function T(d){return g(d),f(d<0?0:X(d)|0)}o.allocUnsafe=function(d){return T(d)},o.allocUnsafeSlow=function(d){return T(d)};function x(d,c){if((typeof c!="string"||c==="")&&(c="utf8"),!o.isEncoding(c))throw new TypeError("Unknown encoding: "+c);const l=j(d,c)|0;let A=f(l);const k=A.write(d,c);return k!==l&&(A=A.slice(0,k)),A}function _(d){const c=d.length<0?0:X(d.length)|0,l=f(c);for(let A=0;A<c;A+=1)l[A]=d[A]&255;return l}function y(d){if(Y(d,Uint8Array)){const c=new Uint8Array(d);return $(c.buffer,c.byteOffset,c.byteLength)}return _(d)}function $(d,c,l){if(c<0||d.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(d.byteLength<c+(l||0))throw new RangeError('"length" is outside of buffer bounds');let A;return c===void 0&&l===void 0?A=new Uint8Array(d):l===void 0?A=new Uint8Array(d,c):A=new Uint8Array(d,c,l),Object.setPrototypeOf(A,o.prototype),A}function q(d){if(o.isBuffer(d)){const c=X(d.length)|0,l=f(c);return l.length===0||d.copy(l,0,0,c),l}if(d.length!==void 0)return typeof d.length!="number"||se(d.length)?f(0):_(d);if(d.type==="Buffer"&&Array.isArray(d.data))return _(d.data)}function X(d){if(d>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return d|0}function K(d){return+d!=d&&(d=0),o.alloc(+d)}o.isBuffer=function(c){return c!=null&&c._isBuffer===!0&&c!==o.prototype},o.compare=function(c,l){if(Y(c,Uint8Array)&&(c=o.from(c,c.offset,c.byteLength)),Y(l,Uint8Array)&&(l=o.from(l,l.offset,l.byteLength)),!o.isBuffer(c)||!o.isBuffer(l))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(c===l)return 0;let A=c.length,k=l.length;for(let z=0,Z=Math.min(A,k);z<Z;++z)if(c[z]!==l[z]){A=c[z],k=l[z];break}return A<k?-1:k<A?1:0},o.isEncoding=function(c){switch(String(c).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(c,l){if(!Array.isArray(c))throw new TypeError('"list" argument must be an Array of Buffers');if(c.length===0)return o.alloc(0);let A;if(l===void 0)for(l=0,A=0;A<c.length;++A)l+=c[A].length;const k=o.allocUnsafe(l);let z=0;for(A=0;A<c.length;++A){let Z=c[A];if(Y(Z,Uint8Array))z+Z.length>k.length?(o.isBuffer(Z)||(Z=o.from(Z)),Z.copy(k,z)):Uint8Array.prototype.set.call(k,Z,z);else if(o.isBuffer(Z))Z.copy(k,z);else throw new TypeError('"list" argument must be an Array of Buffers');z+=Z.length}return k};function j(d,c){if(o.isBuffer(d))return d.length;if(ArrayBuffer.isView(d)||Y(d,ArrayBuffer))return d.byteLength;if(typeof d!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof d);const l=d.length,A=arguments.length>2&&arguments[2]===!0;if(!A&&l===0)return 0;let k=!1;for(;;)switch(c){case"ascii":case"latin1":case"binary":return l;case"utf8":case"utf-8":return s(d).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l*2;case"hex":return l>>>1;case"base64":return m(d).length;default:if(k)return A?-1:s(d).length;c=(""+c).toLowerCase(),k=!0}}o.byteLength=j;function D(d,c,l){let A=!1;if((c===void 0||c<0)&&(c=0),c>this.length||((l===void 0||l>this.length)&&(l=this.length),l<=0)||(l>>>=0,c>>>=0,l<=c))return"";for(d||(d="utf8");;)switch(d){case"hex":return ne(this,c,l);case"utf8":case"utf-8":return N(this,c,l);case"ascii":return ee(this,c,l);case"latin1":case"binary":return Q(this,c,l);case"base64":return b(this,c,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return he(this,c,l);default:if(A)throw new TypeError("Unknown encoding: "+d);d=(d+"").toLowerCase(),A=!0}}o.prototype._isBuffer=!0;function R(d,c,l){const A=d[c];d[c]=d[l],d[l]=A}o.prototype.swap16=function(){const c=this.length;if(c%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let l=0;l<c;l+=2)R(this,l,l+1);return this},o.prototype.swap32=function(){const c=this.length;if(c%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let l=0;l<c;l+=4)R(this,l,l+3),R(this,l+1,l+2);return this},o.prototype.swap64=function(){const c=this.length;if(c%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let l=0;l<c;l+=8)R(this,l,l+7),R(this,l+1,l+6),R(this,l+2,l+5),R(this,l+3,l+4);return this},o.prototype.toString=function(){const c=this.length;return c===0?"":arguments.length===0?N(this,0,c):D.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(c){if(!o.isBuffer(c))throw new TypeError("Argument must be a Buffer");return this===c?!0:o.compare(this,c)===0},o.prototype.inspect=function(){let c="";const l=t.INSPECT_MAX_BYTES;return c=this.toString("hex",0,l).replace(/(.{2})/g,"$1 ").trim(),this.length>l&&(c+=" ... "),"<Buffer "+c+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(c,l,A,k,z){if(Y(c,Uint8Array)&&(c=o.from(c,c.offset,c.byteLength)),!o.isBuffer(c))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof c);if(l===void 0&&(l=0),A===void 0&&(A=c?c.length:0),k===void 0&&(k=0),z===void 0&&(z=this.length),l<0||A>c.length||k<0||z>this.length)throw new RangeError("out of range index");if(k>=z&&l>=A)return 0;if(k>=z)return-1;if(l>=A)return 1;if(l>>>=0,A>>>=0,k>>>=0,z>>>=0,this===c)return 0;let Z=z-k,we=A-l;const be=Math.min(Z,we),ge=this.slice(k,z),ye=c.slice(l,A);for(let Te=0;Te<be;++Te)if(ge[Te]!==ye[Te]){Z=ge[Te],we=ye[Te];break}return Z<we?-1:we<Z?1:0};function C(d,c,l,A,k){if(d.length===0)return-1;if(typeof l=="string"?(A=l,l=0):l>2147483647?l=2147483647:l<-2147483648&&(l=-2147483648),l=+l,se(l)&&(l=k?0:d.length-1),l<0&&(l=d.length+l),l>=d.length){if(k)return-1;l=d.length-1}else if(l<0)if(k)l=0;else return-1;if(typeof c=="string"&&(c=o.from(c,A)),o.isBuffer(c))return c.length===0?-1:W(d,c,l,A,k);if(typeof c=="number")return c=c&255,typeof Uint8Array.prototype.indexOf=="function"?k?Uint8Array.prototype.indexOf.call(d,c,l):Uint8Array.prototype.lastIndexOf.call(d,c,l):W(d,[c],l,A,k);throw new TypeError("val must be string, number or Buffer")}function W(d,c,l,A,k){let z=1,Z=d.length,we=c.length;if(A!==void 0&&(A=String(A).toLowerCase(),A==="ucs2"||A==="ucs-2"||A==="utf16le"||A==="utf-16le")){if(d.length<2||c.length<2)return-1;z=2,Z/=2,we/=2,l/=2}function be(ye,Te){return z===1?ye[Te]:ye.readUInt16BE(Te*z)}let ge;if(k){let ye=-1;for(ge=l;ge<Z;ge++)if(be(d,ge)===be(c,ye===-1?0:ge-ye)){if(ye===-1&&(ye=ge),ge-ye+1===we)return ye*z}else ye!==-1&&(ge-=ge-ye),ye=-1}else for(l+we>Z&&(l=Z-we),ge=l;ge>=0;ge--){let ye=!0;for(let Te=0;Te<we;Te++)if(be(d,ge+Te)!==be(c,Te)){ye=!1;break}if(ye)return ge}return-1}o.prototype.includes=function(c,l,A){return this.indexOf(c,l,A)!==-1},o.prototype.indexOf=function(c,l,A){return C(this,c,l,A,!0)},o.prototype.lastIndexOf=function(c,l,A){return C(this,c,l,A,!1)};function te(d,c,l,A){l=Number(l)||0;const k=d.length-l;A?(A=Number(A),A>k&&(A=k)):A=k;const z=c.length;A>z/2&&(A=z/2);let Z;for(Z=0;Z<A;++Z){const we=parseInt(c.substr(Z*2,2),16);if(se(we))return Z;d[l+Z]=we}return Z}function re(d,c,l,A){return I(s(c,d.length-l),d,l,A)}function U(d,c,l,A){return I(a(c),d,l,A)}function H(d,c,l,A){return I(m(c),d,l,A)}function J(d,c,l,A){return I(p(c,d.length-l),d,l,A)}o.prototype.write=function(c,l,A,k){if(l===void 0)k="utf8",A=this.length,l=0;else if(A===void 0&&typeof l=="string")k=l,A=this.length,l=0;else if(isFinite(l))l=l>>>0,isFinite(A)?(A=A>>>0,k===void 0&&(k="utf8")):(k=A,A=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const z=this.length-l;if((A===void 0||A>z)&&(A=z),c.length>0&&(A<0||l<0)||l>this.length)throw new RangeError("Attempt to write outside buffer bounds");k||(k="utf8");let Z=!1;for(;;)switch(k){case"hex":return te(this,c,l,A);case"utf8":case"utf-8":return re(this,c,l,A);case"ascii":case"latin1":case"binary":return U(this,c,l,A);case"base64":return H(this,c,l,A);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J(this,c,l,A);default:if(Z)throw new TypeError("Unknown encoding: "+k);k=(""+k).toLowerCase(),Z=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function b(d,c,l){return c===0&&l===d.length?e.fromByteArray(d):e.fromByteArray(d.slice(c,l))}function N(d,c,l){l=Math.min(d.length,l);const A=[];let k=c;for(;k<l;){const z=d[k];let Z=null,we=z>239?4:z>223?3:z>191?2:1;if(k+we<=l){let be,ge,ye,Te;switch(we){case 1:z<128&&(Z=z);break;case 2:be=d[k+1],(be&192)===128&&(Te=(z&31)<<6|be&63,Te>127&&(Z=Te));break;case 3:be=d[k+1],ge=d[k+2],(be&192)===128&&(ge&192)===128&&(Te=(z&15)<<12|(be&63)<<6|ge&63,Te>2047&&(Te<55296||Te>57343)&&(Z=Te));break;case 4:be=d[k+1],ge=d[k+2],ye=d[k+3],(be&192)===128&&(ge&192)===128&&(ye&192)===128&&(Te=(z&15)<<18|(be&63)<<12|(ge&63)<<6|ye&63,Te>65535&&Te<1114112&&(Z=Te))}}Z===null?(Z=65533,we=1):Z>65535&&(Z-=65536,A.push(Z>>>10&1023|55296),Z=56320|Z&1023),A.push(Z),k+=we}return L(A)}const M=4096;function L(d){const c=d.length;if(c<=M)return String.fromCharCode.apply(String,d);let l="",A=0;for(;A<c;)l+=String.fromCharCode.apply(String,d.slice(A,A+=M));return l}function ee(d,c,l){let A="";l=Math.min(d.length,l);for(let k=c;k<l;++k)A+=String.fromCharCode(d[k]&127);return A}function Q(d,c,l){let A="";l=Math.min(d.length,l);for(let k=c;k<l;++k)A+=String.fromCharCode(d[k]);return A}function ne(d,c,l){const A=d.length;(!c||c<0)&&(c=0),(!l||l<0||l>A)&&(l=A);let k="";for(let z=c;z<l;++z)k+=ue[d[z]];return k}function he(d,c,l){const A=d.slice(c,l);let k="";for(let z=0;z<A.length-1;z+=2)k+=String.fromCharCode(A[z]+A[z+1]*256);return k}o.prototype.slice=function(c,l){const A=this.length;c=~~c,l=l===void 0?A:~~l,c<0?(c+=A,c<0&&(c=0)):c>A&&(c=A),l<0?(l+=A,l<0&&(l=0)):l>A&&(l=A),l<c&&(l=c);const k=this.subarray(c,l);return Object.setPrototypeOf(k,o.prototype),k};function oe(d,c,l){if(d%1!==0||d<0)throw new RangeError("offset is not uint");if(d+c>l)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(c,l,A){c=c>>>0,l=l>>>0,A||oe(c,l,this.length);let k=this[c],z=1,Z=0;for(;++Z<l&&(z*=256);)k+=this[c+Z]*z;return k},o.prototype.readUintBE=o.prototype.readUIntBE=function(c,l,A){c=c>>>0,l=l>>>0,A||oe(c,l,this.length);let k=this[c+--l],z=1;for(;l>0&&(z*=256);)k+=this[c+--l]*z;return k},o.prototype.readUint8=o.prototype.readUInt8=function(c,l){return c=c>>>0,l||oe(c,1,this.length),this[c]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(c,l){return c=c>>>0,l||oe(c,2,this.length),this[c]|this[c+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(c,l){return c=c>>>0,l||oe(c,2,this.length),this[c]<<8|this[c+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(c,l){return c=c>>>0,l||oe(c,4,this.length),(this[c]|this[c+1]<<8|this[c+2]<<16)+this[c+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(c,l){return c=c>>>0,l||oe(c,4,this.length),this[c]*16777216+(this[c+1]<<16|this[c+2]<<8|this[c+3])},o.prototype.readBigUInt64LE=fe(function(c){c=c>>>0,G(c,"offset");const l=this[c],A=this[c+7];(l===void 0||A===void 0)&&P(c,this.length-8);const k=l+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24,z=this[++c]+this[++c]*2**8+this[++c]*2**16+A*2**24;return BigInt(k)+(BigInt(z)<<BigInt(32))}),o.prototype.readBigUInt64BE=fe(function(c){c=c>>>0,G(c,"offset");const l=this[c],A=this[c+7];(l===void 0||A===void 0)&&P(c,this.length-8);const k=l*2**24+this[++c]*2**16+this[++c]*2**8+this[++c],z=this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+A;return(BigInt(k)<<BigInt(32))+BigInt(z)}),o.prototype.readIntLE=function(c,l,A){c=c>>>0,l=l>>>0,A||oe(c,l,this.length);let k=this[c],z=1,Z=0;for(;++Z<l&&(z*=256);)k+=this[c+Z]*z;return z*=128,k>=z&&(k-=Math.pow(2,8*l)),k},o.prototype.readIntBE=function(c,l,A){c=c>>>0,l=l>>>0,A||oe(c,l,this.length);let k=l,z=1,Z=this[c+--k];for(;k>0&&(z*=256);)Z+=this[c+--k]*z;return z*=128,Z>=z&&(Z-=Math.pow(2,8*l)),Z},o.prototype.readInt8=function(c,l){return c=c>>>0,l||oe(c,1,this.length),this[c]&128?(255-this[c]+1)*-1:this[c]},o.prototype.readInt16LE=function(c,l){c=c>>>0,l||oe(c,2,this.length);const A=this[c]|this[c+1]<<8;return A&32768?A|4294901760:A},o.prototype.readInt16BE=function(c,l){c=c>>>0,l||oe(c,2,this.length);const A=this[c+1]|this[c]<<8;return A&32768?A|4294901760:A},o.prototype.readInt32LE=function(c,l){return c=c>>>0,l||oe(c,4,this.length),this[c]|this[c+1]<<8|this[c+2]<<16|this[c+3]<<24},o.prototype.readInt32BE=function(c,l){return c=c>>>0,l||oe(c,4,this.length),this[c]<<24|this[c+1]<<16|this[c+2]<<8|this[c+3]},o.prototype.readBigInt64LE=fe(function(c){c=c>>>0,G(c,"offset");const l=this[c],A=this[c+7];(l===void 0||A===void 0)&&P(c,this.length-8);const k=this[c+4]+this[c+5]*2**8+this[c+6]*2**16+(A<<24);return(BigInt(k)<<BigInt(32))+BigInt(l+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24)}),o.prototype.readBigInt64BE=fe(function(c){c=c>>>0,G(c,"offset");const l=this[c],A=this[c+7];(l===void 0||A===void 0)&&P(c,this.length-8);const k=(l<<24)+this[++c]*2**16+this[++c]*2**8+this[++c];return(BigInt(k)<<BigInt(32))+BigInt(this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+A)}),o.prototype.readFloatLE=function(c,l){return c=c>>>0,l||oe(c,4,this.length),r.read(this,c,!0,23,4)},o.prototype.readFloatBE=function(c,l){return c=c>>>0,l||oe(c,4,this.length),r.read(this,c,!1,23,4)},o.prototype.readDoubleLE=function(c,l){return c=c>>>0,l||oe(c,8,this.length),r.read(this,c,!0,52,8)},o.prototype.readDoubleBE=function(c,l){return c=c>>>0,l||oe(c,8,this.length),r.read(this,c,!1,52,8)};function ie(d,c,l,A,k,z){if(!o.isBuffer(d))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>k||c<z)throw new RangeError('"value" argument is out of bounds');if(l+A>d.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(c,l,A,k){if(c=+c,l=l>>>0,A=A>>>0,!k){const we=Math.pow(2,8*A)-1;ie(this,c,l,A,we,0)}let z=1,Z=0;for(this[l]=c&255;++Z<A&&(z*=256);)this[l+Z]=c/z&255;return l+A},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(c,l,A,k){if(c=+c,l=l>>>0,A=A>>>0,!k){const we=Math.pow(2,8*A)-1;ie(this,c,l,A,we,0)}let z=A-1,Z=1;for(this[l+z]=c&255;--z>=0&&(Z*=256);)this[l+z]=c/Z&255;return l+A},o.prototype.writeUint8=o.prototype.writeUInt8=function(c,l,A){return c=+c,l=l>>>0,A||ie(this,c,l,1,255,0),this[l]=c&255,l+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(c,l,A){return c=+c,l=l>>>0,A||ie(this,c,l,2,65535,0),this[l]=c&255,this[l+1]=c>>>8,l+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(c,l,A){return c=+c,l=l>>>0,A||ie(this,c,l,2,65535,0),this[l]=c>>>8,this[l+1]=c&255,l+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(c,l,A){return c=+c,l=l>>>0,A||ie(this,c,l,4,4294967295,0),this[l+3]=c>>>24,this[l+2]=c>>>16,this[l+1]=c>>>8,this[l]=c&255,l+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(c,l,A){return c=+c,l=l>>>0,A||ie(this,c,l,4,4294967295,0),this[l]=c>>>24,this[l+1]=c>>>16,this[l+2]=c>>>8,this[l+3]=c&255,l+4};function Se(d,c,l,A,k){O(c,A,k,d,l,7);let z=Number(c&BigInt(4294967295));d[l++]=z,z=z>>8,d[l++]=z,z=z>>8,d[l++]=z,z=z>>8,d[l++]=z;let Z=Number(c>>BigInt(32)&BigInt(4294967295));return d[l++]=Z,Z=Z>>8,d[l++]=Z,Z=Z>>8,d[l++]=Z,Z=Z>>8,d[l++]=Z,l}function B(d,c,l,A,k){O(c,A,k,d,l,7);let z=Number(c&BigInt(4294967295));d[l+7]=z,z=z>>8,d[l+6]=z,z=z>>8,d[l+5]=z,z=z>>8,d[l+4]=z;let Z=Number(c>>BigInt(32)&BigInt(4294967295));return d[l+3]=Z,Z=Z>>8,d[l+2]=Z,Z=Z>>8,d[l+1]=Z,Z=Z>>8,d[l]=Z,l+8}o.prototype.writeBigUInt64LE=fe(function(c,l=0){return Se(this,c,l,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=fe(function(c,l=0){return B(this,c,l,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(c,l,A,k){if(c=+c,l=l>>>0,!k){const be=Math.pow(2,8*A-1);ie(this,c,l,A,be-1,-be)}let z=0,Z=1,we=0;for(this[l]=c&255;++z<A&&(Z*=256);)c<0&&we===0&&this[l+z-1]!==0&&(we=1),this[l+z]=(c/Z>>0)-we&255;return l+A},o.prototype.writeIntBE=function(c,l,A,k){if(c=+c,l=l>>>0,!k){const be=Math.pow(2,8*A-1);ie(this,c,l,A,be-1,-be)}let z=A-1,Z=1,we=0;for(this[l+z]=c&255;--z>=0&&(Z*=256);)c<0&&we===0&&this[l+z+1]!==0&&(we=1),this[l+z]=(c/Z>>0)-we&255;return l+A},o.prototype.writeInt8=function(c,l,A){return c=+c,l=l>>>0,A||ie(this,c,l,1,127,-128),c<0&&(c=255+c+1),this[l]=c&255,l+1},o.prototype.writeInt16LE=function(c,l,A){return c=+c,l=l>>>0,A||ie(this,c,l,2,32767,-32768),this[l]=c&255,this[l+1]=c>>>8,l+2},o.prototype.writeInt16BE=function(c,l,A){return c=+c,l=l>>>0,A||ie(this,c,l,2,32767,-32768),this[l]=c>>>8,this[l+1]=c&255,l+2},o.prototype.writeInt32LE=function(c,l,A){return c=+c,l=l>>>0,A||ie(this,c,l,4,2147483647,-2147483648),this[l]=c&255,this[l+1]=c>>>8,this[l+2]=c>>>16,this[l+3]=c>>>24,l+4},o.prototype.writeInt32BE=function(c,l,A){return c=+c,l=l>>>0,A||ie(this,c,l,4,2147483647,-2147483648),c<0&&(c=4294967295+c+1),this[l]=c>>>24,this[l+1]=c>>>16,this[l+2]=c>>>8,this[l+3]=c&255,l+4},o.prototype.writeBigInt64LE=fe(function(c,l=0){return Se(this,c,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=fe(function(c,l=0){return B(this,c,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Fe(d,c,l,A,k,z){if(l+A>d.length)throw new RangeError("Index out of range");if(l<0)throw new RangeError("Index out of range")}function ve(d,c,l,A,k){return c=+c,l=l>>>0,k||Fe(d,c,l,4),r.write(d,c,l,A,23,4),l+4}o.prototype.writeFloatLE=function(c,l,A){return ve(this,c,l,!0,A)},o.prototype.writeFloatBE=function(c,l,A){return ve(this,c,l,!1,A)};function Me(d,c,l,A,k){return c=+c,l=l>>>0,k||Fe(d,c,l,8),r.write(d,c,l,A,52,8),l+8}o.prototype.writeDoubleLE=function(c,l,A){return Me(this,c,l,!0,A)},o.prototype.writeDoubleBE=function(c,l,A){return Me(this,c,l,!1,A)},o.prototype.copy=function(c,l,A,k){if(!o.isBuffer(c))throw new TypeError("argument should be a Buffer");if(A||(A=0),!k&&k!==0&&(k=this.length),l>=c.length&&(l=c.length),l||(l=0),k>0&&k<A&&(k=A),k===A||c.length===0||this.length===0)return 0;if(l<0)throw new RangeError("targetStart out of bounds");if(A<0||A>=this.length)throw new RangeError("Index out of range");if(k<0)throw new RangeError("sourceEnd out of bounds");k>this.length&&(k=this.length),c.length-l<k-A&&(k=c.length-l+A);const z=k-A;return this===c&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(l,A,k):Uint8Array.prototype.set.call(c,this.subarray(A,k),l),z},o.prototype.fill=function(c,l,A,k){if(typeof c=="string"){if(typeof l=="string"?(k=l,l=0,A=this.length):typeof A=="string"&&(k=A,A=this.length),k!==void 0&&typeof k!="string")throw new TypeError("encoding must be a string");if(typeof k=="string"&&!o.isEncoding(k))throw new TypeError("Unknown encoding: "+k);if(c.length===1){const Z=c.charCodeAt(0);(k==="utf8"&&Z<128||k==="latin1")&&(c=Z)}}else typeof c=="number"?c=c&255:typeof c=="boolean"&&(c=Number(c));if(l<0||this.length<l||this.length<A)throw new RangeError("Out of range index");if(A<=l)return this;l=l>>>0,A=A===void 0?this.length:A>>>0,c||(c=0);let z;if(typeof c=="number")for(z=l;z<A;++z)this[z]=c;else{const Z=o.isBuffer(c)?c:o.from(c,k),we=Z.length;if(we===0)throw new TypeError('The value "'+c+'" is invalid for argument "value"');for(z=0;z<A-l;++z)this[z+l]=Z[z%we]}return this};const ce={};function de(d,c,l){ce[d]=class extends l{constructor(){super(),Object.defineProperty(this,"message",{value:c.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${d}]`,this.stack,delete this.name}get code(){return d}set code(k){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:k,writable:!0})}toString(){return`${this.name} [${d}]: ${this.message}`}}}de("ERR_BUFFER_OUT_OF_BOUNDS",function(d){return d?`${d} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),de("ERR_INVALID_ARG_TYPE",function(d,c){return`The "${d}" argument must be of type number. Received type ${typeof c}`},TypeError),de("ERR_OUT_OF_RANGE",function(d,c,l){let A=`The value of "${d}" is out of range.`,k=l;return Number.isInteger(l)&&Math.abs(l)>2**32?k=E(String(l)):typeof l=="bigint"&&(k=String(l),(l>BigInt(2)**BigInt(32)||l<-(BigInt(2)**BigInt(32)))&&(k=E(k)),k+="n"),A+=` It must be ${c}. Received ${k}`,A},RangeError);function E(d){let c="",l=d.length;const A=d[0]==="-"?1:0;for(;l>=A+4;l-=3)c=`_${d.slice(l-3,l)}${c}`;return`${d.slice(0,l)}${c}`}function v(d,c,l){G(c,"offset"),(d[c]===void 0||d[c+l]===void 0)&&P(c,d.length-(l+1))}function O(d,c,l,A,k,z){if(d>l||d<c){const Z=typeof c=="bigint"?"n":"";let we;throw z>3?c===0||c===BigInt(0)?we=`>= 0${Z} and < 2${Z} ** ${(z+1)*8}${Z}`:we=`>= -(2${Z} ** ${(z+1)*8-1}${Z}) and < 2 ** ${(z+1)*8-1}${Z}`:we=`>= ${c}${Z} and <= ${l}${Z}`,new ce.ERR_OUT_OF_RANGE("value",we,d)}v(A,k,z)}function G(d,c){if(typeof d!="number")throw new ce.ERR_INVALID_ARG_TYPE(c,"number",d)}function P(d,c,l){throw Math.floor(d)!==d?(G(d,l),new ce.ERR_OUT_OF_RANGE(l||"offset","an integer",d)):c<0?new ce.ERR_BUFFER_OUT_OF_BOUNDS:new ce.ERR_OUT_OF_RANGE(l||"offset",`>= ${l?1:0} and <= ${c}`,d)}const V=/[^+/0-9A-Za-z-_]/g;function h(d){if(d=d.split("=")[0],d=d.trim().replace(V,""),d.length<2)return"";for(;d.length%4!==0;)d=d+"=";return d}function s(d,c){c=c||1/0;let l;const A=d.length;let k=null;const z=[];for(let Z=0;Z<A;++Z){if(l=d.charCodeAt(Z),l>55295&&l<57344){if(!k){if(l>56319){(c-=3)>-1&&z.push(239,191,189);continue}else if(Z+1===A){(c-=3)>-1&&z.push(239,191,189);continue}k=l;continue}if(l<56320){(c-=3)>-1&&z.push(239,191,189),k=l;continue}l=(k-55296<<10|l-56320)+65536}else k&&(c-=3)>-1&&z.push(239,191,189);if(k=null,l<128){if((c-=1)<0)break;z.push(l)}else if(l<2048){if((c-=2)<0)break;z.push(l>>6|192,l&63|128)}else if(l<65536){if((c-=3)<0)break;z.push(l>>12|224,l>>6&63|128,l&63|128)}else if(l<1114112){if((c-=4)<0)break;z.push(l>>18|240,l>>12&63|128,l>>6&63|128,l&63|128)}else throw new Error("Invalid code point")}return z}function a(d){const c=[];for(let l=0;l<d.length;++l)c.push(d.charCodeAt(l)&255);return c}function p(d,c){let l,A,k;const z=[];for(let Z=0;Z<d.length&&!((c-=2)<0);++Z)l=d.charCodeAt(Z),A=l>>8,k=l%256,z.push(k),z.push(A);return z}function m(d){return e.toByteArray(h(d))}function I(d,c,l,A){let k;for(k=0;k<A&&!(k+l>=c.length||k>=d.length);++k)c[k+l]=d[k];return k}function Y(d,c){return d instanceof c||d!=null&&d.constructor!=null&&d.constructor.name!=null&&d.constructor.name===c.name}function se(d){return d!==d}const ue=function(){const d="0123456789abcdef",c=new Array(256);for(let l=0;l<16;++l){const A=l*16;for(let k=0;k<16;++k)c[A+k]=d[l]+d[k]}return c}();function fe(d){return typeof BigInt>"u"?me:d}function me(){throw new Error("BigInt not supported")}})(Eo);var Li;(function(t){t[t.SysFatal=1]="SysFatal",t[t.SysTransient=2]="SysTransient",t[t.DestinationInvalid=3]="DestinationInvalid",t[t.CanisterReject=4]="CanisterReject",t[t.CanisterError=5]="CanisterError"})(Li||(Li={}));const Jc="modulepreload",Qc=function(t){return"/"+t},Ns={},Dc=function(e,r,n){if(!r||r.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(r.map(u=>{if(u=Qc(u),u in Ns)return;Ns[u]=!0;const f=u.endsWith(".css"),o=f?'[rel="stylesheet"]':"";if(!!n)for(let S=i.length-1;S>=0;S--){const T=i[S];if(T.href===u&&(!f||T.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${o}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":Jc,f||(g.as="script",g.crossOrigin=""),g.href=u,document.head.appendChild(g),f)return new Promise((S,T)=>{g.addEventListener("load",S),g.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${u}`)))})})).then(()=>e()).catch(u=>{const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u})},Xn="abcdefghijklmnopqrstuvwxyz234567",Gr=Object.create(null);for(let t=0;t<Xn.length;t++)Gr[Xn[t]]=t;Gr[0]=Gr.o;Gr[1]=Gr.i;function eu(t){let e=0,r=0,n="";function i(u){return e<0?r|=u>>-e:r=u<<e&248,e>3?(e-=8,1):(e<4&&(n+=Xn[r>>3],e+=5),0)}for(let u=0;u<t.length;)u+=i(t[u]);return n+(e<0?Xn[r>>3]:"")}function tu(t){let e=0,r=0;const n=new Uint8Array(t.length*4/3|0);let i=0;function u(f){let o=Gr[f.toLowerCase()];if(o===void 0)throw new Error(`Invalid character: ${JSON.stringify(f)}`);o<<=3,r|=o>>>e,e+=5,e>=8&&(n[i++]=r,e-=8,e>0?r=o<<5-e&255:r=0)}for(const f of t)u(f);return n.slice(0,i)}const ru=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);function nu(t){const e=new Uint8Array(t);let r=-1;for(let n=0;n<e.length;n++){const u=(e[n]^r)&255;r=ru[u]^r>>>8}return(r^-1)>>>0}const Br=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ds(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function iu(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function nt(t,...e){if(!ds(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Is(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function su(t,e){nt(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function rn(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Ii(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function xt(t,e){return t<<32-e|t>>>e}const Ao=(()=>typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function")(),ou=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Vr(t){if(nt(t),Ao)return t.toHex();let e="";for(let r=0;r<t.length;r++)e+=ou[t[r]];return e}const Ft={_0:48,_9:57,A:65,F:70,a:97,f:102};function Rs(t){if(t>=Ft._0&&t<=Ft._9)return t-Ft._0;if(t>=Ft.A&&t<=Ft.F)return t-(Ft.A-10);if(t>=Ft.a&&t<=Ft.f)return t-(Ft.a-10)}function vo(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(Ao)return Uint8Array.fromHex(t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,u=0;i<r;i++,u+=2){const f=Rs(t.charCodeAt(u)),o=Rs(t.charCodeAt(u+1));if(f===void 0||o===void 0){const w=t[u]+t[u+1];throw new Error('hex string expected, got non-hex character "'+w+'" at index '+u)}n[i]=f*16+o}return n}function hn(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function To(t){return typeof t=="string"&&(t=hn(t)),nt(t),t}function Ce(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];nt(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const u=t[n];r.set(u,i),i+=u.length}return r}class au{}function ps(t){const e=n=>t().update(To(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function So(t=32){if(Br&&typeof Br.getRandomValues=="function")return Br.getRandomValues(new Uint8Array(t));if(Br&&typeof Br.randomBytes=="function")return Uint8Array.from(Br.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}function cu(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),u=BigInt(4294967295),f=Number(r>>i&u),o=Number(r&u),w=n?4:0,g=n?0:4;t.setUint32(e+w,f,n),t.setUint32(e+g,o,n)}function uu(t,e,r){return t&e^~t&r}function fu(t,e,r){return t&e^t&r^e&r}class No extends au{constructor(e,r,n,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.buffer=new Uint8Array(e),this.view=Ii(this.buffer)}update(e){Is(this),e=To(e),nt(e);const{view:r,buffer:n,blockLen:i}=this,u=e.length;for(let f=0;f<u;){const o=Math.min(i-this.pos,u-f);if(o===i){const w=Ii(e);for(;i<=u-f;f+=i)this.process(w,f);continue}n.set(e.subarray(f,f+o),this.pos),this.pos+=o,f+=o,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Is(this),su(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:u}=this;let{pos:f}=this;r[f++]=128,rn(this.buffer.subarray(f)),this.padOffset>i-f&&(this.process(n,0),f=0);for(let T=f;T<i;T++)r[T]=0;cu(n,i-8,BigInt(this.length*8),u),this.process(n,0);const o=Ii(e),w=this.outputLen;if(w%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const g=w/4,S=this.get();if(g>S.length)throw new Error("_sha2: outputLen bigger than state");for(let T=0;T<g;T++)o.setUint32(4*T,S[T],u)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:u,destroyed:f,pos:o}=this;return e.destroyed=f,e.finished=u,e.length=i,e.pos=o,i%r&&e.buffer.set(n),e}clone(){return this._cloneInto()}}const Kt=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),zt=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),Qe=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),_n=BigInt(2**32-1),Us=BigInt(32);function lu(t,e=!1){return e?{h:Number(t&_n),l:Number(t>>Us&_n)}:{h:Number(t>>Us&_n)|0,l:Number(t&_n)|0}}function hu(t,e=!1){const r=t.length;let n=new Uint32Array(r),i=new Uint32Array(r);for(let u=0;u<r;u++){const{h:f,l:o}=lu(t[u],e);[n[u],i[u]]=[f,o]}return[n,i]}const Os=(t,e,r)=>t>>>r,Fs=(t,e,r)=>t<<32-r|e>>>r,Ar=(t,e,r)=>t>>>r|e<<32-r,vr=(t,e,r)=>t<<32-r|e>>>r,xn=(t,e,r)=>t<<64-r|e>>>r-32,En=(t,e,r)=>t>>>r-32|e<<64-r;function Mt(t,e,r,n){const i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}const du=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),pu=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,yu=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),wu=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,gu=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0),mu=(t,e,r,n,i,u)=>e+r+n+i+u+(t/2**32|0)|0,bu=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Wt=new Uint32Array(64);class Io extends No{constructor(e=32){super(64,e,8,!1),this.A=Kt[0]|0,this.B=Kt[1]|0,this.C=Kt[2]|0,this.D=Kt[3]|0,this.E=Kt[4]|0,this.F=Kt[5]|0,this.G=Kt[6]|0,this.H=Kt[7]|0}get(){const{A:e,B:r,C:n,D:i,E:u,F:f,G:o,H:w}=this;return[e,r,n,i,u,f,o,w]}set(e,r,n,i,u,f,o,w){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=u|0,this.F=f|0,this.G=o|0,this.H=w|0}process(e,r){for(let T=0;T<16;T++,r+=4)Wt[T]=e.getUint32(r,!1);for(let T=16;T<64;T++){const x=Wt[T-15],_=Wt[T-2],y=xt(x,7)^xt(x,18)^x>>>3,$=xt(_,17)^xt(_,19)^_>>>10;Wt[T]=$+Wt[T-7]+y+Wt[T-16]|0}let{A:n,B:i,C:u,D:f,E:o,F:w,G:g,H:S}=this;for(let T=0;T<64;T++){const x=xt(o,6)^xt(o,11)^xt(o,25),_=S+x+uu(o,w,g)+bu[T]+Wt[T]|0,$=(xt(n,2)^xt(n,13)^xt(n,22))+fu(n,i,u)|0;S=g,g=w,w=o,o=f+_|0,f=u,u=i,i=n,n=_+$|0}n=n+this.A|0,i=i+this.B|0,u=u+this.C|0,f=f+this.D|0,o=o+this.E|0,w=w+this.F|0,g=g+this.G|0,S=S+this.H|0,this.set(n,i,u,f,o,w,g,S)}roundClean(){rn(Wt)}destroy(){this.set(0,0,0,0,0,0,0,0),rn(this.buffer)}}class _u extends Io{constructor(){super(28),this.A=zt[0]|0,this.B=zt[1]|0,this.C=zt[2]|0,this.D=zt[3]|0,this.E=zt[4]|0,this.F=zt[5]|0,this.G=zt[6]|0,this.H=zt[7]|0}}const Ro=(()=>hu(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))))(),xu=(()=>Ro[0])(),Eu=(()=>Ro[1])(),Lt=new Uint32Array(80),Xt=new Uint32Array(80);class Bu extends No{constructor(e=64){super(128,e,16,!1),this.Ah=Qe[0]|0,this.Al=Qe[1]|0,this.Bh=Qe[2]|0,this.Bl=Qe[3]|0,this.Ch=Qe[4]|0,this.Cl=Qe[5]|0,this.Dh=Qe[6]|0,this.Dl=Qe[7]|0,this.Eh=Qe[8]|0,this.El=Qe[9]|0,this.Fh=Qe[10]|0,this.Fl=Qe[11]|0,this.Gh=Qe[12]|0,this.Gl=Qe[13]|0,this.Hh=Qe[14]|0,this.Hl=Qe[15]|0}get(){const{Ah:e,Al:r,Bh:n,Bl:i,Ch:u,Cl:f,Dh:o,Dl:w,Eh:g,El:S,Fh:T,Fl:x,Gh:_,Gl:y,Hh:$,Hl:q}=this;return[e,r,n,i,u,f,o,w,g,S,T,x,_,y,$,q]}set(e,r,n,i,u,f,o,w,g,S,T,x,_,y,$,q){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=u|0,this.Cl=f|0,this.Dh=o|0,this.Dl=w|0,this.Eh=g|0,this.El=S|0,this.Fh=T|0,this.Fl=x|0,this.Gh=_|0,this.Gl=y|0,this.Hh=$|0,this.Hl=q|0}process(e,r){for(let j=0;j<16;j++,r+=4)Lt[j]=e.getUint32(r),Xt[j]=e.getUint32(r+=4);for(let j=16;j<80;j++){const D=Lt[j-15]|0,R=Xt[j-15]|0,C=Ar(D,R,1)^Ar(D,R,8)^Os(D,R,7),W=vr(D,R,1)^vr(D,R,8)^Fs(D,R,7),te=Lt[j-2]|0,re=Xt[j-2]|0,U=Ar(te,re,19)^xn(te,re,61)^Os(te,re,6),H=vr(te,re,19)^En(te,re,61)^Fs(te,re,6),J=yu(W,H,Xt[j-7],Xt[j-16]),b=wu(J,C,U,Lt[j-7],Lt[j-16]);Lt[j]=b|0,Xt[j]=J|0}let{Ah:n,Al:i,Bh:u,Bl:f,Ch:o,Cl:w,Dh:g,Dl:S,Eh:T,El:x,Fh:_,Fl:y,Gh:$,Gl:q,Hh:X,Hl:K}=this;for(let j=0;j<80;j++){const D=Ar(T,x,14)^Ar(T,x,18)^xn(T,x,41),R=vr(T,x,14)^vr(T,x,18)^En(T,x,41),C=T&_^~T&$,W=x&y^~x&q,te=gu(K,R,W,Eu[j],Xt[j]),re=mu(te,X,D,C,xu[j],Lt[j]),U=te|0,H=Ar(n,i,28)^xn(n,i,34)^xn(n,i,39),J=vr(n,i,28)^En(n,i,34)^En(n,i,39),b=n&u^n&o^u&o,N=i&f^i&w^f&w;X=$|0,K=q|0,$=_|0,q=y|0,_=T|0,y=x|0,{h:T,l:x}=Mt(g|0,S|0,re|0,U|0),g=o|0,S=w|0,o=u|0,w=f|0,u=n|0,f=i|0;const M=du(U,J,N);n=pu(M,re,H,b),i=M|0}({h:n,l:i}=Mt(this.Ah|0,this.Al|0,n|0,i|0)),{h:u,l:f}=Mt(this.Bh|0,this.Bl|0,u|0,f|0),{h:o,l:w}=Mt(this.Ch|0,this.Cl|0,o|0,w|0),{h:g,l:S}=Mt(this.Dh|0,this.Dl|0,g|0,S|0),{h:T,l:x}=Mt(this.Eh|0,this.El|0,T|0,x|0),{h:_,l:y}=Mt(this.Fh|0,this.Fl|0,_|0,y|0),{h:$,l:q}=Mt(this.Gh|0,this.Gl|0,$|0,q|0),{h:X,l:K}=Mt(this.Hh|0,this.Hl|0,X|0,K|0),this.set(n,i,u,f,o,w,g,S,T,x,_,y,$,q,X,K)}roundClean(){rn(Lt,Xt)}destroy(){rn(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const ys=ps(()=>new Io),Au=ps(()=>new _u),vu=ps(()=>new Bu),Tu=ys,Su=Au;function Nu(t){return Su.create().update(new Uint8Array(t)).digest()}const Bn="__principal__",Iu=2,Ms=4,Ru="aaaaa-aa",Uu=t=>{var e;return new Uint8Array(((e=t.match(/.{1,2}/g))!==null&&e!==void 0?e:[]).map(r=>parseInt(r,16)))},Ou=t=>t.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),"");let _e=class Un{constructor(e){this._arr=e,this._isPrincipal=!0}static anonymous(){return new this(new Uint8Array([Ms]))}static managementCanister(){return this.fromText(Ru)}static selfAuthenticating(e){const r=Nu(e);return new this(new Uint8Array([...r,Iu]))}static from(e){if(typeof e=="string")return Un.fromText(e);if(Object.getPrototypeOf(e)===Uint8Array.prototype)return new Un(e);if(typeof e=="object"&&e!==null&&e._isPrincipal===!0)return new Un(e._arr);throw new Error(`Impossible to convert ${JSON.stringify(e)} to Principal.`)}static fromHex(e){return new this(Uu(e))}static fromText(e){let r=e;if(e.includes(Bn)){const f=JSON.parse(e);Bn in f&&(r=f[Bn])}const n=r.toLowerCase().replace(/-/g,"");let i=tu(n);i=i.slice(4,i.length);const u=new this(i);if(u.toText()!==r)throw new Error(`Principal "${u.toText()}" does not have a valid checksum (original value "${r}" may not be a valid Principal ID).`);return u}static fromUint8Array(e){return new this(e)}isAnonymous(){return this._arr.byteLength===1&&this._arr[0]===Ms}toUint8Array(){return this._arr}toHex(){return Ou(this._arr).toUpperCase()}toText(){const e=new ArrayBuffer(4);new DataView(e).setUint32(0,nu(this._arr));const n=new Uint8Array(e),i=Uint8Array.from(this._arr),u=new Uint8Array([...n,...i]),o=eu(u).match(/.{1,5}/g);if(!o)throw new Error;return o.join("-")}toString(){return this.toText()}toJSON(){return{[Bn]:this.toText()}}compareTo(e){for(let r=0;r<Math.min(this._arr.length,e._arr.length);r++){if(this._arr[r]<e._arr[r])return"lt";if(this._arr[r]>e._arr[r])return"gt"}return this._arr.length<e._arr.length?"lt":this._arr.length>e._arr.length?"gt":"eq"}ltEq(e){const r=this.compareTo(e);return r=="lt"||r=="eq"}gtEq(e){const r=this.compareTo(e);return r=="gt"||r=="eq"}};function Ut(...t){const e=new Uint8Array(t.reduce((n,i)=>n+i.byteLength,0));let r=0;for(const n of t)e.set(new Uint8Array(n),r),r+=n.byteLength;return e.buffer}function ze(t){return[...new Uint8Array(t)].map(e=>e.toString(16).padStart(2,"0")).join("")}const Fu=new RegExp(/^[0-9a-fA-F]+$/);function Jn(t){if(!Fu.test(t))throw new Error("Invalid hexadecimal string.");const e=[...t].reduce((r,n,i)=>(r[i/2|0]=(r[i/2|0]||"")+n,r),[]).map(r=>Number.parseInt(r,16));return new Uint8Array(e).buffer}function Uo(t,e){if(t.byteLength!==e.byteLength)return t.byteLength-e.byteLength;const r=new Uint8Array(t),n=new Uint8Array(e);for(let i=0;i<r.length;i++)if(r[i]!==n[i])return r[i]-n[i];return 0}function ai(t,e){return Uo(t,e)===0}function On(t){return new DataView(t.buffer,t.byteOffset,t.byteLength).buffer}function Lr(t){return t instanceof Uint8Array?On(t):t instanceof ArrayBuffer?t:Array.isArray(t)?On(new Uint8Array(t)):"buffer"in t?Lr(t.buffer):On(new Uint8Array(t))}class ke extends Error{constructor(e){super(e),this.message=e,this.name="AgentError",this.__proto__=ke.prototype,Object.setPrototypeOf(this,ke.prototype)}}function Ne(...t){const e=new Uint8Array(t.reduce((n,i)=>n+i.byteLength,0));let r=0;for(const n of t)e.set(new Uint8Array(n),r),r+=n.byteLength;return e}class Zr{constructor(e,r=(e==null?void 0:e.byteLength)||0){this._buffer=Qn(e||new ArrayBuffer(0)),this._view=new Uint8Array(this._buffer,0,r)}save(){return this._view}restore(e){this._view=e}get buffer(){return Qn(this._view.slice())}get byteLength(){return this._view.byteLength}read(e){const r=this._view.subarray(0,e);return this._view=this._view.subarray(e),r.slice().buffer}readUint8(){const e=this._view[0];return this._view=this._view.subarray(1),e}write(e){const r=new Uint8Array(e),n=this._view.byteLength;this._view.byteOffset+this._view.byteLength+r.byteLength>=this._buffer.byteLength?this.alloc(r.byteLength):this._view=new Uint8Array(this._buffer,this._view.byteOffset,this._view.byteLength+r.byteLength),this._view.set(r,n)}get end(){return this._view.byteLength===0}alloc(e){const r=new ArrayBuffer((this._buffer.byteLength+e)*1.2|0),n=new Uint8Array(r,0,this._view.byteLength+e);n.set(this._view),this._buffer=r,this._view=n}}function Ri(t){return new DataView(t.buffer,t.byteOffset,t.byteLength).buffer}function Qn(t){return t instanceof Uint8Array?Ri(t):t instanceof ArrayBuffer?t:Array.isArray(t)?Ri(new Uint8Array(t)):"buffer"in t?Qn(t.buffer):Ri(new Uint8Array(t))}function Mu(t){const r=new TextEncoder().encode(t);let n=0;for(const i of r)n=(n*223+i)%2**32;return n}function Rt(t){if(/^_\d+_$/.test(t)||/^_0x[0-9a-fA-F]+_$/.test(t)){const e=+t.slice(1,-1);if(Number.isSafeInteger(e)&&e>=0&&e<2**32)return e}return Mu(t)}function Oo(){throw new Error("unexpected end of buffer")}function gr(t,e){return t.byteLength<e&&Oo(),t.read(e)}function mr(t){const e=t.readUint8();return e===void 0&&Oo(),e}function Pe(t){if(typeof t=="number"&&(t=BigInt(t)),t<BigInt(0))throw new Error("Cannot leb encode negative values.");const e=(t===BigInt(0)?0:Math.ceil(Math.log2(Number(t))))+1,r=new Zr(new ArrayBuffer(e),0);for(;;){const n=Number(t&BigInt(127));if(t/=BigInt(128),t===BigInt(0)){r.write(new Uint8Array([n]));break}else r.write(new Uint8Array([n|128]))}return r.buffer}function Ke(t){let e=BigInt(1),r=BigInt(0),n;do n=mr(t),r+=BigInt(n&127).valueOf()*e,e*=BigInt(128);while(n>=128);return r}function je(t){typeof t=="number"&&(t=BigInt(t));const e=t<BigInt(0);e&&(t=-t-BigInt(1));const r=(t===BigInt(0)?0:Math.ceil(Math.log2(Number(t))))+1,n=new Zr(new ArrayBuffer(r),0);for(;;){const u=i(t);if(t/=BigInt(128),e&&t===BigInt(0)&&u&64||!e&&t===BigInt(0)&&!(u&64)){n.write(new Uint8Array([u]));break}else n.write(new Uint8Array([u|128]))}function i(u){const f=u%BigInt(128);return Number(e?BigInt(128)-f-BigInt(1):f)}return n.buffer}function Jt(t){const e=new Uint8Array(t.buffer);let r=0;for(;r<e.byteLength;r++)if(e[r]<128){if(!(e[r]&64))return Ke(t);break}const n=new Uint8Array(gr(t,r+1));let i=BigInt(0);for(let u=n.byteLength-1;u>=0;u--)i=i*BigInt(128)+BigInt(128-(n[u]&127)-1);return-i-BigInt(1)}function ku(t,e){if(BigInt(t)<BigInt(0))throw new Error("Cannot write negative values.");return Fo(t,e)}function Fo(t,e){t=BigInt(t);const r=new Zr(new ArrayBuffer(Math.min(1,e)),0);let n=0,i=BigInt(256),u=BigInt(0),f=Number(t%i);for(r.write(new Uint8Array([f]));++n<e;)t<0&&u===BigInt(0)&&f!==0&&(u=BigInt(1)),f=Number((t/i-u)%BigInt(256)),r.write(new Uint8Array([f])),i*=BigInt(256);return r.buffer}function Mo(t,e){let r=BigInt(mr(t)),n=BigInt(1),i=0;for(;++i<e;){n*=BigInt(256);const u=BigInt(mr(t));r=r+n*u}return r}function Pu(t,e){let r=Mo(t,e);const n=BigInt(2)**(BigInt(8)*BigInt(e-1)+BigInt(7));return r>=n&&(r-=n*BigInt(2)),r}function Xi(t){const e=BigInt(t);if(t<0)throw new RangeError("Input must be non-negative");return BigInt(1)<<e}const Fn="DIDL",ks=400;function nn(t,e,r){return t.map((n,i)=>r(n,e[i]))}class $u{constructor(){this._typs=[],this._idx=new Map}has(e){return this._idx.has(e.name)}add(e,r){const n=this._typs.length;this._idx.set(e.name,n),this._typs.push(r)}merge(e,r){const n=this._idx.get(e.name),i=this._idx.get(r);if(n===void 0)throw new Error("Missing type index for "+e);if(i===void 0)throw new Error("Missing type index for "+r);this._typs[n]=this._typs[i],this._typs.splice(i,1),this._idx.delete(r)}encode(){const e=Pe(this._typs.length),r=Ne(...this._typs);return Ne(e,r)}indexOf(e){if(!this._idx.has(e))throw new Error("Missing type index for "+e);return je(this._idx.get(e)||0)}}class Cu{visitType(e,r){throw new Error("Not implemented")}visitPrimitive(e,r){return this.visitType(e,r)}visitEmpty(e,r){return this.visitPrimitive(e,r)}visitBool(e,r){return this.visitPrimitive(e,r)}visitNull(e,r){return this.visitPrimitive(e,r)}visitReserved(e,r){return this.visitPrimitive(e,r)}visitText(e,r){return this.visitPrimitive(e,r)}visitNumber(e,r){return this.visitPrimitive(e,r)}visitInt(e,r){return this.visitNumber(e,r)}visitNat(e,r){return this.visitNumber(e,r)}visitFloat(e,r){return this.visitPrimitive(e,r)}visitFixedInt(e,r){return this.visitNumber(e,r)}visitFixedNat(e,r){return this.visitNumber(e,r)}visitPrincipal(e,r){return this.visitPrimitive(e,r)}visitConstruct(e,r){return this.visitType(e,r)}visitVec(e,r,n){return this.visitConstruct(e,n)}visitOpt(e,r,n){return this.visitConstruct(e,n)}visitRecord(e,r,n){return this.visitConstruct(e,n)}visitTuple(e,r,n){const i=r.map((u,f)=>[`_${f}_`,u]);return this.visitRecord(e,i,n)}visitVariant(e,r,n){return this.visitConstruct(e,n)}visitRec(e,r,n){return this.visitConstruct(r,n)}visitFunc(e,r){return this.visitConstruct(e,r)}visitService(e,r){return this.visitConstruct(e,r)}}class ci{display(){return this.name}valueToString(e){return qe(e)}buildTypeTable(e){e.has(this)||this._buildTypeTableImpl(e)}}class pt extends ci{checkType(e){if(this.name!==e.name)throw new Error(`type mismatch: type on the wire ${e.name}, expect type ${this.name}`);return e}_buildTypeTableImpl(e){}}class tr extends ci{checkType(e){if(e instanceof Yt){const r=e.getType();if(typeof r>"u")throw new Error("type mismatch with uninitialized type");return r}throw new Error(`type mismatch: type on the wire ${e.name}, expect type ${this.name}`)}encodeType(e){return e.indexOf(this.name)}}class ko extends pt{accept(e,r){return e.visitEmpty(this,r)}covariant(e){throw new Error(`Invalid ${this.display()} argument: ${qe(e)}`)}encodeValue(){throw new Error("Empty cannot appear as a function argument")}valueToString(){throw new Error("Empty cannot appear as a value")}encodeType(){return je(-17)}decodeValue(){throw new Error("Empty cannot appear as an output")}get name(){return"empty"}}class Po extends ci{checkType(e){throw new Error("Method not implemented for unknown.")}accept(e,r){throw e.visitType(this,r)}covariant(e){throw new Error(`Invalid ${this.display()} argument: ${qe(e)}`)}encodeValue(){throw new Error("Unknown cannot appear as a function argument")}valueToString(){throw new Error("Unknown cannot appear as a value")}encodeType(){throw new Error("Unknown cannot be serialized")}decodeValue(e,r){let n=r.decodeValue(e,r);Object(n)!==n&&(n=Object(n));let i;return r instanceof Yt?i=()=>r.getType():i=()=>r,Object.defineProperty(n,"type",{value:i,writable:!0,enumerable:!1,configurable:!0}),n}_buildTypeTableImpl(){throw new Error("Unknown cannot be serialized")}get name(){return"Unknown"}}class $o extends pt{accept(e,r){return e.visitBool(this,r)}covariant(e){if(typeof e=="boolean")return!0;throw new Error(`Invalid ${this.display()} argument: ${qe(e)}`)}encodeValue(e){return new Uint8Array([e?1:0])}encodeType(){return je(-2)}decodeValue(e,r){switch(this.checkType(r),mr(e)){case 0:return!1;case 1:return!0;default:throw new Error("Boolean value out of range")}}get name(){return"bool"}}class Dn extends pt{accept(e,r){return e.visitNull(this,r)}covariant(e){if(e===null)return!0;throw new Error(`Invalid ${this.display()} argument: ${qe(e)}`)}encodeValue(){return new ArrayBuffer(0)}encodeType(){return je(-1)}decodeValue(e,r){return this.checkType(r),null}get name(){return"null"}}class Hr extends pt{accept(e,r){return e.visitReserved(this,r)}covariant(e){return!0}encodeValue(){return new ArrayBuffer(0)}encodeType(){return je(-16)}decodeValue(e,r){return r.name!==this.name&&r.decodeValue(e,r),null}get name(){return"reserved"}}class Co extends pt{accept(e,r){return e.visitText(this,r)}covariant(e){if(typeof e=="string")return!0;throw new Error(`Invalid ${this.display()} argument: ${qe(e)}`)}encodeValue(e){const r=new TextEncoder().encode(e),n=Pe(r.byteLength);return Ne(n,r)}encodeType(){return je(-15)}decodeValue(e,r){this.checkType(r);const n=Ke(e),i=gr(e,Number(n));return new TextDecoder("utf8",{fatal:!0}).decode(i)}get name(){return"text"}valueToString(e){return'"'+e+'"'}}class qo extends pt{accept(e,r){return e.visitInt(this,r)}covariant(e){if(typeof e=="bigint"||Number.isInteger(e))return!0;throw new Error(`Invalid ${this.display()} argument: ${qe(e)}`)}encodeValue(e){return je(e)}encodeType(){return je(-4)}decodeValue(e,r){return this.checkType(r),Jt(e)}get name(){return"int"}valueToString(e){return e.toString()}}class Go extends pt{accept(e,r){return e.visitNat(this,r)}covariant(e){if(typeof e=="bigint"&&e>=BigInt(0)||Number.isInteger(e)&&e>=0)return!0;throw new Error(`Invalid ${this.display()} argument: ${qe(e)}`)}encodeValue(e){return Pe(e)}encodeType(){return je(-3)}decodeValue(e,r){return this.checkType(r),Ke(e)}get name(){return"nat"}valueToString(e){return e.toString()}}class ws extends pt{constructor(e){if(super(),this._bits=e,e!==32&&e!==64)throw new Error("not a valid float type")}accept(e,r){return e.visitFloat(this,r)}covariant(e){if(typeof e=="number"||e instanceof Number)return!0;throw new Error(`Invalid ${this.display()} argument: ${qe(e)}`)}encodeValue(e){const r=new ArrayBuffer(this._bits/8),n=new DataView(r);return this._bits===32?n.setFloat32(0,e,!0):n.setFloat64(0,e,!0),r}encodeType(){const e=this._bits===32?-13:-14;return je(e)}decodeValue(e,r){this.checkType(r);const n=gr(e,this._bits/8),i=new DataView(n);return this._bits===32?i.getFloat32(0,!0):i.getFloat64(0,!0)}get name(){return"float"+this._bits}valueToString(e){return e.toString()}}class br extends pt{constructor(e){super(),this._bits=e}accept(e,r){return e.visitFixedInt(this,r)}covariant(e){const r=Xi(this._bits-1)*BigInt(-1),n=Xi(this._bits-1)-BigInt(1);let i=!1;if(typeof e=="bigint")i=e>=r&&e<=n;else if(Number.isInteger(e)){const u=BigInt(e);i=u>=r&&u<=n}else i=!1;if(i)return!0;throw new Error(`Invalid ${this.display()} argument: ${qe(e)}`)}encodeValue(e){return Fo(e,this._bits/8)}encodeType(){const e=Math.log2(this._bits)-3;return je(-9-e)}decodeValue(e,r){this.checkType(r);const n=Pu(e,this._bits/8);return this._bits<=32?Number(n):n}get name(){return`int${this._bits}`}valueToString(e){return e.toString()}}class er extends pt{constructor(e){super(),this._bits=e}accept(e,r){return e.visitFixedNat(this,r)}covariant(e){const r=Xi(this._bits);let n=!1;if(typeof e=="bigint"&&e>=BigInt(0)?n=e<r:Number.isInteger(e)&&e>=0?n=BigInt(e)<r:n=!1,n)return!0;throw new Error(`Invalid ${this.display()} argument: ${qe(e)}`)}encodeValue(e){return ku(e,this._bits/8)}encodeType(){const e=Math.log2(this._bits)-3;return je(-5-e)}decodeValue(e,r){this.checkType(r);const n=Mo(e,this._bits/8);return this._bits<=32?Number(n):n}get name(){return`nat${this._bits}`}valueToString(e){return e.toString()}}class ui extends tr{constructor(e){super(),this._type=e,this._blobOptimization=!1,e instanceof er&&e._bits===8&&(this._blobOptimization=!0)}accept(e,r){return e.visitVec(this,this._type,r)}covariant(e){const r=this._type instanceof er?this._type._bits:this._type instanceof br?this._type._bits:0;if(ArrayBuffer.isView(e)&&r==e.BYTES_PER_ELEMENT*8||Array.isArray(e)&&e.every((n,i)=>{try{return this._type.covariant(n)}catch(u){throw new Error(`Invalid ${this.display()} argument: 

index ${i} -> ${u.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${qe(e)}`)}encodeValue(e){const r=Pe(e.length);if(this._blobOptimization)return Ne(r,new Uint8Array(e));if(ArrayBuffer.isView(e))return Ne(r,new Uint8Array(e.buffer));const n=new Zr(new ArrayBuffer(r.byteLength+e.length),0);n.write(r);for(const i of e){const u=this._type.encodeValue(i);n.write(new Uint8Array(u))}return n.buffer}_buildTypeTableImpl(e){this._type.buildTypeTable(e);const r=je(-19),n=this._type.encodeType(e);e.add(this,Ne(r,n))}decodeValue(e,r){const n=this.checkType(r);if(!(n instanceof ui))throw new Error("Not a vector type");const i=Number(Ke(e));if(this._type instanceof er){if(this._type._bits==8)return new Uint8Array(e.read(i));if(this._type._bits==16)return new Uint16Array(e.read(i*2));if(this._type._bits==32)return new Uint32Array(e.read(i*4));if(this._type._bits==64)return new BigUint64Array(e.read(i*8))}if(this._type instanceof br){if(this._type._bits==8)return new Int8Array(e.read(i));if(this._type._bits==16)return new Int16Array(e.read(i*2));if(this._type._bits==32)return new Int32Array(e.read(i*4));if(this._type._bits==64)return new BigInt64Array(e.read(i*8))}const u=[];for(let f=0;f<i;f++)u.push(this._type.decodeValue(e,n._type));return u}get name(){return`vec ${this._type.name}`}display(){return`vec ${this._type.display()}`}valueToString(e){return"vec {"+e.map(n=>this._type.valueToString(n)).join("; ")+"}"}}class _r extends tr{constructor(e){super(),this._type=e}accept(e,r){return e.visitOpt(this,this._type,r)}covariant(e){try{if(Array.isArray(e)&&(e.length===0||e.length===1&&this._type.covariant(e[0])))return!0}catch(r){throw new Error(`Invalid ${this.display()} argument: ${qe(e)} 

-> ${r.message}`)}throw new Error(`Invalid ${this.display()} argument: ${qe(e)}`)}encodeValue(e){return e.length===0?new Uint8Array([0]):Ne(new Uint8Array([1]),this._type.encodeValue(e[0]))}_buildTypeTableImpl(e){this._type.buildTypeTable(e);const r=je(-18),n=this._type.encodeType(e);e.add(this,Ne(r,n))}decodeValue(e,r){if(r instanceof Dn)return[];if(r instanceof Hr)return[];let n=r;if(r instanceof Yt){const i=r.getType();if(typeof i>"u")throw new Error("type mismatch with uninitialized type");n=i}if(n instanceof _r)switch(mr(e)){case 0:return[];case 1:{const i=e.save();try{return[this._type.decodeValue(e,n._type)]}catch{return e.restore(i),n._type.decodeValue(e,n._type),[]}}default:throw new Error("Not an option value")}else{if(this._type instanceof Dn||this._type instanceof _r||this._type instanceof Hr)return n.decodeValue(e,n),[];{const i=e.save();try{return[this._type.decodeValue(e,r)]}catch{return e.restore(i),n.decodeValue(e,r),[]}}}}get name(){return`opt ${this._type.name}`}display(){return`opt ${this._type.display()}`}valueToString(e){return e.length===0?"null":`opt ${this._type.valueToString(e[0])}`}}class dn extends tr{constructor(e={}){super(),this._fields=Object.entries(e).sort((r,n)=>Rt(r[0])-Rt(n[0]))}accept(e,r){return e.visitRecord(this,this._fields,r)}tryAsTuple(){const e=[];for(let r=0;r<this._fields.length;r++){const[n,i]=this._fields[r];if(n!==`_${r}_`)return null;e.push(i)}return e}covariant(e){if(typeof e=="object"&&this._fields.every(([r,n])=>{if(!e.hasOwnProperty(r))throw new Error(`Record is missing key "${r}".`);try{return n.covariant(e[r])}catch(i){throw new Error(`Invalid ${this.display()} argument: 

field ${r} -> ${i.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${qe(e)}`)}encodeValue(e){const r=this._fields.map(([i])=>e[i]),n=nn(this._fields,r,([,i],u)=>i.encodeValue(u));return Ne(...n)}_buildTypeTableImpl(e){this._fields.forEach(([u,f])=>f.buildTypeTable(e));const r=je(-20),n=Pe(this._fields.length),i=this._fields.map(([u,f])=>Ne(Pe(Rt(u)),f.encodeType(e)));e.add(this,Ne(r,n,Ne(...i)))}decodeValue(e,r){const n=this.checkType(r);if(!(n instanceof dn))throw new Error("Not a record type");const i={};let u=0,f=0;for(;f<n._fields.length;){const[o,w]=n._fields[f];if(u>=this._fields.length){w.decodeValue(e,w),f++;continue}const[g,S]=this._fields[u],T=Rt(this._fields[u][0]),x=Rt(o);if(T===x)i[g]=S.decodeValue(e,w),u++,f++;else if(x>T)if(S instanceof _r||S instanceof Hr)i[g]=[],u++;else throw new Error("Cannot find required field "+g);else w.decodeValue(e,w),f++}for(const[o,w]of this._fields.slice(u))if(w instanceof _r||w instanceof Hr)i[o]=[];else throw new Error("Cannot find required field "+o);return i}get name(){return`record {${this._fields.map(([r,n])=>r+":"+n.name).join("; ")}}`}display(){return`record {${this._fields.map(([r,n])=>r+":"+n.display()).join("; ")}}`}valueToString(e){const r=this._fields.map(([i])=>e[i]);return`record {${nn(this._fields,r,([i,u],f)=>i+"="+u.valueToString(f)).join("; ")}}`}}class fi extends dn{constructor(e){const r={};e.forEach((n,i)=>r["_"+i+"_"]=n),super(r),this._components=e}accept(e,r){return e.visitTuple(this,this._components,r)}covariant(e){if(Array.isArray(e)&&e.length>=this._fields.length&&this._components.every((r,n)=>{try{return r.covariant(e[n])}catch(i){throw new Error(`Invalid ${this.display()} argument: 

index ${n} -> ${i.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${qe(e)}`)}encodeValue(e){const r=nn(this._components,e,(n,i)=>n.encodeValue(i));return Ne(...r)}decodeValue(e,r){const n=this.checkType(r);if(!(n instanceof fi))throw new Error("not a tuple type");if(n._components.length<this._components.length)throw new Error("tuple mismatch");const i=[];for(const[u,f]of n._components.entries())u>=this._components.length?f.decodeValue(e,f):i.push(this._components[u].decodeValue(e,f));return i}display(){return`record {${this._components.map(r=>r.display()).join("; ")}}`}valueToString(e){return`record {${nn(this._components,e,(n,i)=>n.valueToString(i)).join("; ")}}`}}class li extends tr{constructor(e={}){super(),this._fields=Object.entries(e).sort((r,n)=>Rt(r[0])-Rt(n[0]))}accept(e,r){return e.visitVariant(this,this._fields,r)}covariant(e){if(typeof e=="object"&&Object.entries(e).length===1&&this._fields.every(([r,n])=>{try{return!e.hasOwnProperty(r)||n.covariant(e[r])}catch(i){throw new Error(`Invalid ${this.display()} argument: 

variant ${r} -> ${i.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${qe(e)}`)}encodeValue(e){for(let r=0;r<this._fields.length;r++){const[n,i]=this._fields[r];if(e.hasOwnProperty(n)){const u=Pe(r),f=i.encodeValue(e[n]);return Ne(u,f)}}throw Error("Variant has no data: "+e)}_buildTypeTableImpl(e){this._fields.forEach(([,u])=>{u.buildTypeTable(e)});const r=je(-21),n=Pe(this._fields.length),i=this._fields.map(([u,f])=>Ne(Pe(Rt(u)),f.encodeType(e)));e.add(this,Ne(r,n,...i))}decodeValue(e,r){const n=this.checkType(r);if(!(n instanceof li))throw new Error("Not a variant type");const i=Number(Ke(e));if(i>=n._fields.length)throw Error("Invalid variant index: "+i);const[u,f]=n._fields[i];for(const[o,w]of this._fields)if(Rt(u)===Rt(o)){const g=w.decodeValue(e,f);return{[o]:g}}throw new Error("Cannot find field hash "+u)}get name(){return`variant {${this._fields.map(([r,n])=>r+":"+n.name).join("; ")}}`}display(){return`variant {${this._fields.map(([r,n])=>r+(n.name==="null"?"":`:${n.display()}`)).join("; ")}}`}valueToString(e){for(const[r,n]of this._fields)if(e.hasOwnProperty(r)){const i=n.valueToString(e[r]);return i==="null"?`variant {${r}}`:`variant {${r}=${i}}`}throw new Error("Variant has no data: "+e)}}class Yt extends tr{constructor(){super(...arguments),this._id=Yt._counter++,this._type=void 0}accept(e,r){if(!this._type)throw Error("Recursive type uninitialized.");return e.visitRec(this,this._type,r)}fill(e){this._type=e}getType(){return this._type}covariant(e){if(this._type&&this._type.covariant(e))return!0;throw new Error(`Invalid ${this.display()} argument: ${qe(e)}`)}encodeValue(e){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.encodeValue(e)}_buildTypeTableImpl(e){if(!this._type)throw Error("Recursive type uninitialized.");e.add(this,new Uint8Array([])),this._type.buildTypeTable(e),e.merge(this,this._type.name)}decodeValue(e,r){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.decodeValue(e,r)}get name(){return`rec_${this._id}`}display(){if(!this._type)throw Error("Recursive type uninitialized.");return`${this.name}.${this._type.name}`}valueToString(e){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.valueToString(e)}}Yt._counter=0;function gs(t){if(mr(t)!==1)throw new Error("Cannot decode principal");const r=Number(Ke(t));return _e.fromUint8Array(new Uint8Array(gr(t,r)))}class Vo extends pt{accept(e,r){return e.visitPrincipal(this,r)}covariant(e){if(e&&e._isPrincipal)return!0;throw new Error(`Invalid ${this.display()} argument: ${qe(e)}`)}encodeValue(e){const r=e.toUint8Array(),n=Pe(r.byteLength);return Ne(new Uint8Array([1]),n,r)}encodeType(){return je(-24)}decodeValue(e,r){return this.checkType(r),gs(e)}get name(){return"principal"}valueToString(e){return`${this.name} "${e.toText()}"`}}class ms extends tr{constructor(e,r,n=[]){super(),this.argTypes=e,this.retTypes=r,this.annotations=n}static argsToString(e,r){if(e.length!==r.length)throw new Error("arity mismatch");return"("+e.map((n,i)=>n.valueToString(r[i])).join(", ")+")"}accept(e,r){return e.visitFunc(this,r)}covariant(e){if(Array.isArray(e)&&e.length===2&&e[0]&&e[0]._isPrincipal&&typeof e[1]=="string")return!0;throw new Error(`Invalid ${this.display()} argument: ${qe(e)}`)}encodeValue([e,r]){const n=e.toUint8Array(),i=Pe(n.byteLength),u=Ne(new Uint8Array([1]),i,n),f=new TextEncoder().encode(r),o=Pe(f.byteLength);return Ne(new Uint8Array([1]),u,o,f)}_buildTypeTableImpl(e){this.argTypes.forEach(g=>g.buildTypeTable(e)),this.retTypes.forEach(g=>g.buildTypeTable(e));const r=je(-22),n=Pe(this.argTypes.length),i=Ne(...this.argTypes.map(g=>g.encodeType(e))),u=Pe(this.retTypes.length),f=Ne(...this.retTypes.map(g=>g.encodeType(e))),o=Pe(this.annotations.length),w=Ne(...this.annotations.map(g=>this.encodeAnnotation(g)));e.add(this,Ne(r,n,i,u,f,o,w))}decodeValue(e){if(mr(e)!==1)throw new Error("Cannot decode function reference");const n=gs(e),i=Number(Ke(e)),u=gr(e,i),o=new TextDecoder("utf8",{fatal:!0}).decode(u);return[n,o]}get name(){const e=this.argTypes.map(i=>i.name).join(", "),r=this.retTypes.map(i=>i.name).join(", "),n=" "+this.annotations.join(" ");return`(${e}) -> (${r})${n}`}valueToString([e,r]){return`func "${e.toText()}".${r}`}display(){const e=this.argTypes.map(i=>i.display()).join(", "),r=this.retTypes.map(i=>i.display()).join(", "),n=" "+this.annotations.join(" ");return`(${e})  (${r})${n}`}encodeAnnotation(e){if(e==="query")return new Uint8Array([1]);if(e==="oneway")return new Uint8Array([2]);if(e==="composite_query")return new Uint8Array([3]);throw new Error("Illegal function annotation")}}class Ho extends tr{constructor(e){super(),this._fields=Object.entries(e).sort((r,n)=>r[0]<n[0]?-1:r[0]>n[0]?1:0)}accept(e,r){return e.visitService(this,r)}covariant(e){if(e&&e._isPrincipal)return!0;throw new Error(`Invalid ${this.display()} argument: ${qe(e)}`)}encodeValue(e){const r=e.toUint8Array(),n=Pe(r.length);return Ne(new Uint8Array([1]),n,r)}_buildTypeTableImpl(e){this._fields.forEach(([u,f])=>f.buildTypeTable(e));const r=je(-23),n=Pe(this._fields.length),i=this._fields.map(([u,f])=>{const o=new TextEncoder().encode(u),w=Pe(o.length);return Ne(w,o,f.encodeType(e))});e.add(this,Ne(r,n,...i))}decodeValue(e){return gs(e)}get name(){return`service {${this._fields.map(([r,n])=>r+":"+n.name).join("; ")}}`}valueToString(e){return`service "${e.toText()}"`}}function qe(t){const e=JSON.stringify(t,(r,n)=>typeof n=="bigint"?`BigInt(${n})`:n);return e&&e.length>ks?e.substring(0,ks-3)+"...":e}function Ji(t,e){if(e.length<t.length)throw Error("Wrong number of message arguments");const r=new $u;t.forEach(w=>w.buildTypeTable(r));const n=new TextEncoder().encode(Fn),i=r.encode(),u=Pe(e.length),f=Ne(...t.map(w=>w.encodeType(r))),o=Ne(...nn(t,e,(w,g)=>{try{w.covariant(g)}catch(S){throw new Error(S.message+`

`)}return w.encodeValue(g)}));return Ne(n,i,u,f,o)}function jo(t,e){const r=new Zr(e);if(e.byteLength<Fn.length)throw new Error("Message length smaller than magic number");const n=gr(r,Fn.length),i=new TextDecoder().decode(n);if(i!==Fn)throw new Error("Wrong magic number: "+JSON.stringify(i));function u(_){const y=[],$=Number(Ke(_));for(let K=0;K<$;K++){const j=Number(Jt(_));switch(j){case-18:case-19:{const D=Number(Jt(_));y.push([j,D]);break}case-20:case-21:{const D=[];let R=Number(Ke(_)),C;for(;R--;){const W=Number(Ke(_));if(W>=Math.pow(2,32))throw new Error("field id out of 32-bit range");if(typeof C=="number"&&C>=W)throw new Error("field id collision or not sorted");C=W;const te=Number(Jt(_));D.push([W,te])}y.push([j,D]);break}case-22:{const D=[];let R=Number(Ke(_));for(;R--;)D.push(Number(Jt(_)));const C=[];let W=Number(Ke(_));for(;W--;)C.push(Number(Jt(_)));const te=[];let re=Number(Ke(_));for(;re--;)switch(Number(Ke(_))){case 1:{te.push("query");break}case 2:{te.push("oneway");break}case 3:{te.push("composite_query");break}default:throw new Error("unknown annotation")}y.push([j,[D,C,te]]);break}case-23:{let D=Number(Ke(_));const R=[];for(;D--;){const C=Number(Ke(_)),W=new TextDecoder().decode(gr(_,C)),te=Jt(_);R.push([W,te])}y.push([j,R]);break}default:throw new Error("Illegal op_code: "+j)}}const q=[],X=Number(Ke(_));for(let K=0;K<X;K++)q.push(Number(Jt(_)));return[y,q]}const[f,o]=u(r);if(o.length<t.length)throw new Error("Wrong number of return values");const w=f.map(_=>da());function g(_){if(_<-24)throw new Error("future value not supported");if(_<0)switch(_){case-1:return zo;case-2:return Ko;case-3:return Xo;case-4:return Lo;case-5:return na;case-6:return ia;case-7:return sa;case-8:return oa;case-9:return Do;case-10:return ea;case-11:return ta;case-12:return ra;case-13:return Jo;case-14:return Qo;case-15:return Wo;case-16:return Zo;case-17:return Yo;case-24:return aa;default:throw new Error("Illegal op_code: "+_)}if(_>=f.length)throw new Error("type index out of range");return w[_]}function S(_){switch(_[0]){case-19:{const y=g(_[1]);return ua(y)}case-18:{const y=g(_[1]);return fa(y)}case-20:{const y={};for(const[X,K]of _[1]){const j=`_${X}_`;y[j]=g(K)}const $=la(y),q=$.tryAsTuple();return Array.isArray(q)?ca(...q):$}case-21:{const y={};for(const[$,q]of _[1]){const X=`_${$}_`;y[X]=g(q)}return ha(y)}case-22:{const[y,$,q]=_[1];return pa(y.map(X=>g(X)),$.map(X=>g(X)),q)}case-23:{const y={},$=_[1];for(const[q,X]of $){let K=g(X);if(K instanceof Yt&&(K=K.getType()),!(K instanceof ms))throw new Error("Illegal service definition: services can only contain functions");y[q]=K}return ya(y)}default:throw new Error("Illegal op_code: "+_[0])}}f.forEach((_,y)=>{if(_[0]===-22){const $=S(_);w[y].fill($)}}),f.forEach((_,y)=>{if(_[0]!==-22){const $=S(_);w[y].fill($)}});const T=o.map(_=>g(_)),x=t.map((_,y)=>_.decodeValue(r,T[y]));for(let _=t.length;_<T.length;_++)T[_].decodeValue(r,T[_]);if(r.byteLength>0)throw new Error("decode: Left-over bytes");return x}const Yo=new ko,Zo=new Hr,qu=new Po,Ko=new $o,zo=new Dn,Wo=new Co,Lo=new qo,Xo=new Go,Jo=new ws(32),Qo=new ws(64),Do=new br(8),ea=new br(16),ta=new br(32),ra=new br(64),na=new er(8),ia=new er(16),sa=new er(32),oa=new er(64),aa=new Vo;function ca(...t){return new fi(t)}function ua(t){return new ui(t)}function fa(t){return new _r(t)}function la(t){return new dn(t)}function ha(t){return new li(t)}function da(){return new Yt}function pa(t,e,r=[]){return new ms(t,e,r)}function ya(t){return new Ho(t)}const Gu=Object.freeze(Object.defineProperty({__proto__:null,Bool:Ko,BoolClass:$o,ConstructType:tr,Empty:Yo,EmptyClass:ko,FixedIntClass:br,FixedNatClass:er,Float32:Jo,Float64:Qo,FloatClass:ws,Func:pa,FuncClass:ms,Int:Lo,Int16:ea,Int32:ta,Int64:ra,Int8:Do,IntClass:qo,Nat:Xo,Nat16:ia,Nat32:sa,Nat64:oa,Nat8:na,NatClass:Go,Null:zo,NullClass:Dn,Opt:fa,OptClass:_r,PrimitiveType:pt,Principal:aa,PrincipalClass:Vo,Rec:da,RecClass:Yt,Record:la,RecordClass:dn,Reserved:Zo,ReservedClass:Hr,Service:ya,ServiceClass:Ho,Text:Wo,TextClass:Co,Tuple:ca,TupleClass:fi,Type:ci,Unknown:qu,UnknownClass:Po,Variant:ha,VariantClass:li,Vec:ua,VecClass:ui,Visitor:Cu,decode:jo,encode:Ji},Symbol.toStringTag,{value:"Module"}));var wa={},pn={};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){var e=fn,r=ln,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=o,t.SlowBuffer=K,t.INSPECT_MAX_BYTES=50;var i=2147483647;t.kMaxLength=i,o.TYPED_ARRAY_SUPPORT=u(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function u(){try{var h=new Uint8Array(1),s={foo:function(){return 42}};return Object.setPrototypeOf(s,Uint8Array.prototype),Object.setPrototypeOf(h,s),h.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function f(h){if(h>i)throw new RangeError('The value "'+h+'" is invalid for option "size"');var s=new Uint8Array(h);return Object.setPrototypeOf(s,o.prototype),s}function o(h,s,a){if(typeof h=="number"){if(typeof s=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return T(h)}return w(h,s,a)}o.poolSize=8192;function w(h,s,a){if(typeof h=="string")return x(h,s);if(ArrayBuffer.isView(h))return y(h);if(h==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h);if(G(h,ArrayBuffer)||h&&G(h.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(G(h,SharedArrayBuffer)||h&&G(h.buffer,SharedArrayBuffer)))return $(h,s,a);if(typeof h=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var p=h.valueOf&&h.valueOf();if(p!=null&&p!==h)return o.from(p,s,a);var m=q(h);if(m)return m;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof h[Symbol.toPrimitive]=="function")return o.from(h[Symbol.toPrimitive]("string"),s,a);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h)}o.from=function(h,s,a){return w(h,s,a)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function g(h){if(typeof h!="number")throw new TypeError('"size" argument must be of type number');if(h<0)throw new RangeError('The value "'+h+'" is invalid for option "size"')}function S(h,s,a){return g(h),h<=0?f(h):s!==void 0?typeof a=="string"?f(h).fill(s,a):f(h).fill(s):f(h)}o.alloc=function(h,s,a){return S(h,s,a)};function T(h){return g(h),f(h<0?0:X(h)|0)}o.allocUnsafe=function(h){return T(h)},o.allocUnsafeSlow=function(h){return T(h)};function x(h,s){if((typeof s!="string"||s==="")&&(s="utf8"),!o.isEncoding(s))throw new TypeError("Unknown encoding: "+s);var a=j(h,s)|0,p=f(a),m=p.write(h,s);return m!==a&&(p=p.slice(0,m)),p}function _(h){for(var s=h.length<0?0:X(h.length)|0,a=f(s),p=0;p<s;p+=1)a[p]=h[p]&255;return a}function y(h){if(G(h,Uint8Array)){var s=new Uint8Array(h);return $(s.buffer,s.byteOffset,s.byteLength)}return _(h)}function $(h,s,a){if(s<0||h.byteLength<s)throw new RangeError('"offset" is outside of buffer bounds');if(h.byteLength<s+(a||0))throw new RangeError('"length" is outside of buffer bounds');var p;return s===void 0&&a===void 0?p=new Uint8Array(h):a===void 0?p=new Uint8Array(h,s):p=new Uint8Array(h,s,a),Object.setPrototypeOf(p,o.prototype),p}function q(h){if(o.isBuffer(h)){var s=X(h.length)|0,a=f(s);return a.length===0||h.copy(a,0,0,s),a}if(h.length!==void 0)return typeof h.length!="number"||P(h.length)?f(0):_(h);if(h.type==="Buffer"&&Array.isArray(h.data))return _(h.data)}function X(h){if(h>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return h|0}function K(h){return+h!=h&&(h=0),o.alloc(+h)}o.isBuffer=function(s){return s!=null&&s._isBuffer===!0&&s!==o.prototype},o.compare=function(s,a){if(G(s,Uint8Array)&&(s=o.from(s,s.offset,s.byteLength)),G(a,Uint8Array)&&(a=o.from(a,a.offset,a.byteLength)),!o.isBuffer(s)||!o.isBuffer(a))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(s===a)return 0;for(var p=s.length,m=a.length,I=0,Y=Math.min(p,m);I<Y;++I)if(s[I]!==a[I]){p=s[I],m=a[I];break}return p<m?-1:m<p?1:0},o.isEncoding=function(s){switch(String(s).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(s,a){if(!Array.isArray(s))throw new TypeError('"list" argument must be an Array of Buffers');if(s.length===0)return o.alloc(0);var p;if(a===void 0)for(a=0,p=0;p<s.length;++p)a+=s[p].length;var m=o.allocUnsafe(a),I=0;for(p=0;p<s.length;++p){var Y=s[p];if(G(Y,Uint8Array))I+Y.length>m.length?o.from(Y).copy(m,I):Uint8Array.prototype.set.call(m,Y,I);else if(o.isBuffer(Y))Y.copy(m,I);else throw new TypeError('"list" argument must be an Array of Buffers');I+=Y.length}return m};function j(h,s){if(o.isBuffer(h))return h.length;if(ArrayBuffer.isView(h)||G(h,ArrayBuffer))return h.byteLength;if(typeof h!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof h);var a=h.length,p=arguments.length>2&&arguments[2]===!0;if(!p&&a===0)return 0;for(var m=!1;;)switch(s){case"ascii":case"latin1":case"binary":return a;case"utf8":case"utf-8":return ce(h).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a*2;case"hex":return a>>>1;case"base64":return v(h).length;default:if(m)return p?-1:ce(h).length;s=(""+s).toLowerCase(),m=!0}}o.byteLength=j;function D(h,s,a){var p=!1;if((s===void 0||s<0)&&(s=0),s>this.length||((a===void 0||a>this.length)&&(a=this.length),a<=0)||(a>>>=0,s>>>=0,a<=s))return"";for(h||(h="utf8");;)switch(h){case"hex":return ne(this,s,a);case"utf8":case"utf-8":return N(this,s,a);case"ascii":return ee(this,s,a);case"latin1":case"binary":return Q(this,s,a);case"base64":return b(this,s,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return he(this,s,a);default:if(p)throw new TypeError("Unknown encoding: "+h);h=(h+"").toLowerCase(),p=!0}}o.prototype._isBuffer=!0;function R(h,s,a){var p=h[s];h[s]=h[a],h[a]=p}o.prototype.swap16=function(){var s=this.length;if(s%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var a=0;a<s;a+=2)R(this,a,a+1);return this},o.prototype.swap32=function(){var s=this.length;if(s%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var a=0;a<s;a+=4)R(this,a,a+3),R(this,a+1,a+2);return this},o.prototype.swap64=function(){var s=this.length;if(s%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var a=0;a<s;a+=8)R(this,a,a+7),R(this,a+1,a+6),R(this,a+2,a+5),R(this,a+3,a+4);return this},o.prototype.toString=function(){var s=this.length;return s===0?"":arguments.length===0?N(this,0,s):D.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(s){if(!o.isBuffer(s))throw new TypeError("Argument must be a Buffer");return this===s?!0:o.compare(this,s)===0},o.prototype.inspect=function(){var s="",a=t.INSPECT_MAX_BYTES;return s=this.toString("hex",0,a).replace(/(.{2})/g,"$1 ").trim(),this.length>a&&(s+=" ... "),"<Buffer "+s+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(s,a,p,m,I){if(G(s,Uint8Array)&&(s=o.from(s,s.offset,s.byteLength)),!o.isBuffer(s))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof s);if(a===void 0&&(a=0),p===void 0&&(p=s?s.length:0),m===void 0&&(m=0),I===void 0&&(I=this.length),a<0||p>s.length||m<0||I>this.length)throw new RangeError("out of range index");if(m>=I&&a>=p)return 0;if(m>=I)return-1;if(a>=p)return 1;if(a>>>=0,p>>>=0,m>>>=0,I>>>=0,this===s)return 0;for(var Y=I-m,se=p-a,ue=Math.min(Y,se),fe=this.slice(m,I),me=s.slice(a,p),d=0;d<ue;++d)if(fe[d]!==me[d]){Y=fe[d],se=me[d];break}return Y<se?-1:se<Y?1:0};function C(h,s,a,p,m){if(h.length===0)return-1;if(typeof a=="string"?(p=a,a=0):a>2147483647?a=2147483647:a<-2147483648&&(a=-2147483648),a=+a,P(a)&&(a=m?0:h.length-1),a<0&&(a=h.length+a),a>=h.length){if(m)return-1;a=h.length-1}else if(a<0)if(m)a=0;else return-1;if(typeof s=="string"&&(s=o.from(s,p)),o.isBuffer(s))return s.length===0?-1:W(h,s,a,p,m);if(typeof s=="number")return s=s&255,typeof Uint8Array.prototype.indexOf=="function"?m?Uint8Array.prototype.indexOf.call(h,s,a):Uint8Array.prototype.lastIndexOf.call(h,s,a):W(h,[s],a,p,m);throw new TypeError("val must be string, number or Buffer")}function W(h,s,a,p,m){var I=1,Y=h.length,se=s.length;if(p!==void 0&&(p=String(p).toLowerCase(),p==="ucs2"||p==="ucs-2"||p==="utf16le"||p==="utf-16le")){if(h.length<2||s.length<2)return-1;I=2,Y/=2,se/=2,a/=2}function ue(l,A){return I===1?l[A]:l.readUInt16BE(A*I)}var fe;if(m){var me=-1;for(fe=a;fe<Y;fe++)if(ue(h,fe)===ue(s,me===-1?0:fe-me)){if(me===-1&&(me=fe),fe-me+1===se)return me*I}else me!==-1&&(fe-=fe-me),me=-1}else for(a+se>Y&&(a=Y-se),fe=a;fe>=0;fe--){for(var d=!0,c=0;c<se;c++)if(ue(h,fe+c)!==ue(s,c)){d=!1;break}if(d)return fe}return-1}o.prototype.includes=function(s,a,p){return this.indexOf(s,a,p)!==-1},o.prototype.indexOf=function(s,a,p){return C(this,s,a,p,!0)},o.prototype.lastIndexOf=function(s,a,p){return C(this,s,a,p,!1)};function te(h,s,a,p){a=Number(a)||0;var m=h.length-a;p?(p=Number(p),p>m&&(p=m)):p=m;var I=s.length;p>I/2&&(p=I/2);for(var Y=0;Y<p;++Y){var se=parseInt(s.substr(Y*2,2),16);if(P(se))return Y;h[a+Y]=se}return Y}function re(h,s,a,p){return O(ce(s,h.length-a),h,a,p)}function U(h,s,a,p){return O(de(s),h,a,p)}function H(h,s,a,p){return O(v(s),h,a,p)}function J(h,s,a,p){return O(E(s,h.length-a),h,a,p)}o.prototype.write=function(s,a,p,m){if(a===void 0)m="utf8",p=this.length,a=0;else if(p===void 0&&typeof a=="string")m=a,p=this.length,a=0;else if(isFinite(a))a=a>>>0,isFinite(p)?(p=p>>>0,m===void 0&&(m="utf8")):(m=p,p=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var I=this.length-a;if((p===void 0||p>I)&&(p=I),s.length>0&&(p<0||a<0)||a>this.length)throw new RangeError("Attempt to write outside buffer bounds");m||(m="utf8");for(var Y=!1;;)switch(m){case"hex":return te(this,s,a,p);case"utf8":case"utf-8":return re(this,s,a,p);case"ascii":case"latin1":case"binary":return U(this,s,a,p);case"base64":return H(this,s,a,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J(this,s,a,p);default:if(Y)throw new TypeError("Unknown encoding: "+m);m=(""+m).toLowerCase(),Y=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function b(h,s,a){return s===0&&a===h.length?e.fromByteArray(h):e.fromByteArray(h.slice(s,a))}function N(h,s,a){a=Math.min(h.length,a);for(var p=[],m=s;m<a;){var I=h[m],Y=null,se=I>239?4:I>223?3:I>191?2:1;if(m+se<=a){var ue,fe,me,d;switch(se){case 1:I<128&&(Y=I);break;case 2:ue=h[m+1],(ue&192)===128&&(d=(I&31)<<6|ue&63,d>127&&(Y=d));break;case 3:ue=h[m+1],fe=h[m+2],(ue&192)===128&&(fe&192)===128&&(d=(I&15)<<12|(ue&63)<<6|fe&63,d>2047&&(d<55296||d>57343)&&(Y=d));break;case 4:ue=h[m+1],fe=h[m+2],me=h[m+3],(ue&192)===128&&(fe&192)===128&&(me&192)===128&&(d=(I&15)<<18|(ue&63)<<12|(fe&63)<<6|me&63,d>65535&&d<1114112&&(Y=d))}}Y===null?(Y=65533,se=1):Y>65535&&(Y-=65536,p.push(Y>>>10&1023|55296),Y=56320|Y&1023),p.push(Y),m+=se}return L(p)}var M=4096;function L(h){var s=h.length;if(s<=M)return String.fromCharCode.apply(String,h);for(var a="",p=0;p<s;)a+=String.fromCharCode.apply(String,h.slice(p,p+=M));return a}function ee(h,s,a){var p="";a=Math.min(h.length,a);for(var m=s;m<a;++m)p+=String.fromCharCode(h[m]&127);return p}function Q(h,s,a){var p="";a=Math.min(h.length,a);for(var m=s;m<a;++m)p+=String.fromCharCode(h[m]);return p}function ne(h,s,a){var p=h.length;(!s||s<0)&&(s=0),(!a||a<0||a>p)&&(a=p);for(var m="",I=s;I<a;++I)m+=V[h[I]];return m}function he(h,s,a){for(var p=h.slice(s,a),m="",I=0;I<p.length-1;I+=2)m+=String.fromCharCode(p[I]+p[I+1]*256);return m}o.prototype.slice=function(s,a){var p=this.length;s=~~s,a=a===void 0?p:~~a,s<0?(s+=p,s<0&&(s=0)):s>p&&(s=p),a<0?(a+=p,a<0&&(a=0)):a>p&&(a=p),a<s&&(a=s);var m=this.subarray(s,a);return Object.setPrototypeOf(m,o.prototype),m};function oe(h,s,a){if(h%1!==0||h<0)throw new RangeError("offset is not uint");if(h+s>a)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(s,a,p){s=s>>>0,a=a>>>0,p||oe(s,a,this.length);for(var m=this[s],I=1,Y=0;++Y<a&&(I*=256);)m+=this[s+Y]*I;return m},o.prototype.readUintBE=o.prototype.readUIntBE=function(s,a,p){s=s>>>0,a=a>>>0,p||oe(s,a,this.length);for(var m=this[s+--a],I=1;a>0&&(I*=256);)m+=this[s+--a]*I;return m},o.prototype.readUint8=o.prototype.readUInt8=function(s,a){return s=s>>>0,a||oe(s,1,this.length),this[s]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(s,a){return s=s>>>0,a||oe(s,2,this.length),this[s]|this[s+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(s,a){return s=s>>>0,a||oe(s,2,this.length),this[s]<<8|this[s+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(s,a){return s=s>>>0,a||oe(s,4,this.length),(this[s]|this[s+1]<<8|this[s+2]<<16)+this[s+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(s,a){return s=s>>>0,a||oe(s,4,this.length),this[s]*16777216+(this[s+1]<<16|this[s+2]<<8|this[s+3])},o.prototype.readIntLE=function(s,a,p){s=s>>>0,a=a>>>0,p||oe(s,a,this.length);for(var m=this[s],I=1,Y=0;++Y<a&&(I*=256);)m+=this[s+Y]*I;return I*=128,m>=I&&(m-=Math.pow(2,8*a)),m},o.prototype.readIntBE=function(s,a,p){s=s>>>0,a=a>>>0,p||oe(s,a,this.length);for(var m=a,I=1,Y=this[s+--m];m>0&&(I*=256);)Y+=this[s+--m]*I;return I*=128,Y>=I&&(Y-=Math.pow(2,8*a)),Y},o.prototype.readInt8=function(s,a){return s=s>>>0,a||oe(s,1,this.length),this[s]&128?(255-this[s]+1)*-1:this[s]},o.prototype.readInt16LE=function(s,a){s=s>>>0,a||oe(s,2,this.length);var p=this[s]|this[s+1]<<8;return p&32768?p|4294901760:p},o.prototype.readInt16BE=function(s,a){s=s>>>0,a||oe(s,2,this.length);var p=this[s+1]|this[s]<<8;return p&32768?p|4294901760:p},o.prototype.readInt32LE=function(s,a){return s=s>>>0,a||oe(s,4,this.length),this[s]|this[s+1]<<8|this[s+2]<<16|this[s+3]<<24},o.prototype.readInt32BE=function(s,a){return s=s>>>0,a||oe(s,4,this.length),this[s]<<24|this[s+1]<<16|this[s+2]<<8|this[s+3]},o.prototype.readFloatLE=function(s,a){return s=s>>>0,a||oe(s,4,this.length),r.read(this,s,!0,23,4)},o.prototype.readFloatBE=function(s,a){return s=s>>>0,a||oe(s,4,this.length),r.read(this,s,!1,23,4)},o.prototype.readDoubleLE=function(s,a){return s=s>>>0,a||oe(s,8,this.length),r.read(this,s,!0,52,8)},o.prototype.readDoubleBE=function(s,a){return s=s>>>0,a||oe(s,8,this.length),r.read(this,s,!1,52,8)};function ie(h,s,a,p,m,I){if(!o.isBuffer(h))throw new TypeError('"buffer" argument must be a Buffer instance');if(s>m||s<I)throw new RangeError('"value" argument is out of bounds');if(a+p>h.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(s,a,p,m){if(s=+s,a=a>>>0,p=p>>>0,!m){var I=Math.pow(2,8*p)-1;ie(this,s,a,p,I,0)}var Y=1,se=0;for(this[a]=s&255;++se<p&&(Y*=256);)this[a+se]=s/Y&255;return a+p},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(s,a,p,m){if(s=+s,a=a>>>0,p=p>>>0,!m){var I=Math.pow(2,8*p)-1;ie(this,s,a,p,I,0)}var Y=p-1,se=1;for(this[a+Y]=s&255;--Y>=0&&(se*=256);)this[a+Y]=s/se&255;return a+p},o.prototype.writeUint8=o.prototype.writeUInt8=function(s,a,p){return s=+s,a=a>>>0,p||ie(this,s,a,1,255,0),this[a]=s&255,a+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(s,a,p){return s=+s,a=a>>>0,p||ie(this,s,a,2,65535,0),this[a]=s&255,this[a+1]=s>>>8,a+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(s,a,p){return s=+s,a=a>>>0,p||ie(this,s,a,2,65535,0),this[a]=s>>>8,this[a+1]=s&255,a+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(s,a,p){return s=+s,a=a>>>0,p||ie(this,s,a,4,4294967295,0),this[a+3]=s>>>24,this[a+2]=s>>>16,this[a+1]=s>>>8,this[a]=s&255,a+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(s,a,p){return s=+s,a=a>>>0,p||ie(this,s,a,4,4294967295,0),this[a]=s>>>24,this[a+1]=s>>>16,this[a+2]=s>>>8,this[a+3]=s&255,a+4},o.prototype.writeIntLE=function(s,a,p,m){if(s=+s,a=a>>>0,!m){var I=Math.pow(2,8*p-1);ie(this,s,a,p,I-1,-I)}var Y=0,se=1,ue=0;for(this[a]=s&255;++Y<p&&(se*=256);)s<0&&ue===0&&this[a+Y-1]!==0&&(ue=1),this[a+Y]=(s/se>>0)-ue&255;return a+p},o.prototype.writeIntBE=function(s,a,p,m){if(s=+s,a=a>>>0,!m){var I=Math.pow(2,8*p-1);ie(this,s,a,p,I-1,-I)}var Y=p-1,se=1,ue=0;for(this[a+Y]=s&255;--Y>=0&&(se*=256);)s<0&&ue===0&&this[a+Y+1]!==0&&(ue=1),this[a+Y]=(s/se>>0)-ue&255;return a+p},o.prototype.writeInt8=function(s,a,p){return s=+s,a=a>>>0,p||ie(this,s,a,1,127,-128),s<0&&(s=255+s+1),this[a]=s&255,a+1},o.prototype.writeInt16LE=function(s,a,p){return s=+s,a=a>>>0,p||ie(this,s,a,2,32767,-32768),this[a]=s&255,this[a+1]=s>>>8,a+2},o.prototype.writeInt16BE=function(s,a,p){return s=+s,a=a>>>0,p||ie(this,s,a,2,32767,-32768),this[a]=s>>>8,this[a+1]=s&255,a+2},o.prototype.writeInt32LE=function(s,a,p){return s=+s,a=a>>>0,p||ie(this,s,a,4,2147483647,-2147483648),this[a]=s&255,this[a+1]=s>>>8,this[a+2]=s>>>16,this[a+3]=s>>>24,a+4},o.prototype.writeInt32BE=function(s,a,p){return s=+s,a=a>>>0,p||ie(this,s,a,4,2147483647,-2147483648),s<0&&(s=4294967295+s+1),this[a]=s>>>24,this[a+1]=s>>>16,this[a+2]=s>>>8,this[a+3]=s&255,a+4};function Se(h,s,a,p,m,I){if(a+p>h.length)throw new RangeError("Index out of range");if(a<0)throw new RangeError("Index out of range")}function B(h,s,a,p,m){return s=+s,a=a>>>0,m||Se(h,s,a,4),r.write(h,s,a,p,23,4),a+4}o.prototype.writeFloatLE=function(s,a,p){return B(this,s,a,!0,p)},o.prototype.writeFloatBE=function(s,a,p){return B(this,s,a,!1,p)};function Fe(h,s,a,p,m){return s=+s,a=a>>>0,m||Se(h,s,a,8),r.write(h,s,a,p,52,8),a+8}o.prototype.writeDoubleLE=function(s,a,p){return Fe(this,s,a,!0,p)},o.prototype.writeDoubleBE=function(s,a,p){return Fe(this,s,a,!1,p)},o.prototype.copy=function(s,a,p,m){if(!o.isBuffer(s))throw new TypeError("argument should be a Buffer");if(p||(p=0),!m&&m!==0&&(m=this.length),a>=s.length&&(a=s.length),a||(a=0),m>0&&m<p&&(m=p),m===p||s.length===0||this.length===0)return 0;if(a<0)throw new RangeError("targetStart out of bounds");if(p<0||p>=this.length)throw new RangeError("Index out of range");if(m<0)throw new RangeError("sourceEnd out of bounds");m>this.length&&(m=this.length),s.length-a<m-p&&(m=s.length-a+p);var I=m-p;return this===s&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(a,p,m):Uint8Array.prototype.set.call(s,this.subarray(p,m),a),I},o.prototype.fill=function(s,a,p,m){if(typeof s=="string"){if(typeof a=="string"?(m=a,a=0,p=this.length):typeof p=="string"&&(m=p,p=this.length),m!==void 0&&typeof m!="string")throw new TypeError("encoding must be a string");if(typeof m=="string"&&!o.isEncoding(m))throw new TypeError("Unknown encoding: "+m);if(s.length===1){var I=s.charCodeAt(0);(m==="utf8"&&I<128||m==="latin1")&&(s=I)}}else typeof s=="number"?s=s&255:typeof s=="boolean"&&(s=Number(s));if(a<0||this.length<a||this.length<p)throw new RangeError("Out of range index");if(p<=a)return this;a=a>>>0,p=p===void 0?this.length:p>>>0,s||(s=0);var Y;if(typeof s=="number")for(Y=a;Y<p;++Y)this[Y]=s;else{var se=o.isBuffer(s)?s:o.from(s,m),ue=se.length;if(ue===0)throw new TypeError('The value "'+s+'" is invalid for argument "value"');for(Y=0;Y<p-a;++Y)this[Y+a]=se[Y%ue]}return this};var ve=/[^+/0-9A-Za-z-_]/g;function Me(h){if(h=h.split("=")[0],h=h.trim().replace(ve,""),h.length<2)return"";for(;h.length%4!==0;)h=h+"=";return h}function ce(h,s){s=s||1/0;for(var a,p=h.length,m=null,I=[],Y=0;Y<p;++Y){if(a=h.charCodeAt(Y),a>55295&&a<57344){if(!m){if(a>56319){(s-=3)>-1&&I.push(239,191,189);continue}else if(Y+1===p){(s-=3)>-1&&I.push(239,191,189);continue}m=a;continue}if(a<56320){(s-=3)>-1&&I.push(239,191,189),m=a;continue}a=(m-55296<<10|a-56320)+65536}else m&&(s-=3)>-1&&I.push(239,191,189);if(m=null,a<128){if((s-=1)<0)break;I.push(a)}else if(a<2048){if((s-=2)<0)break;I.push(a>>6|192,a&63|128)}else if(a<65536){if((s-=3)<0)break;I.push(a>>12|224,a>>6&63|128,a&63|128)}else if(a<1114112){if((s-=4)<0)break;I.push(a>>18|240,a>>12&63|128,a>>6&63|128,a&63|128)}else throw new Error("Invalid code point")}return I}function de(h){for(var s=[],a=0;a<h.length;++a)s.push(h.charCodeAt(a)&255);return s}function E(h,s){for(var a,p,m,I=[],Y=0;Y<h.length&&!((s-=2)<0);++Y)a=h.charCodeAt(Y),p=a>>8,m=a%256,I.push(m),I.push(p);return I}function v(h){return e.toByteArray(Me(h))}function O(h,s,a,p){for(var m=0;m<p&&!(m+a>=s.length||m>=h.length);++m)s[m+a]=h[m];return m}function G(h,s){return h instanceof s||h!=null&&h.constructor!=null&&h.constructor.name!=null&&h.constructor.name===s.name}function P(h){return h!==h}var V=function(){for(var h="0123456789abcdef",s=new Array(256),a=0;a<16;++a)for(var p=a*16,m=0;m<16;++m)s[p+m]=h[a]+h[m];return s}()})(pn);var ga={exports:{}};(function(t){(function(e){var r,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i=Math.ceil,u=Math.floor,f="[BigNumber Error] ",o=f+"Number primitive has more than 15 significant digits: ",w=1e14,g=14,S=9007199254740991,T=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],x=1e7,_=1e9;function y(C){var W,te,re,U=B.prototype={constructor:B,toString:null,valueOf:null},H=new B(1),J=20,b=4,N=-7,M=21,L=-1e7,ee=1e7,Q=!1,ne=1,he=0,oe={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},ie="0123456789abcdefghijklmnopqrstuvwxyz",Se=!0;function B(E,v){var O,G,P,V,h,s,a,p,m=this;if(!(m instanceof B))return new B(E,v);if(v==null){if(E&&E._isBigNumber===!0){m.s=E.s,!E.c||E.e>ee?m.c=m.e=null:E.e<L?m.c=[m.e=0]:(m.e=E.e,m.c=E.c.slice());return}if((s=typeof E=="number")&&E*0==0){if(m.s=1/E<0?(E=-E,-1):1,E===~~E){for(V=0,h=E;h>=10;h/=10,V++);V>ee?m.c=m.e=null:(m.e=V,m.c=[E]);return}p=String(E)}else{if(!n.test(p=String(E)))return re(m,p,s);m.s=p.charCodeAt(0)==45?(p=p.slice(1),-1):1}(V=p.indexOf("."))>-1&&(p=p.replace(".","")),(h=p.search(/e/i))>0?(V<0&&(V=h),V+=+p.slice(h+1),p=p.substring(0,h)):V<0&&(V=p.length)}else{if(K(v,2,ie.length,"Base"),v==10&&Se)return m=new B(E),ce(m,J+m.e+1,b);if(p=String(E),s=typeof E=="number"){if(E*0!=0)return re(m,p,s,v);if(m.s=1/E<0?(p=p.slice(1),-1):1,B.DEBUG&&p.replace(/^0\.0*|\./,"").length>15)throw Error(o+E)}else m.s=p.charCodeAt(0)===45?(p=p.slice(1),-1):1;for(O=ie.slice(0,v),V=h=0,a=p.length;h<a;h++)if(O.indexOf(G=p.charAt(h))<0){if(G=="."){if(h>V){V=a;continue}}else if(!P&&(p==p.toUpperCase()&&(p=p.toLowerCase())||p==p.toLowerCase()&&(p=p.toUpperCase()))){P=!0,h=-1,V=0;continue}return re(m,String(E),s,v)}s=!1,p=te(p,v,10,m.s),(V=p.indexOf("."))>-1?p=p.replace(".",""):V=p.length}for(h=0;p.charCodeAt(h)===48;h++);for(a=p.length;p.charCodeAt(--a)===48;);if(p=p.slice(h,++a)){if(a-=h,s&&B.DEBUG&&a>15&&(E>S||E!==u(E)))throw Error(o+m.s*E);if((V=V-h-1)>ee)m.c=m.e=null;else if(V<L)m.c=[m.e=0];else{if(m.e=V,m.c=[],h=(V+1)%g,V<0&&(h+=g),h<a){for(h&&m.c.push(+p.slice(0,h)),a-=g;h<a;)m.c.push(+p.slice(h,h+=g));h=g-(p=p.slice(h)).length}else h-=a;for(;h--;p+="0");m.c.push(+p)}}else m.c=[m.e=0]}B.clone=y,B.ROUND_UP=0,B.ROUND_DOWN=1,B.ROUND_CEIL=2,B.ROUND_FLOOR=3,B.ROUND_HALF_UP=4,B.ROUND_HALF_DOWN=5,B.ROUND_HALF_EVEN=6,B.ROUND_HALF_CEIL=7,B.ROUND_HALF_FLOOR=8,B.EUCLID=9,B.config=B.set=function(E){var v,O;if(E!=null)if(typeof E=="object"){if(E.hasOwnProperty(v="DECIMAL_PLACES")&&(O=E[v],K(O,0,_,v),J=O),E.hasOwnProperty(v="ROUNDING_MODE")&&(O=E[v],K(O,0,8,v),b=O),E.hasOwnProperty(v="EXPONENTIAL_AT")&&(O=E[v],O&&O.pop?(K(O[0],-_,0,v),K(O[1],0,_,v),N=O[0],M=O[1]):(K(O,-_,_,v),N=-(M=O<0?-O:O))),E.hasOwnProperty(v="RANGE"))if(O=E[v],O&&O.pop)K(O[0],-_,-1,v),K(O[1],1,_,v),L=O[0],ee=O[1];else if(K(O,-_,_,v),O)L=-(ee=O<0?-O:O);else throw Error(f+v+" cannot be zero: "+O);if(E.hasOwnProperty(v="CRYPTO"))if(O=E[v],O===!!O)if(O)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))Q=O;else throw Q=!O,Error(f+"crypto unavailable");else Q=O;else throw Error(f+v+" not true or false: "+O);if(E.hasOwnProperty(v="MODULO_MODE")&&(O=E[v],K(O,0,9,v),ne=O),E.hasOwnProperty(v="POW_PRECISION")&&(O=E[v],K(O,0,_,v),he=O),E.hasOwnProperty(v="FORMAT"))if(O=E[v],typeof O=="object")oe=O;else throw Error(f+v+" not an object: "+O);if(E.hasOwnProperty(v="ALPHABET"))if(O=E[v],typeof O=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(O))Se=O.slice(0,10)=="0123456789",ie=O;else throw Error(f+v+" invalid: "+O)}else throw Error(f+"Object expected: "+E);return{DECIMAL_PLACES:J,ROUNDING_MODE:b,EXPONENTIAL_AT:[N,M],RANGE:[L,ee],CRYPTO:Q,MODULO_MODE:ne,POW_PRECISION:he,FORMAT:oe,ALPHABET:ie}},B.isBigNumber=function(E){if(!E||E._isBigNumber!==!0)return!1;if(!B.DEBUG)return!0;var v,O,G=E.c,P=E.e,V=E.s;e:if({}.toString.call(G)=="[object Array]"){if((V===1||V===-1)&&P>=-_&&P<=_&&P===u(P)){if(G[0]===0){if(P===0&&G.length===1)return!0;break e}if(v=(P+1)%g,v<1&&(v+=g),String(G[0]).length==v){for(v=0;v<G.length;v++)if(O=G[v],O<0||O>=w||O!==u(O))break e;if(O!==0)return!0}}}else if(G===null&&P===null&&(V===null||V===1||V===-1))return!0;throw Error(f+"Invalid BigNumber: "+E)},B.maximum=B.max=function(){return ve(arguments,-1)},B.minimum=B.min=function(){return ve(arguments,1)},B.random=function(){var E=9007199254740992,v=Math.random()*E&2097151?function(){return u(Math.random()*E)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(O){var G,P,V,h,s,a=0,p=[],m=new B(H);if(O==null?O=J:K(O,0,_),h=i(O/g),Q)if(crypto.getRandomValues){for(G=crypto.getRandomValues(new Uint32Array(h*=2));a<h;)s=G[a]*131072+(G[a+1]>>>11),s>=9e15?(P=crypto.getRandomValues(new Uint32Array(2)),G[a]=P[0],G[a+1]=P[1]):(p.push(s%1e14),a+=2);a=h/2}else if(crypto.randomBytes){for(G=crypto.randomBytes(h*=7);a<h;)s=(G[a]&31)*281474976710656+G[a+1]*1099511627776+G[a+2]*4294967296+G[a+3]*16777216+(G[a+4]<<16)+(G[a+5]<<8)+G[a+6],s>=9e15?crypto.randomBytes(7).copy(G,a):(p.push(s%1e14),a+=7);a=h/7}else throw Q=!1,Error(f+"crypto unavailable");if(!Q)for(;a<h;)s=v(),s<9e15&&(p[a++]=s%1e14);for(h=p[--a],O%=g,h&&O&&(s=T[g-O],p[a]=u(h/s)*s);p[a]===0;p.pop(),a--);if(a<0)p=[V=0];else{for(V=-1;p[0]===0;p.splice(0,1),V-=g);for(a=1,s=p[0];s>=10;s/=10,a++);a<g&&(V-=g-a)}return m.e=V,m.c=p,m}}(),B.sum=function(){for(var E=1,v=arguments,O=new B(v[0]);E<v.length;)O=O.plus(v[E++]);return O},te=function(){var E="0123456789";function v(O,G,P,V){for(var h,s=[0],a,p=0,m=O.length;p<m;){for(a=s.length;a--;s[a]*=G);for(s[0]+=V.indexOf(O.charAt(p++)),h=0;h<s.length;h++)s[h]>P-1&&(s[h+1]==null&&(s[h+1]=0),s[h+1]+=s[h]/P|0,s[h]%=P)}return s.reverse()}return function(O,G,P,V,h){var s,a,p,m,I,Y,se,ue,fe=O.indexOf("."),me=J,d=b;for(fe>=0&&(m=he,he=0,O=O.replace(".",""),ue=new B(G),Y=ue.pow(O.length-fe),he=m,ue.c=v(R(q(Y.c),Y.e,"0"),10,P,E),ue.e=ue.c.length),se=v(O,G,P,h?(s=ie,E):(s=E,ie)),p=m=se.length;se[--m]==0;se.pop());if(!se[0])return s.charAt(0);if(fe<0?--p:(Y.c=se,Y.e=p,Y.s=V,Y=W(Y,ue,me,d,P),se=Y.c,I=Y.r,p=Y.e),a=p+me+1,fe=se[a],m=P/2,I=I||a<0||se[a+1]!=null,I=d<4?(fe!=null||I)&&(d==0||d==(Y.s<0?3:2)):fe>m||fe==m&&(d==4||I||d==6&&se[a-1]&1||d==(Y.s<0?8:7)),a<1||!se[0])O=I?R(s.charAt(1),-me,s.charAt(0)):s.charAt(0);else{if(se.length=a,I)for(--P;++se[--a]>P;)se[a]=0,a||(++p,se=[1].concat(se));for(m=se.length;!se[--m];);for(fe=0,O="";fe<=m;O+=s.charAt(se[fe++]));O=R(O,p,s.charAt(0))}return O}}(),W=function(){function E(G,P,V){var h,s,a,p,m=0,I=G.length,Y=P%x,se=P/x|0;for(G=G.slice();I--;)a=G[I]%x,p=G[I]/x|0,h=se*a+p*Y,s=Y*a+h%x*x+m,m=(s/V|0)+(h/x|0)+se*p,G[I]=s%V;return m&&(G=[m].concat(G)),G}function v(G,P,V,h){var s,a;if(V!=h)a=V>h?1:-1;else for(s=a=0;s<V;s++)if(G[s]!=P[s]){a=G[s]>P[s]?1:-1;break}return a}function O(G,P,V,h){for(var s=0;V--;)G[V]-=s,s=G[V]<P[V]?1:0,G[V]=s*h+G[V]-P[V];for(;!G[0]&&G.length>1;G.splice(0,1));}return function(G,P,V,h,s){var a,p,m,I,Y,se,ue,fe,me,d,c,l,A,k,z,Z,we,be=G.s==P.s?1:-1,ge=G.c,ye=P.c;if(!ge||!ge[0]||!ye||!ye[0])return new B(!G.s||!P.s||(ge?ye&&ge[0]==ye[0]:!ye)?NaN:ge&&ge[0]==0||!ye?be*0:be/0);for(fe=new B(be),me=fe.c=[],p=G.e-P.e,be=V+p+1,s||(s=w,p=$(G.e/g)-$(P.e/g),be=be/g|0),m=0;ye[m]==(ge[m]||0);m++);if(ye[m]>(ge[m]||0)&&p--,be<0)me.push(1),I=!0;else{for(k=ge.length,Z=ye.length,m=0,be+=2,Y=u(s/(ye[0]+1)),Y>1&&(ye=E(ye,Y,s),ge=E(ge,Y,s),Z=ye.length,k=ge.length),A=Z,d=ge.slice(0,Z),c=d.length;c<Z;d[c++]=0);we=ye.slice(),we=[0].concat(we),z=ye[0],ye[1]>=s/2&&z++;do{if(Y=0,a=v(ye,d,Z,c),a<0){if(l=d[0],Z!=c&&(l=l*s+(d[1]||0)),Y=u(l/z),Y>1)for(Y>=s&&(Y=s-1),se=E(ye,Y,s),ue=se.length,c=d.length;v(se,d,ue,c)==1;)Y--,O(se,Z<ue?we:ye,ue,s),ue=se.length,a=1;else Y==0&&(a=Y=1),se=ye.slice(),ue=se.length;if(ue<c&&(se=[0].concat(se)),O(d,se,c,s),c=d.length,a==-1)for(;v(ye,d,Z,c)<1;)Y++,O(d,Z<c?we:ye,c,s),c=d.length}else a===0&&(Y++,d=[0]);me[m++]=Y,d[0]?d[c++]=ge[A]||0:(d=[ge[A]],c=1)}while((A++<k||d[0]!=null)&&be--);I=d[0]!=null,me[0]||me.splice(0,1)}if(s==w){for(m=1,be=me[0];be>=10;be/=10,m++);ce(fe,V+(fe.e=m+p*g-1)+1,h,I)}else fe.e=p,fe.r=+I;return fe}}();function Fe(E,v,O,G){var P,V,h,s,a;if(O==null?O=b:K(O,0,8),!E.c)return E.toString();if(P=E.c[0],h=E.e,v==null)a=q(E.c),a=G==1||G==2&&(h<=N||h>=M)?D(a,h):R(a,h,"0");else if(E=ce(new B(E),v,O),V=E.e,a=q(E.c),s=a.length,G==1||G==2&&(v<=V||V<=N)){for(;s<v;a+="0",s++);a=D(a,V)}else if(v-=h+(G===2&&V>h),a=R(a,V,"0"),V+1>s){if(--v>0)for(a+=".";v--;a+="0");}else if(v+=V-s,v>0)for(V+1==s&&(a+=".");v--;a+="0");return E.s<0&&P?"-"+a:a}function ve(E,v){for(var O,G,P=1,V=new B(E[0]);P<E.length;P++)G=new B(E[P]),(!G.s||(O=X(V,G))===v||O===0&&V.s===v)&&(V=G);return V}function Me(E,v,O){for(var G=1,P=v.length;!v[--P];v.pop());for(P=v[0];P>=10;P/=10,G++);return(O=G+O*g-1)>ee?E.c=E.e=null:O<L?E.c=[E.e=0]:(E.e=O,E.c=v),E}re=function(){var E=/^(-?)0([xbo])(?=\w[\w.]*$)/i,v=/^([^.]+)\.$/,O=/^\.([^.]+)$/,G=/^-?(Infinity|NaN)$/,P=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(V,h,s,a){var p,m=s?h:h.replace(P,"");if(G.test(m))V.s=isNaN(m)?null:m<0?-1:1;else{if(!s&&(m=m.replace(E,function(I,Y,se){return p=(se=se.toLowerCase())=="x"?16:se=="b"?2:8,!a||a==p?Y:I}),a&&(p=a,m=m.replace(v,"$1").replace(O,"0.$1")),h!=m))return new B(m,p);if(B.DEBUG)throw Error(f+"Not a"+(a?" base "+a:"")+" number: "+h);V.s=null}V.c=V.e=null}}();function ce(E,v,O,G){var P,V,h,s,a,p,m,I=E.c,Y=T;if(I){e:{for(P=1,s=I[0];s>=10;s/=10,P++);if(V=v-P,V<0)V+=g,h=v,a=I[p=0],m=u(a/Y[P-h-1]%10);else if(p=i((V+1)/g),p>=I.length)if(G){for(;I.length<=p;I.push(0));a=m=0,P=1,V%=g,h=V-g+1}else break e;else{for(a=s=I[p],P=1;s>=10;s/=10,P++);V%=g,h=V-g+P,m=h<0?0:u(a/Y[P-h-1]%10)}if(G=G||v<0||I[p+1]!=null||(h<0?a:a%Y[P-h-1]),G=O<4?(m||G)&&(O==0||O==(E.s<0?3:2)):m>5||m==5&&(O==4||G||O==6&&(V>0?h>0?a/Y[P-h]:0:I[p-1])%10&1||O==(E.s<0?8:7)),v<1||!I[0])return I.length=0,G?(v-=E.e+1,I[0]=Y[(g-v%g)%g],E.e=-v||0):I[0]=E.e=0,E;if(V==0?(I.length=p,s=1,p--):(I.length=p+1,s=Y[g-V],I[p]=h>0?u(a/Y[P-h]%Y[h])*s:0),G)for(;;)if(p==0){for(V=1,h=I[0];h>=10;h/=10,V++);for(h=I[0]+=s,s=1;h>=10;h/=10,s++);V!=s&&(E.e++,I[0]==w&&(I[0]=1));break}else{if(I[p]+=s,I[p]!=w)break;I[p--]=0,s=1}for(V=I.length;I[--V]===0;I.pop());}E.e>ee?E.c=E.e=null:E.e<L&&(E.c=[E.e=0])}return E}function de(E){var v,O=E.e;return O===null?E.toString():(v=q(E.c),v=O<=N||O>=M?D(v,O):R(v,O,"0"),E.s<0?"-"+v:v)}return U.absoluteValue=U.abs=function(){var E=new B(this);return E.s<0&&(E.s=1),E},U.comparedTo=function(E,v){return X(this,new B(E,v))},U.decimalPlaces=U.dp=function(E,v){var O,G,P,V=this;if(E!=null)return K(E,0,_),v==null?v=b:K(v,0,8),ce(new B(V),E+V.e+1,v);if(!(O=V.c))return null;if(G=((P=O.length-1)-$(this.e/g))*g,P=O[P])for(;P%10==0;P/=10,G--);return G<0&&(G=0),G},U.dividedBy=U.div=function(E,v){return W(this,new B(E,v),J,b)},U.dividedToIntegerBy=U.idiv=function(E,v){return W(this,new B(E,v),0,1)},U.exponentiatedBy=U.pow=function(E,v){var O,G,P,V,h,s,a,p,m,I=this;if(E=new B(E),E.c&&!E.isInteger())throw Error(f+"Exponent not an integer: "+de(E));if(v!=null&&(v=new B(v)),s=E.e>14,!I.c||!I.c[0]||I.c[0]==1&&!I.e&&I.c.length==1||!E.c||!E.c[0])return m=new B(Math.pow(+de(I),s?E.s*(2-j(E)):+de(E))),v?m.mod(v):m;if(a=E.s<0,v){if(v.c?!v.c[0]:!v.s)return new B(NaN);G=!a&&I.isInteger()&&v.isInteger(),G&&(I=I.mod(v))}else{if(E.e>9&&(I.e>0||I.e<-1||(I.e==0?I.c[0]>1||s&&I.c[1]>=24e7:I.c[0]<8e13||s&&I.c[0]<=9999975e7)))return V=I.s<0&&j(E)?-0:0,I.e>-1&&(V=1/V),new B(a?1/V:V);he&&(V=i(he/g+2))}for(s?(O=new B(.5),a&&(E.s=1),p=j(E)):(P=Math.abs(+de(E)),p=P%2),m=new B(H);;){if(p){if(m=m.times(I),!m.c)break;V?m.c.length>V&&(m.c.length=V):G&&(m=m.mod(v))}if(P){if(P=u(P/2),P===0)break;p=P%2}else if(E=E.times(O),ce(E,E.e+1,1),E.e>14)p=j(E);else{if(P=+de(E),P===0)break;p=P%2}I=I.times(I),V?I.c&&I.c.length>V&&(I.c.length=V):G&&(I=I.mod(v))}return G?m:(a&&(m=H.div(m)),v?m.mod(v):V?ce(m,he,b,h):m)},U.integerValue=function(E){var v=new B(this);return E==null?E=b:K(E,0,8),ce(v,v.e+1,E)},U.isEqualTo=U.eq=function(E,v){return X(this,new B(E,v))===0},U.isFinite=function(){return!!this.c},U.isGreaterThan=U.gt=function(E,v){return X(this,new B(E,v))>0},U.isGreaterThanOrEqualTo=U.gte=function(E,v){return(v=X(this,new B(E,v)))===1||v===0},U.isInteger=function(){return!!this.c&&$(this.e/g)>this.c.length-2},U.isLessThan=U.lt=function(E,v){return X(this,new B(E,v))<0},U.isLessThanOrEqualTo=U.lte=function(E,v){return(v=X(this,new B(E,v)))===-1||v===0},U.isNaN=function(){return!this.s},U.isNegative=function(){return this.s<0},U.isPositive=function(){return this.s>0},U.isZero=function(){return!!this.c&&this.c[0]==0},U.minus=function(E,v){var O,G,P,V,h=this,s=h.s;if(E=new B(E,v),v=E.s,!s||!v)return new B(NaN);if(s!=v)return E.s=-v,h.plus(E);var a=h.e/g,p=E.e/g,m=h.c,I=E.c;if(!a||!p){if(!m||!I)return m?(E.s=-v,E):new B(I?h:NaN);if(!m[0]||!I[0])return I[0]?(E.s=-v,E):new B(m[0]?h:b==3?-0:0)}if(a=$(a),p=$(p),m=m.slice(),s=a-p){for((V=s<0)?(s=-s,P=m):(p=a,P=I),P.reverse(),v=s;v--;P.push(0));P.reverse()}else for(G=(V=(s=m.length)<(v=I.length))?s:v,s=v=0;v<G;v++)if(m[v]!=I[v]){V=m[v]<I[v];break}if(V&&(P=m,m=I,I=P,E.s=-E.s),v=(G=I.length)-(O=m.length),v>0)for(;v--;m[O++]=0);for(v=w-1;G>s;){if(m[--G]<I[G]){for(O=G;O&&!m[--O];m[O]=v);--m[O],m[G]+=w}m[G]-=I[G]}for(;m[0]==0;m.splice(0,1),--p);return m[0]?Me(E,m,p):(E.s=b==3?-1:1,E.c=[E.e=0],E)},U.modulo=U.mod=function(E,v){var O,G,P=this;return E=new B(E,v),!P.c||!E.s||E.c&&!E.c[0]?new B(NaN):!E.c||P.c&&!P.c[0]?new B(P):(ne==9?(G=E.s,E.s=1,O=W(P,E,0,3),E.s=G,O.s*=G):O=W(P,E,0,ne),E=P.minus(O.times(E)),!E.c[0]&&ne==1&&(E.s=P.s),E)},U.multipliedBy=U.times=function(E,v){var O,G,P,V,h,s,a,p,m,I,Y,se,ue,fe,me,d=this,c=d.c,l=(E=new B(E,v)).c;if(!c||!l||!c[0]||!l[0])return!d.s||!E.s||c&&!c[0]&&!l||l&&!l[0]&&!c?E.c=E.e=E.s=null:(E.s*=d.s,!c||!l?E.c=E.e=null:(E.c=[0],E.e=0)),E;for(G=$(d.e/g)+$(E.e/g),E.s*=d.s,a=c.length,I=l.length,a<I&&(ue=c,c=l,l=ue,P=a,a=I,I=P),P=a+I,ue=[];P--;ue.push(0));for(fe=w,me=x,P=I;--P>=0;){for(O=0,Y=l[P]%me,se=l[P]/me|0,h=a,V=P+h;V>P;)p=c[--h]%me,m=c[h]/me|0,s=se*p+m*Y,p=Y*p+s%me*me+ue[V]+O,O=(p/fe|0)+(s/me|0)+se*m,ue[V--]=p%fe;ue[V]=O}return O?++G:ue.splice(0,1),Me(E,ue,G)},U.negated=function(){var E=new B(this);return E.s=-E.s||null,E},U.plus=function(E,v){var O,G=this,P=G.s;if(E=new B(E,v),v=E.s,!P||!v)return new B(NaN);if(P!=v)return E.s=-v,G.minus(E);var V=G.e/g,h=E.e/g,s=G.c,a=E.c;if(!V||!h){if(!s||!a)return new B(P/0);if(!s[0]||!a[0])return a[0]?E:new B(s[0]?G:P*0)}if(V=$(V),h=$(h),s=s.slice(),P=V-h){for(P>0?(h=V,O=a):(P=-P,O=s),O.reverse();P--;O.push(0));O.reverse()}for(P=s.length,v=a.length,P-v<0&&(O=a,a=s,s=O,v=P),P=0;v;)P=(s[--v]=s[v]+a[v]+P)/w|0,s[v]=w===s[v]?0:s[v]%w;return P&&(s=[P].concat(s),++h),Me(E,s,h)},U.precision=U.sd=function(E,v){var O,G,P,V=this;if(E!=null&&E!==!!E)return K(E,1,_),v==null?v=b:K(v,0,8),ce(new B(V),E,v);if(!(O=V.c))return null;if(P=O.length-1,G=P*g+1,P=O[P]){for(;P%10==0;P/=10,G--);for(P=O[0];P>=10;P/=10,G++);}return E&&V.e+1>G&&(G=V.e+1),G},U.shiftedBy=function(E){return K(E,-S,S),this.times("1e"+E)},U.squareRoot=U.sqrt=function(){var E,v,O,G,P,V=this,h=V.c,s=V.s,a=V.e,p=J+4,m=new B("0.5");if(s!==1||!h||!h[0])return new B(!s||s<0&&(!h||h[0])?NaN:h?V:1/0);if(s=Math.sqrt(+de(V)),s==0||s==1/0?(v=q(h),(v.length+a)%2==0&&(v+="0"),s=Math.sqrt(+v),a=$((a+1)/2)-(a<0||a%2),s==1/0?v="5e"+a:(v=s.toExponential(),v=v.slice(0,v.indexOf("e")+1)+a),O=new B(v)):O=new B(s+""),O.c[0]){for(a=O.e,s=a+p,s<3&&(s=0);;)if(P=O,O=m.times(P.plus(W(V,P,p,1))),q(P.c).slice(0,s)===(v=q(O.c)).slice(0,s))if(O.e<a&&--s,v=v.slice(s-3,s+1),v=="9999"||!G&&v=="4999"){if(!G&&(ce(P,P.e+J+2,0),P.times(P).eq(V))){O=P;break}p+=4,s+=4,G=1}else{(!+v||!+v.slice(1)&&v.charAt(0)=="5")&&(ce(O,O.e+J+2,1),E=!O.times(O).eq(V));break}}return ce(O,O.e+J+1,b,E)},U.toExponential=function(E,v){return E!=null&&(K(E,0,_),E++),Fe(this,E,v,1)},U.toFixed=function(E,v){return E!=null&&(K(E,0,_),E=E+this.e+1),Fe(this,E,v)},U.toFormat=function(E,v,O){var G,P=this;if(O==null)E!=null&&v&&typeof v=="object"?(O=v,v=null):E&&typeof E=="object"?(O=E,E=v=null):O=oe;else if(typeof O!="object")throw Error(f+"Argument not an object: "+O);if(G=P.toFixed(E,v),P.c){var V,h=G.split("."),s=+O.groupSize,a=+O.secondaryGroupSize,p=O.groupSeparator||"",m=h[0],I=h[1],Y=P.s<0,se=Y?m.slice(1):m,ue=se.length;if(a&&(V=s,s=a,a=V,ue-=V),s>0&&ue>0){for(V=ue%s||s,m=se.substr(0,V);V<ue;V+=s)m+=p+se.substr(V,s);a>0&&(m+=p+se.slice(V)),Y&&(m="-"+m)}G=I?m+(O.decimalSeparator||"")+((a=+O.fractionGroupSize)?I.replace(new RegExp("\\d{"+a+"}\\B","g"),"$&"+(O.fractionGroupSeparator||"")):I):m}return(O.prefix||"")+G+(O.suffix||"")},U.toFraction=function(E){var v,O,G,P,V,h,s,a,p,m,I,Y,se=this,ue=se.c;if(E!=null&&(s=new B(E),!s.isInteger()&&(s.c||s.s!==1)||s.lt(H)))throw Error(f+"Argument "+(s.isInteger()?"out of range: ":"not an integer: ")+de(s));if(!ue)return new B(se);for(v=new B(H),p=O=new B(H),G=a=new B(H),Y=q(ue),V=v.e=Y.length-se.e-1,v.c[0]=T[(h=V%g)<0?g+h:h],E=!E||s.comparedTo(v)>0?V>0?v:p:s,h=ee,ee=1/0,s=new B(Y),a.c[0]=0;m=W(s,v,0,1),P=O.plus(m.times(G)),P.comparedTo(E)!=1;)O=G,G=P,p=a.plus(m.times(P=p)),a=P,v=s.minus(m.times(P=v)),s=P;return P=W(E.minus(O),G,0,1),a=a.plus(P.times(p)),O=O.plus(P.times(G)),a.s=p.s=se.s,V=V*2,I=W(p,G,V,b).minus(se).abs().comparedTo(W(a,O,V,b).minus(se).abs())<1?[p,G]:[a,O],ee=h,I},U.toNumber=function(){return+de(this)},U.toPrecision=function(E,v){return E!=null&&K(E,1,_),Fe(this,E,v,2)},U.toString=function(E){var v,O=this,G=O.s,P=O.e;return P===null?G?(v="Infinity",G<0&&(v="-"+v)):v="NaN":(E==null?v=P<=N||P>=M?D(q(O.c),P):R(q(O.c),P,"0"):E===10&&Se?(O=ce(new B(O),J+P+1,b),v=R(q(O.c),O.e,"0")):(K(E,2,ie.length,"Base"),v=te(R(q(O.c),P,"0"),10,E,G,!0)),G<0&&O.c[0]&&(v="-"+v)),v},U.valueOf=U.toJSON=function(){return de(this)},U._isBigNumber=!0,C!=null&&B.set(C),B}function $(C){var W=C|0;return C>0||C===W?W:W-1}function q(C){for(var W,te,re=1,U=C.length,H=C[0]+"";re<U;){for(W=C[re++]+"",te=g-W.length;te--;W="0"+W);H+=W}for(U=H.length;H.charCodeAt(--U)===48;);return H.slice(0,U+1||1)}function X(C,W){var te,re,U=C.c,H=W.c,J=C.s,b=W.s,N=C.e,M=W.e;if(!J||!b)return null;if(te=U&&!U[0],re=H&&!H[0],te||re)return te?re?0:-b:J;if(J!=b)return J;if(te=J<0,re=N==M,!U||!H)return re?0:!U^te?1:-1;if(!re)return N>M^te?1:-1;for(b=(N=U.length)<(M=H.length)?N:M,J=0;J<b;J++)if(U[J]!=H[J])return U[J]>H[J]^te?1:-1;return N==M?0:N>M^te?1:-1}function K(C,W,te,re){if(C<W||C>te||C!==u(C))throw Error(f+(re||"Argument")+(typeof C=="number"?C<W||C>te?" out of range: ":" not an integer: ":" not a primitive number: ")+String(C))}function j(C){var W=C.c.length-1;return $(C.e/g)==W&&C.c[W]%2!=0}function D(C,W){return(C.length>1?C.charAt(0)+"."+C.slice(1):C)+(W<0?"e":"e+")+W}function R(C,W,te){var re,U;if(W<0){for(U=te+".";++W;U+=te);C=U+C}else if(re=C.length,++W>re){for(U=te,W-=re;--W;U+=te);C+=U}else W<re&&(C=C.slice(0,W)+"."+C.slice(W));return C}r=y(),r.default=r.BigNumber=r,t.exports?t.exports=r:(e||(e=typeof self<"u"&&self?self:window),e.BigNumber=r)})(qr)})(ga);var hi=ga.exports,Vu=function(e,r,n){var i=new e.Uint8Array(n),u=r.pushInt,f=r.pushInt32,o=r.pushInt32Neg,w=r.pushInt64,g=r.pushInt64Neg,S=r.pushFloat,T=r.pushFloatSingle,x=r.pushFloatDouble,_=r.pushTrue,y=r.pushFalse,$=r.pushUndefined,q=r.pushNull,X=r.pushInfinity,K=r.pushInfinityNeg,j=r.pushNaN,D=r.pushNaNNeg,R=r.pushArrayStart,C=r.pushArrayStartFixed,W=r.pushArrayStartFixed32,te=r.pushArrayStartFixed64,re=r.pushObjectStart,U=r.pushObjectStartFixed,H=r.pushObjectStartFixed32,J=r.pushObjectStartFixed64,b=r.pushByteString,N=r.pushByteStringStart,M=r.pushUtf8String,L=r.pushUtf8StringStart,ee=r.pushSimpleUnassigned,Q=r.pushTagStart,ne=r.pushTagStart4,he=r.pushTagStart8,oe=r.pushTagUnassigned,ie=r.pushBreak,Se=e.Math.pow,B=0,Fe=0,ve=0;function Me(F){for(F=F|0,B=0,Fe=F;(B|0)<(Fe|0)&&(ve=Vc[i[B]&255](i[B]|0)|0,!((ve|0)>0)););return ve|0}function ce(F){return F=F|0,((B|0)+(F|0)|0)<(Fe|0)?0:1}function de(F){return F=F|0,i[F|0]<<8|i[F+1|0]|0}function E(F){return F=F|0,i[F|0]<<24|i[F+1|0]<<16|i[F+2|0]<<8|i[F+3|0]|0}function v(F){return F=F|0,u(F|0),B=B+1|0,0}function O(F){return F=F|0,ce(1)|0?1:(u(i[B+1|0]|0),B=B+2|0,0)}function G(F){return F=F|0,ce(2)|0?1:(u(de(B+1|0)|0),B=B+3|0,0)}function P(F){return F=F|0,ce(4)|0?1:(f(de(B+1|0)|0,de(B+3|0)|0),B=B+5|0,0)}function V(F){return F=F|0,ce(8)|0?1:(w(de(B+1|0)|0,de(B+3|0)|0,de(B+5|0)|0,de(B+7|0)|0),B=B+9|0,0)}function h(F){return F=F|0,u(-1-(F-32|0)|0),B=B+1|0,0}function s(F){return F=F|0,ce(1)|0?1:(u(-1-(i[B+1|0]|0)|0),B=B+2|0,0)}function a(F){F=F|0;var Be=0;return ce(2)|0?1:(Be=de(B+1|0)|0,u(-1-(Be|0)|0),B=B+3|0,0)}function p(F){return F=F|0,ce(4)|0?1:(o(de(B+1|0)|0,de(B+3|0)|0),B=B+5|0,0)}function m(F){return F=F|0,ce(8)|0?1:(g(de(B+1|0)|0,de(B+3|0)|0,de(B+5|0)|0,de(B+7|0)|0),B=B+9|0,0)}function I(F){F=F|0;var Be=0,Ae=0,xe=0;return xe=F-64|0,ce(xe|0)|0?1:(Be=B+1|0,Ae=(B+1|0)+(xe|0)|0,b(Be|0,Ae|0),B=Ae|0,0)}function Y(F){F=F|0;var Be=0,Ae=0,xe=0;return ce(1)|0||(xe=i[B+1|0]|0,Be=B+2|0,Ae=(B+2|0)+(xe|0)|0,ce(xe+1|0)|0)?1:(b(Be|0,Ae|0),B=Ae|0,0)}function se(F){F=F|0;var Be=0,Ae=0,xe=0;return ce(2)|0||(xe=de(B+1|0)|0,Be=B+3|0,Ae=(B+3|0)+(xe|0)|0,ce(xe+2|0)|0)?1:(b(Be|0,Ae|0),B=Ae|0,0)}function ue(F){F=F|0;var Be=0,Ae=0,xe=0;return ce(4)|0||(xe=E(B+1|0)|0,Be=B+5|0,Ae=(B+5|0)+(xe|0)|0,ce(xe+4|0)|0)?1:(b(Be|0,Ae|0),B=Ae|0,0)}function fe(F){return F=F|0,1}function me(F){return F=F|0,N(),B=B+1|0,0}function d(F){F=F|0;var Be=0,Ae=0,xe=0;return xe=F-96|0,ce(xe|0)|0?1:(Be=B+1|0,Ae=(B+1|0)+(xe|0)|0,M(Be|0,Ae|0),B=Ae|0,0)}function c(F){F=F|0;var Be=0,Ae=0,xe=0;return ce(1)|0||(xe=i[B+1|0]|0,Be=B+2|0,Ae=(B+2|0)+(xe|0)|0,ce(xe+1|0)|0)?1:(M(Be|0,Ae|0),B=Ae|0,0)}function l(F){F=F|0;var Be=0,Ae=0,xe=0;return ce(2)|0||(xe=de(B+1|0)|0,Be=B+3|0,Ae=(B+3|0)+(xe|0)|0,ce(xe+2|0)|0)?1:(M(Be|0,Ae|0),B=Ae|0,0)}function A(F){F=F|0;var Be=0,Ae=0,xe=0;return ce(4)|0||(xe=E(B+1|0)|0,Be=B+5|0,Ae=(B+5|0)+(xe|0)|0,ce(xe+4|0)|0)?1:(M(Be|0,Ae|0),B=Ae|0,0)}function k(F){return F=F|0,1}function z(F){return F=F|0,L(),B=B+1|0,0}function Z(F){return F=F|0,C(F-128|0),B=B+1|0,0}function we(F){return F=F|0,ce(1)|0?1:(C(i[B+1|0]|0),B=B+2|0,0)}function be(F){return F=F|0,ce(2)|0?1:(C(de(B+1|0)|0),B=B+3|0,0)}function ge(F){return F=F|0,ce(4)|0?1:(W(de(B+1|0)|0,de(B+3|0)|0),B=B+5|0,0)}function ye(F){return F=F|0,ce(8)|0?1:(te(de(B+1|0)|0,de(B+3|0)|0,de(B+5|0)|0,de(B+7|0)|0),B=B+9|0,0)}function Te(F){return F=F|0,R(),B=B+1|0,0}function Oe(F){F=F|0;var Be=0;return Be=F-160|0,ce(Be|0)|0?1:(U(Be|0),B=B+1|0,0)}function Bi(F){return F=F|0,ce(1)|0?1:(U(i[B+1|0]|0),B=B+2|0,0)}function Ai(F){return F=F|0,ce(2)|0?1:(U(de(B+1|0)|0),B=B+3|0,0)}function vi(F){return F=F|0,ce(4)|0?1:(H(de(B+1|0)|0,de(B+3|0)|0),B=B+5|0,0)}function Ti(F){return F=F|0,ce(8)|0?1:(J(de(B+1|0)|0,de(B+3|0)|0,de(B+5|0)|0,de(B+7|0)|0),B=B+9|0,0)}function Si(F){return F=F|0,re(),B=B+1|0,0}function Zt(F){return F=F|0,Q(F-192|0|0),B=B+1|0,0}function kl(F){return F=F|0,Q(F|0),B=B+1|0,0}function Pl(F){return F=F|0,Q(F|0),B=B+1|0,0}function $l(F){return F=F|0,Q(F|0),B=B+1|0,0}function Cl(F){return F=F|0,Q(F|0),B=B+1|0,0}function Ze(F){return F=F|0,Q(F-192|0|0),B=B+1|0,0}function ql(F){return F=F|0,Q(F|0),B=B+1|0,0}function Gl(F){return F=F|0,Q(F|0),B=B+1|0,0}function Vl(F){return F=F|0,Q(F|0),B=B+1|0,0}function Nc(F){return F=F|0,ce(1)|0?1:(Q(i[B+1|0]|0),B=B+2|0,0)}function Ic(F){return F=F|0,ce(2)|0?1:(Q(de(B+1|0)|0),B=B+3|0,0)}function Rc(F){return F=F|0,ce(4)|0?1:(ne(de(B+1|0)|0,de(B+3|0)|0),B=B+5|0,0)}function Uc(F){return F=F|0,ce(8)|0?1:(he(de(B+1|0)|0,de(B+3|0)|0,de(B+5|0)|0,de(B+7|0)|0),B=B+9|0,0)}function Ge(F){return F=F|0,ee((F|0)-224|0),B=B+1|0,0}function Oc(F){return F=F|0,y(),B=B+1|0,0}function Fc(F){return F=F|0,_(),B=B+1|0,0}function Mc(F){return F=F|0,q(),B=B+1|0,0}function kc(F){return F=F|0,$(),B=B+1|0,0}function Pc(F){return F=F|0,ce(1)|0?1:(ee(i[B+1|0]|0),B=B+2|0,0)}function $c(F){F=F|0;var Be=0,Ae=0,xe=1,bn=0,zr=0,Hl=0;return ce(2)|0?1:(Be=i[B+1|0]|0,Ae=i[B+2|0]|0,(Be|0)&128&&(xe=-1),bn=+(((Be|0)&124)>>2),zr=+(((Be|0)&3)<<8|Ae),+bn==0?S(+(+xe*5960464477539063e-23*+zr)):+bn==31?+xe==1?+zr>0?j():X():+zr>0?D():K():S(+(+xe*Se(2,+(+bn-25))*+(1024+zr))),B=B+3|0,0)}function Cc(F){return F=F|0,ce(4)|0?1:(T(i[B+1|0]|0,i[B+2|0]|0,i[B+3|0]|0,i[B+4|0]|0),B=B+5|0,0)}function qc(F){return F=F|0,ce(8)|0?1:(x(i[B+1|0]|0,i[B+2|0]|0,i[B+3|0]|0,i[B+4|0]|0,i[B+5|0]|0,i[B+6|0]|0,i[B+7|0]|0,i[B+8|0]|0),B=B+9|0,0)}function Re(F){return F=F|0,1}function Gc(F){return F=F|0,ie(),B=B+1|0,0}var Vc=[v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,O,G,P,V,Re,Re,Re,Re,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,s,a,p,m,Re,Re,Re,Re,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,Y,se,ue,fe,Re,Re,Re,me,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,c,l,A,k,Re,Re,Re,z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,we,be,ge,ye,Re,Re,Re,Te,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Bi,Ai,vi,Ti,Re,Re,Re,Si,Zt,Zt,Zt,Zt,Zt,Zt,Ze,Ze,Ze,Ze,Ze,Ze,Ze,Ze,Ze,Ze,Ze,Ze,Ze,Ze,Ze,Ze,Ze,Ze,Nc,Ic,Rc,Uc,Re,Re,Re,Re,Ge,Ge,Ge,Ge,Ge,Ge,Ge,Ge,Ge,Ge,Ge,Ge,Ge,Ge,Ge,Ge,Ge,Ge,Ge,Ge,Oc,Fc,Mc,kc,Pc,$c,Cc,qc,Re,Re,Re,Gc];return{parse:Me}},di={},it={};const bs=hi.BigNumber;it.MT={POS_INT:0,NEG_INT:1,BYTE_STRING:2,UTF8_STRING:3,ARRAY:4,MAP:5,TAG:6,SIMPLE_FLOAT:7};it.TAG={DATE_STRING:0,DATE_EPOCH:1,POS_BIGINT:2,NEG_BIGINT:3,DECIMAL_FRAC:4,BIGFLOAT:5,BASE64URL_EXPECTED:21,BASE64_EXPECTED:22,BASE16_EXPECTED:23,CBOR:24,URI:32,BASE64URL:33,BASE64:34,REGEXP:35,MIME:36};it.NUMBYTES={ZERO:0,ONE:24,TWO:25,FOUR:26,EIGHT:27,INDEFINITE:31};it.SIMPLE={FALSE:20,TRUE:21,NULL:22,UNDEFINED:23};it.SYMS={NULL:Symbol("null"),UNDEFINED:Symbol("undef"),PARENT:Symbol("parent"),BREAK:Symbol("break"),STREAM:Symbol("stream")};it.SHIFT32=Math.pow(2,32);it.SHIFT16=Math.pow(2,16);it.MAX_SAFE_HIGH=2097151;it.NEG_ONE=new bs(-1);it.TEN=new bs(10);it.TWO=new bs(2);it.PARENT={ARRAY:0,OBJECT:1,MAP:2,TAG:3,BYTE_STRING:4,UTF8_STRING:5};(function(t){const{Buffer:e}=pn,r=hi.BigNumber,n=it,i=n.SHIFT32,u=n.SHIFT16,f=2097151;t.parseHalf=function(g){var S,T,x;return x=g[0]&128?-1:1,S=(g[0]&124)>>2,T=(g[0]&3)<<8|g[1],S?S===31?x*(T?0/0:1/0):x*Math.pow(2,S-25)*(1024+T):x*5960464477539063e-23*T};function o(w){return w<16?"0"+w.toString(16):w.toString(16)}t.arrayBufferToBignumber=function(w){const g=w.byteLength;let S="";for(let T=0;T<g;T++)S+=o(w[T]);return new r(S,16)},t.buildMap=w=>{const g=new Map,S=Object.keys(w),T=S.length;for(let x=0;x<T;x++)g.set(S[x],w[S[x]]);return g},t.buildInt32=(w,g)=>w*u+g,t.buildInt64=(w,g,S,T)=>{const x=t.buildInt32(w,g),_=t.buildInt32(S,T);return x>f?new r(x).times(i).plus(_):x*i+_},t.writeHalf=function(g,S){const T=e.allocUnsafe(4);T.writeFloatBE(S,0);const x=T.readUInt32BE(0);if(x&8191)return!1;var _=x>>16&32768;const y=x>>23&255,$=x&8388607;if(y>=113&&y<=142)_+=(y-112<<10)+($>>13);else if(y>=103&&y<113){if($&(1<<126-y)-1)return!1;_+=$+8388608>>126-y}else return!1;return g.writeUInt16BE(_,0),!0},t.keySorter=function(w,g){var S=w[0].byteLength,T=g[0].byteLength;return S>T?1:T>S?-1:w[0].compare(g[0])},t.isNegativeZero=w=>w===0&&1/w<0,t.nextPowerOf2=w=>{let g=0;if(w&&!(w&w-1))return w;for(;w!==0;)w>>=1,g+=1;return 1<<g}})(di);const _s=it,Hu=_s.MT,An=_s.SIMPLE,Ui=_s.SYMS;let ju=class Qi{constructor(e){if(typeof e!="number")throw new Error("Invalid Simple type: "+typeof e);if(e<0||e>255||(e|0)!==e)throw new Error("value must be a small positive integer: "+e);this.value=e}toString(){return"simple("+this.value+")"}inspect(){return"simple("+this.value+")"}encodeCBOR(e){return e._pushInt(this.value,Hu.SIMPLE_FLOAT)}static isSimple(e){return e instanceof Qi}static decode(e,r){switch(r==null&&(r=!0),e){case An.FALSE:return!1;case An.TRUE:return!0;case An.NULL:return r?null:Ui.NULL;case An.UNDEFINED:return r?void 0:Ui.UNDEFINED;case-1:if(!r)throw new Error("Invalid BREAK");return Ui.BREAK;default:return new Qi(e)}}};var ma=ju;let Yu=class Di{constructor(e,r,n){if(this.tag=e,this.value=r,this.err=n,typeof this.tag!="number")throw new Error("Invalid tag type ("+typeof this.tag+")");if(this.tag<0||(this.tag|0)!==this.tag)throw new Error("Tag must be a positive integer: "+this.tag)}toString(){return`${this.tag}(${JSON.stringify(this.value)})`}encodeCBOR(e){return e._pushTag(this.tag),e.pushAny(this.value)}convert(e){var r,n;if(n=e!=null?e[this.tag]:void 0,typeof n!="function"&&(n=Di["_tag"+this.tag],typeof n!="function"))return this;try{return n.call(Di,this.value)}catch(i){return r=i,this.err=r,this}}};var ba=Yu;const _a=self.location?self.location.protocol+"//"+self.location.host:"",es=self.URL;let Zu=class{constructor(e="",r=_a){this.super=new es(e,r),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(e){this.super.hash=e}set host(e){this.super.host=e}set hostname(e){this.super.hostname=e}set href(e){this.super.href=e}set origin(e){this.super.origin=e}set password(e){this.super.password=e}set pathname(e){this.super.pathname=e}set port(e){this.super.port=e}set protocol(e){this.super.protocol=e}set search(e){this.super.search=e}set searchParams(e){this.super.searchParams=e}set username(e){this.super.username=e}createObjectURL(e){return this.super.createObjectURL(e)}revokeObjectURL(e){this.super.revokeObjectURL(e)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function Ku(t){if(typeof t=="string")return new es(t).toString();if(!(t instanceof es)){const e=t.username&&t.password?`${t.username}:${t.password}@`:"",r=t.auth?t.auth+"@":"",n=t.port?":"+t.port:"",i=t.protocol?t.protocol+"//":"",u=t.host||"",f=t.hostname||"",o=t.search||(t.query?"?"+t.query:""),w=t.hash||"",g=t.pathname||"",S=t.path||g+o;return`${i}${e||r}${u||f+n}${S}${w}`}}var xa={URLWithLegacySupport:Zu,URLSearchParams:self.URLSearchParams,defaultBase:_a,format:Ku};const{URLWithLegacySupport:Ps,format:zu}=xa;var Wu=(t,e={},r={},n)=>{let i=e.protocol?e.protocol.replace(":",""):"http";i=(r[i]||n||i)+":";let u;try{u=new Ps(t)}catch{u={}}const f=Object.assign({},e,{protocol:i||u.protocol,host:e.host||u.host});return new Ps(t,zu(f)).toString()};const{URLWithLegacySupport:Lu,format:Xu,URLSearchParams:Ju,defaultBase:Qu}=xa,Du=Wu;var Ea={URL:Lu,URLSearchParams:Ju,format:Xu,relative:Du,defaultBase:Qu};const{Buffer:Tr}=pn,$s=ln,ef=hi.BigNumber,tf=Vu,st=di,Ie=it,rf=ma,nf=ba,{URL:sf}=Ea;let ts=class rs{constructor(e){e=e||{},!e.size||e.size<65536?e.size=65536:e.size=st.nextPowerOf2(e.size),this._heap=new ArrayBuffer(e.size),this._heap8=new Uint8Array(this._heap),this._buffer=Tr.from(this._heap),this._reset(),this._knownTags=Object.assign({0:r=>new Date(r),1:r=>new Date(r*1e3),2:r=>st.arrayBufferToBignumber(r),3:r=>Ie.NEG_ONE.minus(st.arrayBufferToBignumber(r)),4:r=>Ie.TEN.pow(r[0]).times(r[1]),5:r=>Ie.TWO.pow(r[0]).times(r[1]),32:r=>new sf(r),35:r=>new RegExp(r)},e.tags),this.parser=tf(qr,{log:console.log.bind(console),pushInt:this.pushInt.bind(this),pushInt32:this.pushInt32.bind(this),pushInt32Neg:this.pushInt32Neg.bind(this),pushInt64:this.pushInt64.bind(this),pushInt64Neg:this.pushInt64Neg.bind(this),pushFloat:this.pushFloat.bind(this),pushFloatSingle:this.pushFloatSingle.bind(this),pushFloatDouble:this.pushFloatDouble.bind(this),pushTrue:this.pushTrue.bind(this),pushFalse:this.pushFalse.bind(this),pushUndefined:this.pushUndefined.bind(this),pushNull:this.pushNull.bind(this),pushInfinity:this.pushInfinity.bind(this),pushInfinityNeg:this.pushInfinityNeg.bind(this),pushNaN:this.pushNaN.bind(this),pushNaNNeg:this.pushNaNNeg.bind(this),pushArrayStart:this.pushArrayStart.bind(this),pushArrayStartFixed:this.pushArrayStartFixed.bind(this),pushArrayStartFixed32:this.pushArrayStartFixed32.bind(this),pushArrayStartFixed64:this.pushArrayStartFixed64.bind(this),pushObjectStart:this.pushObjectStart.bind(this),pushObjectStartFixed:this.pushObjectStartFixed.bind(this),pushObjectStartFixed32:this.pushObjectStartFixed32.bind(this),pushObjectStartFixed64:this.pushObjectStartFixed64.bind(this),pushByteString:this.pushByteString.bind(this),pushByteStringStart:this.pushByteStringStart.bind(this),pushUtf8String:this.pushUtf8String.bind(this),pushUtf8StringStart:this.pushUtf8StringStart.bind(this),pushSimpleUnassigned:this.pushSimpleUnassigned.bind(this),pushTagUnassigned:this.pushTagUnassigned.bind(this),pushTagStart:this.pushTagStart.bind(this),pushTagStart4:this.pushTagStart4.bind(this),pushTagStart8:this.pushTagStart8.bind(this),pushBreak:this.pushBreak.bind(this)},this._heap)}get _depth(){return this._parents.length}get _currentParent(){return this._parents[this._depth-1]}get _ref(){return this._currentParent.ref}_closeParent(){var e=this._parents.pop();if(e.length>0)throw new Error(`Missing ${e.length} elements`);switch(e.type){case Ie.PARENT.TAG:this._push(this.createTag(e.ref[0],e.ref[1]));break;case Ie.PARENT.BYTE_STRING:this._push(this.createByteString(e.ref,e.length));break;case Ie.PARENT.UTF8_STRING:this._push(this.createUtf8String(e.ref,e.length));break;case Ie.PARENT.MAP:if(e.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createMap(e.ref,e.length));break;case Ie.PARENT.OBJECT:if(e.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createObject(e.ref,e.length));break;case Ie.PARENT.ARRAY:this._push(this.createArray(e.ref,e.length));break}this._currentParent&&this._currentParent.type===Ie.PARENT.TAG&&this._dec()}_dec(){const e=this._currentParent;e.length<0||(e.length--,e.length===0&&this._closeParent())}_push(e,r){const n=this._currentParent;switch(n.values++,n.type){case Ie.PARENT.ARRAY:case Ie.PARENT.BYTE_STRING:case Ie.PARENT.UTF8_STRING:n.length>-1?this._ref[this._ref.length-n.length]=e:this._ref.push(e),this._dec();break;case Ie.PARENT.OBJECT:n.tmpKey!=null?(this._ref[n.tmpKey]=e,n.tmpKey=null,this._dec()):(n.tmpKey=e,typeof n.tmpKey!="string"&&(n.type=Ie.PARENT.MAP,n.ref=st.buildMap(n.ref)));break;case Ie.PARENT.MAP:n.tmpKey!=null?(this._ref.set(n.tmpKey,e),n.tmpKey=null,this._dec()):n.tmpKey=e;break;case Ie.PARENT.TAG:this._ref.push(e),r||this._dec();break;default:throw new Error("Unknown parent type")}}_createParent(e,r,n){this._parents[this._depth]={type:r,length:n,ref:e,values:0,tmpKey:null}}_reset(){this._res=[],this._parents=[{type:Ie.PARENT.ARRAY,length:-1,ref:this._res,values:0,tmpKey:null}]}createTag(e,r){const n=this._knownTags[e];return n?n(r):new nf(e,r)}createMap(e,r){return e}createObject(e,r){return e}createArray(e,r){return e}createByteString(e,r){return Tr.concat(e)}createByteStringFromHeap(e,r){return e===r?Tr.alloc(0):Tr.from(this._heap.slice(e,r))}createInt(e){return e}createInt32(e,r){return st.buildInt32(e,r)}createInt64(e,r,n,i){return st.buildInt64(e,r,n,i)}createFloat(e){return e}createFloatSingle(e,r,n,i){return $s.read([e,r,n,i],0,!1,23,4)}createFloatDouble(e,r,n,i,u,f,o,w){return $s.read([e,r,n,i,u,f,o,w],0,!1,52,8)}createInt32Neg(e,r){return-1-st.buildInt32(e,r)}createInt64Neg(e,r,n,i){const u=st.buildInt32(e,r),f=st.buildInt32(n,i);return u>Ie.MAX_SAFE_HIGH?Ie.NEG_ONE.minus(new ef(u).times(Ie.SHIFT32).plus(f)):-1-(u*Ie.SHIFT32+f)}createTrue(){return!0}createFalse(){return!1}createNull(){return null}createUndefined(){}createInfinity(){return 1/0}createInfinityNeg(){return-1/0}createNaN(){return NaN}createNaNNeg(){return NaN}createUtf8String(e,r){return e.join("")}createUtf8StringFromHeap(e,r){return e===r?"":this._buffer.toString("utf8",e,r)}createSimpleUnassigned(e){return new rf(e)}pushInt(e){this._push(this.createInt(e))}pushInt32(e,r){this._push(this.createInt32(e,r))}pushInt64(e,r,n,i){this._push(this.createInt64(e,r,n,i))}pushFloat(e){this._push(this.createFloat(e))}pushFloatSingle(e,r,n,i){this._push(this.createFloatSingle(e,r,n,i))}pushFloatDouble(e,r,n,i,u,f,o,w){this._push(this.createFloatDouble(e,r,n,i,u,f,o,w))}pushInt32Neg(e,r){this._push(this.createInt32Neg(e,r))}pushInt64Neg(e,r,n,i){this._push(this.createInt64Neg(e,r,n,i))}pushTrue(){this._push(this.createTrue())}pushFalse(){this._push(this.createFalse())}pushNull(){this._push(this.createNull())}pushUndefined(){this._push(this.createUndefined())}pushInfinity(){this._push(this.createInfinity())}pushInfinityNeg(){this._push(this.createInfinityNeg())}pushNaN(){this._push(this.createNaN())}pushNaNNeg(){this._push(this.createNaNNeg())}pushArrayStart(){this._createParent([],Ie.PARENT.ARRAY,-1)}pushArrayStartFixed(e){this._createArrayStartFixed(e)}pushArrayStartFixed32(e,r){const n=st.buildInt32(e,r);this._createArrayStartFixed(n)}pushArrayStartFixed64(e,r,n,i){const u=st.buildInt64(e,r,n,i);this._createArrayStartFixed(u)}pushObjectStart(){this._createObjectStartFixed(-1)}pushObjectStartFixed(e){this._createObjectStartFixed(e)}pushObjectStartFixed32(e,r){const n=st.buildInt32(e,r);this._createObjectStartFixed(n)}pushObjectStartFixed64(e,r,n,i){const u=st.buildInt64(e,r,n,i);this._createObjectStartFixed(u)}pushByteStringStart(){this._parents[this._depth]={type:Ie.PARENT.BYTE_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushByteString(e,r){this._push(this.createByteStringFromHeap(e,r))}pushUtf8StringStart(){this._parents[this._depth]={type:Ie.PARENT.UTF8_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushUtf8String(e,r){this._push(this.createUtf8StringFromHeap(e,r))}pushSimpleUnassigned(e){this._push(this.createSimpleUnassigned(e))}pushTagStart(e){this._parents[this._depth]={type:Ie.PARENT.TAG,length:1,ref:[e]}}pushTagStart4(e,r){this.pushTagStart(st.buildInt32(e,r))}pushTagStart8(e,r,n,i){this.pushTagStart(st.buildInt64(e,r,n,i))}pushTagUnassigned(e){this._push(this.createTag(e))}pushBreak(){if(this._currentParent.length>-1)throw new Error("Unexpected break");this._closeParent()}_createObjectStartFixed(e){if(e===0){this._push(this.createObject({}));return}this._createParent({},Ie.PARENT.OBJECT,e)}_createArrayStartFixed(e){if(e===0){this._push(this.createArray([]));return}this._createParent(new Array(e),Ie.PARENT.ARRAY,e)}_decode(e){if(e.byteLength===0)throw new Error("Input too short");this._reset(),this._heap8.set(e);const r=this.parser.parse(e.byteLength);if(this._depth>1){for(;this._currentParent.length===0;)this._closeParent();if(this._depth>1)throw new Error("Undeterminated nesting")}if(r>0)throw new Error("Failed to parse");if(this._res.length===0)throw new Error("No valid result")}decodeFirst(e){return this._decode(e),this._res[0]}decodeAll(e){return this._decode(e),this._res}static decode(e,r){return typeof e=="string"&&(e=Tr.from(e,r||"hex")),new rs({size:e.length}).decodeFirst(e)}static decodeAll(e,r){return typeof e=="string"&&(e=Tr.from(e,r||"hex")),new rs({size:e.length}).decodeAll(e)}};ts.decodeFirst=ts.decode;var Ba=ts;const{Buffer:Oi}=pn,of=Ba,af=di;class xs extends of{createTag(e,r){return`${e}(${r})`}createInt(e){return super.createInt(e).toString()}createInt32(e,r){return super.createInt32(e,r).toString()}createInt64(e,r,n,i){return super.createInt64(e,r,n,i).toString()}createInt32Neg(e,r){return super.createInt32Neg(e,r).toString()}createInt64Neg(e,r,n,i){return super.createInt64Neg(e,r,n,i).toString()}createTrue(){return"true"}createFalse(){return"false"}createFloat(e){const r=super.createFloat(e);return af.isNegativeZero(e)?"-0_1":`${r}_1`}createFloatSingle(e,r,n,i){return`${super.createFloatSingle(e,r,n,i)}_2`}createFloatDouble(e,r,n,i,u,f,o,w){return`${super.createFloatDouble(e,r,n,i,u,f,o,w)}_3`}createByteString(e,r){const n=e.join(", ");return r===-1?`(_ ${n})`:`h'${n}`}createByteStringFromHeap(e,r){return`h'${Oi.from(super.createByteStringFromHeap(e,r)).toString("hex")}'`}createInfinity(){return"Infinity_1"}createInfinityNeg(){return"-Infinity_1"}createNaN(){return"NaN_1"}createNaNNeg(){return"-NaN_1"}createNull(){return"null"}createUndefined(){return"undefined"}createSimpleUnassigned(e){return`simple(${e})`}createArray(e,r){const n=super.createArray(e,r);return r===-1?`[_ ${n.join(", ")}]`:`[${n.join(", ")}]`}createMap(e,r){const n=super.createMap(e),i=Array.from(n.keys()).reduce(Cs(n),"");return r===-1?`{_ ${i}}`:`{${i}}`}createObject(e,r){const n=super.createObject(e),i=Object.keys(n).reduce(Cs(n),"");return r===-1?`{_ ${i}}`:`{${i}}`}createUtf8String(e,r){const n=e.join(", ");return r===-1?`(_ ${n})`:`"${n}"`}createUtf8StringFromHeap(e,r){return`"${Oi.from(super.createUtf8StringFromHeap(e,r)).toString("utf8")}"`}static diagnose(e,r){return typeof e=="string"&&(e=Oi.from(e,r||"hex")),new xs().decodeFirst(e)}}var cf=xs;function Cs(t){return(e,r)=>e?`${e}, ${r}: ${t[r]}`:`${r}: ${t[r]}`}const{Buffer:St}=pn,{URL:uf}=Ea,ns=hi.BigNumber,Fi=di,Ye=it,yt=Ye.MT,vn=Ye.NUMBYTES,qs=Ye.SHIFT32,Gs=Ye.SYMS,Sr=Ye.TAG,ff=Ye.MT.SIMPLE_FLOAT<<5|Ye.NUMBYTES.TWO,lf=Ye.MT.SIMPLE_FLOAT<<5|Ye.NUMBYTES.FOUR,hf=Ye.MT.SIMPLE_FLOAT<<5|Ye.NUMBYTES.EIGHT,df=Ye.MT.SIMPLE_FLOAT<<5|Ye.SIMPLE.TRUE,pf=Ye.MT.SIMPLE_FLOAT<<5|Ye.SIMPLE.FALSE,yf=Ye.MT.SIMPLE_FLOAT<<5|Ye.SIMPLE.UNDEFINED,Vs=Ye.MT.SIMPLE_FLOAT<<5|Ye.SIMPLE.NULL,wf=new ns("0x20000000000000"),gf=St.from("f97e00","hex"),mf=St.from("f9fc00","hex"),bf=St.from("f97c00","hex");function _f(t){return{}.toString.call(t).slice(8,-1)}class ei{constructor(e){e=e||{},this.streaming=typeof e.stream=="function",this.onData=e.stream,this.semanticTypes=[[uf,this._pushUrl],[ns,this._pushBigNumber]];const r=e.genTypes||[],n=r.length;for(let i=0;i<n;i++)this.addSemanticType(r[i][0],r[i][1]);this._reset()}addSemanticType(e,r){const n=this.semanticTypes.length;for(let i=0;i<n;i++)if(this.semanticTypes[i][0]===e){const f=this.semanticTypes[i][1];return this.semanticTypes[i][1]=r,f}return this.semanticTypes.push([e,r]),null}push(e){return e&&(this.result[this.offset]=e,this.resultMethod[this.offset]=0,this.resultLength[this.offset]=e.length,this.offset++,this.streaming&&this.onData(this.finalize())),!0}pushWrite(e,r,n){return this.result[this.offset]=e,this.resultMethod[this.offset]=r,this.resultLength[this.offset]=n,this.offset++,this.streaming&&this.onData(this.finalize()),!0}_pushUInt8(e){return this.pushWrite(e,1,1)}_pushUInt16BE(e){return this.pushWrite(e,2,2)}_pushUInt32BE(e){return this.pushWrite(e,3,4)}_pushDoubleBE(e){return this.pushWrite(e,4,8)}_pushNaN(){return this.push(gf)}_pushInfinity(e){const r=e<0?mf:bf;return this.push(r)}_pushFloat(e){const r=St.allocUnsafe(2);if(Fi.writeHalf(r,e)&&Fi.parseHalf(r)===e)return this._pushUInt8(ff)&&this.push(r);const n=St.allocUnsafe(4);return n.writeFloatBE(e,0),n.readFloatBE(0)===e?this._pushUInt8(lf)&&this.push(n):this._pushUInt8(hf)&&this._pushDoubleBE(e)}_pushInt(e,r,n){const i=r<<5;return e<24?this._pushUInt8(i|e):e<=255?this._pushUInt8(i|vn.ONE)&&this._pushUInt8(e):e<=65535?this._pushUInt8(i|vn.TWO)&&this._pushUInt16BE(e):e<=4294967295?this._pushUInt8(i|vn.FOUR)&&this._pushUInt32BE(e):e<=Number.MAX_SAFE_INTEGER?this._pushUInt8(i|vn.EIGHT)&&this._pushUInt32BE(Math.floor(e/qs))&&this._pushUInt32BE(e%qs):r===yt.NEG_INT?this._pushFloat(n):this._pushFloat(e)}_pushIntNum(e){return e<0?this._pushInt(-e-1,yt.NEG_INT,e):this._pushInt(e,yt.POS_INT)}_pushNumber(e){switch(!1){case e===e:return this._pushNaN(e);case isFinite(e):return this._pushInfinity(e);case e%1!==0:return this._pushIntNum(e);default:return this._pushFloat(e)}}_pushString(e){const r=St.byteLength(e,"utf8");return this._pushInt(r,yt.UTF8_STRING)&&this.pushWrite(e,5,r)}_pushBoolean(e){return this._pushUInt8(e?df:pf)}_pushUndefined(e){return this._pushUInt8(yf)}_pushArray(e,r){const n=r.length;if(!e._pushInt(n,yt.ARRAY))return!1;for(let i=0;i<n;i++)if(!e.pushAny(r[i]))return!1;return!0}_pushTag(e){return this._pushInt(e,yt.TAG)}_pushDate(e,r){return e._pushTag(Sr.DATE_EPOCH)&&e.pushAny(Math.round(r/1e3))}_pushBuffer(e,r){return e._pushInt(r.length,yt.BYTE_STRING)&&e.push(r)}_pushNoFilter(e,r){return e._pushBuffer(e,r.slice())}_pushRegexp(e,r){return e._pushTag(Sr.REGEXP)&&e.pushAny(r.source)}_pushSet(e,r){if(!e._pushInt(r.size,yt.ARRAY))return!1;for(const n of r)if(!e.pushAny(n))return!1;return!0}_pushUrl(e,r){return e._pushTag(Sr.URI)&&e.pushAny(r.format())}_pushBigint(e){let r=Sr.POS_BIGINT;e.isNegative()&&(e=e.negated().minus(1),r=Sr.NEG_BIGINT);let n=e.toString(16);n.length%2&&(n="0"+n);const i=St.from(n,"hex");return this._pushTag(r)&&this._pushBuffer(this,i)}_pushBigNumber(e,r){if(r.isNaN())return e._pushNaN();if(!r.isFinite())return e._pushInfinity(r.isNegative()?-1/0:1/0);if(r.isInteger())return e._pushBigint(r);if(!(e._pushTag(Sr.DECIMAL_FRAC)&&e._pushInt(2,yt.ARRAY)))return!1;const n=r.decimalPlaces(),i=r.multipliedBy(new ns(10).pow(n));return e._pushIntNum(-n)?i.abs().isLessThan(wf)?e._pushIntNum(i.toNumber()):e._pushBigint(i):!1}_pushMap(e,r){return e._pushInt(r.size,yt.MAP)?this._pushRawMap(r.size,Array.from(r)):!1}_pushObject(e){if(!e)return this._pushUInt8(Vs);for(var r=this.semanticTypes.length,n=0;n<r;n++)if(e instanceof this.semanticTypes[n][0])return this.semanticTypes[n][1].call(e,this,e);var i=e.encodeCBOR;if(typeof i=="function")return i.call(e,this);var u=Object.keys(e),f=u.length;return this._pushInt(f,yt.MAP)?this._pushRawMap(f,u.map(o=>[o,e[o]])):!1}_pushRawMap(e,r){r=r.map(function(i){return i[0]=ei.encode(i[0]),i}).sort(Fi.keySorter);for(var n=0;n<e;n++)if(!this.push(r[n][0])||!this.pushAny(r[n][1]))return!1;return!0}write(e){return this.pushAny(e)}pushAny(e){var r=_f(e);switch(r){case"Number":return this._pushNumber(e);case"String":return this._pushString(e);case"Boolean":return this._pushBoolean(e);case"Object":return this._pushObject(e);case"Array":return this._pushArray(this,e);case"Uint8Array":return this._pushBuffer(this,St.isBuffer(e)?e:St.from(e));case"Null":return this._pushUInt8(Vs);case"Undefined":return this._pushUndefined(e);case"Map":return this._pushMap(this,e);case"Set":return this._pushSet(this,e);case"URL":return this._pushUrl(this,e);case"BigNumber":return this._pushBigNumber(this,e);case"Date":return this._pushDate(this,e);case"RegExp":return this._pushRegexp(this,e);case"Symbol":switch(e){case Gs.NULL:return this._pushObject(null);case Gs.UNDEFINED:return this._pushUndefined(void 0);default:throw new Error("Unknown symbol: "+e.toString())}default:throw new Error("Unknown type: "+typeof e+", "+(e?e.toString():""))}}finalize(){if(this.offset===0)return null;for(var e=this.result,r=this.resultLength,n=this.resultMethod,i=this.offset,u=0,f=0;f<i;f++)u+=r[f];var o=St.allocUnsafe(u),w=0,g=0;for(f=0;f<i;f++){switch(g=r[f],n[f]){case 0:e[f].copy(o,w);break;case 1:o.writeUInt8(e[f],w,!0);break;case 2:o.writeUInt16BE(e[f],w,!0);break;case 3:o.writeUInt32BE(e[f],w,!0);break;case 4:o.writeDoubleBE(e[f],w,!0);break;case 5:o.write(e[f],w,g,"utf8");break;default:throw new Error("unkown method")}w+=g}var S=o;return this._reset(),S}_reset(){this.result=[],this.resultMethod=[],this.resultLength=[],this.offset=0}static encode(e){const r=new ei;if(!r.pushAny(e))throw new Error("Failed to encode input");return r.finalize()}}var xf=ei;(function(t){t.Diagnose=cf,t.Decoder=Ba,t.Encoder=xf,t.Simple=ma,t.Tagged=ba,t.decodeAll=t.Decoder.decodeAll,t.decodeFirst=t.Decoder.decodeFirst,t.diagnose=t.Diagnose.diagnose,t.encode=t.Encoder.encode,t.decode=t.Decoder.decode,t.leveldb={decode:t.Decoder.decodeAll,encode:t.Encoder.encode,buffer:!0,name:"cbor"}})(wa);const Aa=Hc(wa);function bt(t){return On(Tu.create().update(new Uint8Array(t)).digest())}function Mn(t){if(t instanceof Aa.Tagged)return Mn(t.value);if(typeof t=="string")return va(t);if(typeof t=="number")return bt(Pe(t));if(t instanceof ArrayBuffer||ArrayBuffer.isView(t))return bt(t);if(Array.isArray(t)){const e=t.map(Mn);return bt(Ut(...e))}else{if(t&&typeof t=="object"&&t._isPrincipal)return bt(t.toUint8Array());if(typeof t=="object"&&t!==null&&typeof t.toHash=="function")return Mn(t.toHash());if(typeof t=="object")return ti(t);if(typeof t=="bigint")return bt(Pe(t))}throw Object.assign(new Error(`Attempt to hash a value of unsupported type: ${t}`),{value:t})}const va=t=>{const e=new TextEncoder().encode(t);return bt(e)};function Hs(t){return ti(t)}function ti(t){const n=Object.entries(t).filter(([,f])=>f!==void 0).map(([f,o])=>{const w=va(f),g=Mn(o);return[w,g]}).sort(([f],[o])=>Uo(f,o)),i=Ut(...n.map(f=>Ut(...f)));return bt(i)}globalThis&&globalThis.__rest;new TextEncoder().encode(`
ic-request`);class js{getPrincipal(){return _e.anonymous()}async transformRequest(e){return Object.assign(Object.assign({},e),{body:{content:e.body}})}}var Gt={},Kr={},Ue={};Object.defineProperty(Ue,"__esModule",{value:!0});const Ef=9007199254740992;function jt(t,...e){const r=new Uint8Array(t.byteLength+e.reduce((i,u)=>i+u.byteLength,0));r.set(new Uint8Array(t),0);let n=t.byteLength;for(const i of e)r.set(new Uint8Array(i),n),n+=i.byteLength;return r.buffer}function _t(t,e,r){r=r.replace(/[^0-9a-fA-F]/g,"");const n=2**(e-24);r=r.slice(-n*2).padStart(n*2,"0");const i=[(t<<5)+e].concat(r.match(/../g).map(u=>parseInt(u,16)));return new Uint8Array(i).buffer}function pi(t,e){if(e<24)return new Uint8Array([(t<<5)+e]).buffer;{const r=e<=255?24:e<=65535?25:e<=4294967295?26:27;return _t(t,r,e.toString(16))}}function Ta(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n<128?e.push(n):n<2048?e.push(192|n>>6,128|n&63):n<55296||n>=57344?e.push(224|n>>12,128|n>>6&63,128|n&63):(r++,n=(n&1023)<<10|t.charCodeAt(r)&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63))}return jt(new Uint8Array(pi(3,t.length)),new Uint8Array(e))}function Bf(t,e){if(t==14277111)return jt(new Uint8Array([217,217,247]),e);if(t<24)return jt(new Uint8Array([192+t]),e);{const r=t<=255?24:t<=65535?25:t<=4294967295?26:27,n=2**(r-24),i=t.toString(16).slice(-n*2).padStart(n*2,"0"),u=[192+r].concat(i.match(/../g).map(f=>parseInt(f,16)));return new Uint8Array(u).buffer}}Ue.tagged=Bf;function yn(t){return new Uint8Array(t).buffer}Ue.raw=yn;function Es(t){if(isNaN(t))throw new RangeError("Invalid number.");t=Math.min(Math.max(0,t),23);const e=[0+t];return new Uint8Array(e).buffer}Ue.uSmall=Es;function Sa(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,t),255),t=t.toString(16),_t(0,24,t)}Ue.u8=Sa;function Na(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,t),65535),t=t.toString(16),_t(0,25,t)}Ue.u16=Na;function Ia(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,t),4294967295),t=t.toString(16),_t(0,26,t)}Ue.u32=Ia;function Bs(t,e){if(typeof t=="string"&&e==16){if(t.match(/[^0-9a-fA-F]/))throw new RangeError("Invalid number.");return _t(0,27,t)}if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,t),Ef),t=t.toString(16),_t(0,27,t)}Ue.u64=Bs;function Ra(t){if(isNaN(t))throw new RangeError("Invalid number.");if(t===0)return Es(0);t=Math.min(Math.max(0,-t),24)-1;const e=[32+t];return new Uint8Array(e).buffer}Ue.iSmall=Ra;function Ua(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,-t-1),255),t=t.toString(16),_t(1,24,t)}Ue.i8=Ua;function Oa(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,-t-1),65535),t=t.toString(16),_t(1,25,t)}Ue.i16=Oa;function Fa(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,-t-1),4294967295),t=t.toString(16),_t(1,26,t)}Ue.i32=Fa;function Ma(t,e){if(typeof t=="string"&&e==16){if(t.startsWith("-")?t=t.slice(1):t="0",t.match(/[^0-9a-fA-F]/)||t.length>16)throw new RangeError("Invalid number.");let r=!1,n=t.split("").reduceRight((i,u)=>{if(r)return u+i;let f=parseInt(u,16)-1;return f>=0?(r=!0,f.toString(16)+i):"f"+i},"");return r?_t(1,27,n):Bs(0)}if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,-t-1),9007199254740992),t=t.toString(16),_t(1,27,t)}Ue.i64=Ma;function Af(t){return t>=0?t<24?Es(t):t<=255?Sa(t):t<=65535?Na(t):t<=4294967295?Ia(t):Bs(t):t>=-24?Ra(t):t>=-255?Ua(t):t>=-65535?Oa(t):t>=-4294967295?Fa(t):Ma(t)}Ue.number=Af;function vf(t){return jt(pi(2,t.byteLength),t)}Ue.bytes=vf;function Tf(t){return Ta(t)}Ue.string=Tf;function Sf(t){return jt(pi(4,t.length),...t)}Ue.array=Sf;function Nf(t,e=!1){t instanceof Map||(t=new Map(Object.entries(t)));let r=Array.from(t.entries());return e&&(r=r.sort(([n],[i])=>n.localeCompare(i))),jt(pi(5,t.size),...r.map(([n,i])=>jt(Ta(n),i)))}Ue.map=Nf;function If(t){const e=new Float32Array([t]);return jt(new Uint8Array([224+26]),new Uint8Array(e.buffer))}Ue.singleFloat=If;function Rf(t){const e=new Float64Array([t]);return jt(new Uint8Array([224+27]),new Uint8Array(e.buffer))}Ue.doubleFloat=Rf;function Uf(t){return t?ka():Pa()}Ue.bool=Uf;function ka(){return yn(new Uint8Array([224+21]))}Ue.true_=ka;function Pa(){return yn(new Uint8Array([224+20]))}Ue.false_=Pa;function Of(){return yn(new Uint8Array([224+22]))}Ue.null_=Of;function Ff(){return yn(new Uint8Array([224+23]))}Ue.undefined_=Ff;var Mf=qr&&qr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(Kr,"__esModule",{value:!0});const wt=Mf(Ue),kf=[ArrayBuffer,Uint8Array,Uint16Array,Uint32Array,Int8Array,Int16Array,Int32Array,Float32Array,Float64Array];class $a{constructor(e,r=!1){this._serializer=e,this._stable=r,this.name="jsonDefault",this.priority=-100}match(e){return["undefined","boolean","number","string","object"].indexOf(typeof e)!=-1}encode(e){switch(typeof e){case"undefined":return wt.undefined_();case"boolean":return wt.bool(e);case"number":return Math.floor(e)===e?wt.number(e):wt.doubleFloat(e);case"string":return wt.string(e);case"object":if(e===null)return wt.null_();if(Array.isArray(e))return wt.array(e.map(r=>this._serializer.serializeValue(r)));if(kf.find(r=>e instanceof r))return wt.bytes(e.buffer);if(Object.getOwnPropertyNames(e).indexOf("toJSON")!==-1)return this.encode(e.toJSON());if(e instanceof Map){const r=new Map;for(const[n,i]of e.entries())r.set(n,this._serializer.serializeValue(i));return wt.map(r,this._stable)}else{const r=new Map;for(const[n,i]of Object.entries(e))r.set(n,this._serializer.serializeValue(i));return wt.map(r,this._stable)}default:throw new Error("Invalid value.")}}}Kr.JsonDefaultCborEncoder=$a;class Ca{constructor(){this.name="cborEncoder",this.priority=-90}match(e){return typeof e=="object"&&typeof e.toCBOR=="function"}encode(e){return e.toCBOR()}}Kr.ToCborEncoder=Ca;class qa{constructor(){this._encoders=new Set}static withDefaultEncoders(e=!1){const r=new this;return r.addEncoder(new $a(r,e)),r.addEncoder(new Ca),r}removeEncoder(e){for(const r of this._encoders.values())r.name==e&&this._encoders.delete(r)}addEncoder(e){this._encoders.add(e)}getEncoderFor(e){let r=null;for(const n of this._encoders)(!r||n.priority>r.priority)&&n.match(e)&&(r=n);if(r===null)throw new Error("Could not find an encoder for value.");return r}serializeValue(e){return this.getEncoderFor(e).encode(e)}serialize(e){return this.serializeValue(e)}}Kr.CborSerializer=qa;class Pf extends qa{serialize(e){return wt.raw(new Uint8Array([...new Uint8Array([217,217,247]),...new Uint8Array(super.serializeValue(e))]))}}Kr.SelfDescribeCborSerializer=Pf;(function(t){function e(i){for(var u in i)t.hasOwnProperty(u)||(t[u]=i[u])}var r=qr&&qr.__importStar||function(i){if(i&&i.__esModule)return i;var u={};if(i!=null)for(var f in i)Object.hasOwnProperty.call(i,f)&&(u[f]=i[f]);return u.default=i,u};Object.defineProperty(t,"__esModule",{value:!0}),e(Kr);const n=r(Ue);t.value=n})(Gt);class $f{get name(){return"Principal"}get priority(){return 0}match(e){return e&&e._isPrincipal===!0}encode(e){return Gt.value.bytes(e.toUint8Array())}}class Cf{get name(){return"Buffer"}get priority(){return 1}match(e){return e instanceof ArrayBuffer||ArrayBuffer.isView(e)}encode(e){return Gt.value.bytes(new Uint8Array(e))}}class qf{get name(){return"BigInt"}get priority(){return 1}match(e){return typeof e=="bigint"}encode(e){return e>BigInt(0)?Gt.value.tagged(2,Gt.value.bytes(Jn(e.toString(16)))):Gt.value.tagged(3,Gt.value.bytes(Jn((BigInt("-1")*e).toString(16))))}}const yi=Gt.SelfDescribeCborSerializer.withDefaultEncoders(!0);yi.addEncoder(new $f);yi.addEncoder(new Cf);yi.addEncoder(new qf);var is;(function(t){t[t.Uint64LittleEndian=71]="Uint64LittleEndian",t[t.Semantic=55799]="Semantic"})(is||(is={}));function Mi(t){return yi.serialize(t)}function Ys(t){const e=t.byteLength;let r=BigInt(0);for(let n=0;n<e;n++)r=r*BigInt(256)+BigInt(t[n]);return r}class Gf extends Aa.Decoder{createByteString(e){return Ut(...e)}createByteStringFromHeap(e,r){return e===r?new ArrayBuffer(0):new Uint8Array(this._heap.slice(e,r))}}function Vt(t){const e=new Uint8Array(t),r=new Gf({size:e.byteLength,tags:{2:n=>Ys(n),3:n=>-Ys(n),[is.Semantic]:n=>n}});try{return r.decodeFirst(e)}catch(n){throw new Error(`Failed to decode CBOR: ${n}, input: ${ze(e)}`)}}const Tn=()=>{if(typeof window<"u"&&window.crypto&&window.crypto.getRandomValues){const t=new Uint32Array(1);return window.crypto.getRandomValues(t),t[0]}if(typeof crypto<"u"&&crypto.getRandomValues){const t=new Uint32Array(1);return crypto.getRandomValues(t),t[0]}return typeof crypto<"u"&&crypto.randomInt?crypto.randomInt(0,4294967295):Math.floor(Math.random()*4294967295)};var ss;(function(t){t.Call="call"})(ss||(ss={}));function os(){const t=new ArrayBuffer(16),e=new DataView(t),r=Tn(),n=Tn(),i=Tn(),u=Tn();return e.setUint32(0,r),e.setUint32(4,n),e.setUint32(8,i),e.setUint32(12,u),t}const Zs=BigInt(1e6),Vf=60*1e3;class Sn{constructor(e){if(e<90*1e3){const o=BigInt(Date.now()+e)*Zs/BigInt(1e9);this._value=o*BigInt(1e9);return}const u=BigInt(Math.floor(Date.now()+e-Vf))*Zs/BigInt(1e9)/BigInt(60)*BigInt(60)*BigInt(1e9);this._value=u}toCBOR(){return Gt.value.u64(this._value.toString(16),16)}toHash(){return Pe(this._value)}}function Ks(t=os){return async e=>{const r=e.request.headers;e.request.headers=r,e.endpoint==="call"&&(e.body.nonce=t())}}function Xr(t){const e=[];return t.forEach((r,n)=>{e.push([n,r])}),e}class ki extends ke{constructor(e,r){super(e),this.response=r,this.name=this.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}}class Hf extends ke{constructor(e,r,n,i,u,f){super(e),this.response=r,this.requestId=n,this.senderPubkey=i,this.senderSig=u,this.ingressExpiry=f,this.name="AgentCallError",Object.setPrototypeOf(this,new.target.prototype)}}class jf extends ke{constructor(e,r,n,i,u,f){super(e),this.response=r,this.requestId=n,this.senderPubkey=i,this.senderSig=u,this.ingressExpiry=f,this.name="AgentQueryError",Object.setPrototypeOf(this,new.target.prototype)}}class Yf extends ke{constructor(e,r,n,i,u,f){super(e),this.response=r,this.requestId=n,this.senderPubkey=i,this.senderSig=u,this.ingressExpiry=f,this.name="AgentReadStateError",Object.setPrototypeOf(this,new.target.prototype)}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const As=BigInt(0),ri=BigInt(1);function sn(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function Ga(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?As:BigInt("0x"+t)}function Ot(t){return Ga(Vr(t))}function on(t){return nt(t),Ga(Vr(Uint8Array.from(t).reverse()))}function Xe(t,e){return vo(t.toString(16).padStart(e*2,"0"))}function wi(t,e){return Xe(t,e).reverse()}function ct(t,e,r){let n;if(typeof e=="string")try{n=vo(e)}catch(u){throw new Error(t+" must be hex string or Uint8Array, cause: "+u)}else if(ds(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(t+" of length "+r+" expected, got "+i);return n}const Pi=t=>typeof t=="bigint"&&As<=t;function Va(t,e,r){return Pi(t)&&Pi(e)&&Pi(r)&&e<=t&&t<r}function Jr(t,e,r,n){if(!Va(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function $r(t){let e;for(e=0;t>As;t>>=ri,e+=1);return e}function Zf(t,e){return t>>BigInt(e)&ri}const pr=t=>(ri<<BigInt(t))-ri;function Kf(t){return typeof t=="function"&&Number.isSafeInteger(t.outputLen)}function wn(t,e,r={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function n(i,u,f){const o=t[i];if(f&&o===void 0)return;const w=typeof o;if(w!==u||o===null)throw new Error(`param "${i}" is invalid: expected ${u}, got ${w}`)}Object.entries(e).forEach(([i,u])=>n(i,u,!1)),Object.entries(r).forEach(([i,u])=>n(i,u,!0))}const zs=()=>{throw new Error("not implemented")};function an(t){const e=new WeakMap;return(r,...n)=>{const i=e.get(r);if(i!==void 0)return i;const u=t(r,...n);return e.set(r,u),u}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ut=BigInt(0),Je=BigInt(1),ur=BigInt(2),Ha=BigInt(3),ja=BigInt(4),Ya=BigInt(5),zf=BigInt(7),Za=BigInt(8),Wf=BigInt(9),Ka=BigInt(16);function $e(t,e){const r=t%e;return r>=ut?r:e+r}function Et(t,e,r){let n=t;for(;e-- >ut;)n*=n,n%=r;return n}function Ws(t,e){if(t===ut)throw new Error("invert: expected non-zero number");if(e<=ut)throw new Error("invert: expected positive modulus, got "+e);let r=$e(t,e),n=e,i=ut,u=Je;for(;r!==ut;){const o=n/r,w=n%r,g=i-u*o;n=r,r=w,i=u,u=g}if(n!==Je)throw new Error("invert: does not exist");return $e(i,e)}function vs(t,e,r){if(!t.eql(t.sqr(e),r))throw new Error("Cannot find square root")}function za(t,e){const r=(t.ORDER+Je)/ja,n=t.pow(e,r);return vs(t,n,e),n}function Lf(t,e){const r=(t.ORDER-Ya)/Za,n=t.mul(e,ur),i=t.pow(n,r),u=t.mul(e,i),f=t.mul(t.mul(u,ur),i),o=t.mul(u,t.sub(f,t.ONE));return vs(t,o,e),o}function Xf(t){const e=rr(t),r=Wa(t),n=r(e,e.neg(e.ONE)),i=r(e,n),u=r(e,e.neg(n)),f=(t+zf)/Ka;return(o,w)=>{let g=o.pow(w,f),S=o.mul(g,n);const T=o.mul(g,i),x=o.mul(g,u),_=o.eql(o.sqr(S),w),y=o.eql(o.sqr(T),w);g=o.cmov(g,S,_),S=o.cmov(x,T,y);const $=o.eql(o.sqr(S),w),q=o.cmov(g,S,$);return vs(o,q,w),q}}function Wa(t){if(t<Ha)throw new Error("sqrt is not defined for small field");let e=t-Je,r=0;for(;e%ur===ut;)e/=ur,r++;let n=ur;const i=rr(t);for(;ni(i,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return za;let u=i.pow(n,e);const f=(e+Je)/ur;return function(w,g){if(w.is0(g))return g;if(ni(w,g)!==1)throw new Error("Cannot find square root");let S=r,T=w.mul(w.ONE,u),x=w.pow(g,e),_=w.pow(g,f);for(;!w.eql(x,w.ONE);){if(w.is0(x))return w.ZERO;let y=1,$=w.sqr(x);for(;!w.eql($,w.ONE);)if(y++,$=w.sqr($),y===S)throw new Error("Cannot find square root");const q=Je<<BigInt(S-y-1),X=w.pow(T,q);S=y,T=w.sqr(X),x=w.mul(x,T),_=w.mul(_,X)}return _}}function Jf(t){return t%ja===Ha?za:t%Za===Ya?Lf:t%Ka===Wf?Xf(t):Wa(t)}const Qf=(t,e)=>($e(t,e)&Je)===Je,Df=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function La(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},r=Df.reduce((n,i)=>(n[i]="function",n),e);return wn(t,r),t}function kn(t,e,r){if(r<ut)throw new Error("invalid exponent, negatives unsupported");if(r===ut)return t.ONE;if(r===Je)return e;let n=t.ONE,i=e;for(;r>ut;)r&Je&&(n=t.mul(n,i)),i=t.sqr(i),r>>=Je;return n}function yr(t,e,r=!1){const n=new Array(e.length).fill(r?t.ZERO:void 0),i=e.reduce((f,o,w)=>t.is0(o)?f:(n[w]=f,t.mul(f,o)),t.ONE),u=t.inv(i);return e.reduceRight((f,o,w)=>t.is0(o)?f:(n[w]=t.mul(f,n[w]),t.mul(f,o)),u),n}function ni(t,e){const r=(t.ORDER-Je)/ur,n=t.pow(e,r),i=t.eql(n,t.ONE),u=t.eql(n,t.ZERO),f=t.eql(n,t.neg(t.ONE));if(!i&&!u&&!f)throw new Error("invalid Legendre symbol result");return i?1:u?0:-1}function e0(t,e){e!==void 0&&iu(e);const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function rr(t,e,r=!1,n={}){if(t<=ut)throw new Error("invalid field: expected ORDER > 0, got "+t);let i,u,f=!1,o;if(typeof e=="object"&&e!=null){if(n.sqrt||r)throw new Error("cannot specify opts in two arguments");const x=e;x.BITS&&(i=x.BITS),x.sqrt&&(u=x.sqrt),typeof x.isLE=="boolean"&&(r=x.isLE),typeof x.modOnDecode=="boolean"&&(f=x.modOnDecode),o=x.allowedLengths}else typeof e=="number"&&(i=e),n.sqrt&&(u=n.sqrt);const{nBitLength:w,nByteLength:g}=e0(t,i);if(g>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let S;const T=Object.freeze({ORDER:t,isLE:r,BITS:w,BYTES:g,MASK:pr(w),ZERO:ut,ONE:Je,allowedLengths:o,create:x=>$e(x,t),isValid:x=>{if(typeof x!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof x);return ut<=x&&x<t},is0:x=>x===ut,isValidNot0:x=>!T.is0(x)&&T.isValid(x),isOdd:x=>(x&Je)===Je,neg:x=>$e(-x,t),eql:(x,_)=>x===_,sqr:x=>$e(x*x,t),add:(x,_)=>$e(x+_,t),sub:(x,_)=>$e(x-_,t),mul:(x,_)=>$e(x*_,t),pow:(x,_)=>kn(T,x,_),div:(x,_)=>$e(x*Ws(_,t),t),sqrN:x=>x*x,addN:(x,_)=>x+_,subN:(x,_)=>x-_,mulN:(x,_)=>x*_,inv:x=>Ws(x,t),sqrt:u||(x=>(S||(S=Jf(t)),S(T,x))),toBytes:x=>r?wi(x,g):Xe(x,g),fromBytes:(x,_=!0)=>{if(o){if(!o.includes(x.length)||x.length>g)throw new Error("Field.fromBytes: expected "+o+" bytes, got "+x.length);const $=new Uint8Array(g);$.set(x,r?0:$.length-x.length),x=$}if(x.length!==g)throw new Error("Field.fromBytes: expected "+g+" bytes, got "+x.length);let y=r?on(x):Ot(x);if(f&&(y=$e(y,t)),!_&&!T.isValid(y))throw new Error("invalid field element: outside of range 0..ORDER");return y},invertBatch:x=>yr(T,x),cmov:(x,_,y)=>y?_:x});return Object.freeze(T)}function Xa(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Ja(t){const e=Xa(t);return e+Math.ceil(e/2)}function t0(t,e,r=!1){const n=t.length,i=Xa(e),u=Ja(e);if(n<16||n<u||n>1024)throw new Error("expected "+u+"-1024 bytes of input, got "+n);const f=r?on(t):Ot(t),o=$e(f,e-Je)+Je;return r?wi(o,i):Xe(o,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const jr=BigInt(0),fr=BigInt(1);function ii(t,e){const r=e.negate();return t?r:e}function Ht(t,e){const r=yr(t.Fp,e.map(n=>n.Z));return e.map((n,i)=>t.fromAffine(n.toAffine(r[i])))}function Qa(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function $i(t,e){Qa(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1),i=2**t,u=pr(t),f=BigInt(t);return{windows:r,windowSize:n,mask:u,maxNumber:i,shiftBy:f}}function Ls(t,e,r){const{windowSize:n,mask:i,maxNumber:u,shiftBy:f}=r;let o=Number(t&i),w=t>>f;o>n&&(o-=u,w+=fr);const g=e*n,S=g+Math.abs(o)-1,T=o===0,x=o<0,_=e%2!==0;return{nextN:w,offset:S,isZero:T,isNeg:x,isNegF:_,offsetF:g}}function r0(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function n0(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const Ci=new WeakMap,Da=new WeakMap;function qi(t){return Da.get(t)||1}function Xs(t){if(t!==jr)throw new Error("invalid wNAF")}class ec{constructor(e,r){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=r}_unsafeLadder(e,r,n=this.ZERO){let i=e;for(;r>jr;)r&fr&&(n=n.add(i)),i=i.double(),r>>=fr;return n}precomputeWindow(e,r){const{windows:n,windowSize:i}=$i(r,this.bits),u=[];let f=e,o=f;for(let w=0;w<n;w++){o=f,u.push(o);for(let g=1;g<i;g++)o=o.add(f),u.push(o);f=o.double()}return u}wNAF(e,r,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let i=this.ZERO,u=this.BASE;const f=$i(e,this.bits);for(let o=0;o<f.windows;o++){const{nextN:w,offset:g,isZero:S,isNeg:T,isNegF:x,offsetF:_}=Ls(n,o,f);n=w,S?u=u.add(ii(x,r[_])):i=i.add(ii(T,r[g]))}return Xs(n),{p:i,f:u}}wNAFUnsafe(e,r,n,i=this.ZERO){const u=$i(e,this.bits);for(let f=0;f<u.windows&&n!==jr;f++){const{nextN:o,offset:w,isZero:g,isNeg:S}=Ls(n,f,u);if(n=o,!g){const T=r[w];i=i.add(S?T.negate():T)}}return Xs(n),i}getPrecomputes(e,r,n){let i=Ci.get(r);return i||(i=this.precomputeWindow(r,e),e!==1&&(typeof n=="function"&&(i=n(i)),Ci.set(r,i))),i}cached(e,r,n){const i=qi(e);return this.wNAF(i,this.getPrecomputes(i,e,n),r)}unsafe(e,r,n,i){const u=qi(e);return u===1?this._unsafeLadder(e,r,i):this.wNAFUnsafe(u,this.getPrecomputes(u,e,n),r,i)}createCache(e,r){Qa(r,this.bits),Da.set(e,r),Ci.delete(e)}hasCache(e){return qi(e)!==1}}function i0(t,e,r,n){let i=e,u=t.ZERO,f=t.ZERO;for(;r>jr||n>jr;)r&fr&&(u=u.add(i)),n&fr&&(f=f.add(i)),i=i.double(),r>>=fr,n>>=fr;return{p1:u,p2:f}}function tc(t,e,r,n){r0(r,t),n0(n,e);const i=r.length,u=n.length;if(i!==u)throw new Error("arrays of points and scalars must have equal length");const f=t.ZERO,o=$r(BigInt(i));let w=1;o>12?w=o-3:o>4?w=o-2:o>0&&(w=2);const g=pr(w),S=new Array(Number(g)+1).fill(f),T=Math.floor((e.BITS-1)/w)*w;let x=f;for(let _=T;_>=0;_-=w){S.fill(f);for(let $=0;$<u;$++){const q=n[$],X=Number(q>>BigInt(_)&g);S[X]=S[X].add(r[$])}let y=f;for(let $=S.length-1,q=f;$>0;$--)q=q.add(S[$]),y=y.add(q);if(x=x.add(y),_!==0)for(let $=0;$<w;$++)x=x.double()}return x}function Js(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return La(e),e}else return rr(t)}function rc(t,e,r={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const o of["p","n","h"]){const w=e[o];if(!(typeof w=="bigint"&&w>jr))throw new Error(`CURVE.${o} must be positive bigint`)}const n=Js(e.p,r.Fp),i=Js(e.n,r.Fn),f=["Gx","Gy","a",t==="weierstrass"?"b":"d"];for(const o of f)if(!n.isValid(e[o]))throw new Error(`CURVE.${o} must be valid field element of CURVE.Fp`);return{Fp:n,Fn:i}}const s0=Ot;function Qt(t,e){if(cn(t),cn(e),t<0||t>=1<<8*e)throw new Error("invalid I2OSP input: "+t);const r=Array.from({length:e}).fill(0);for(let n=e-1;n>=0;n--)r[n]=t&255,t>>>=8;return new Uint8Array(r)}function o0(t,e){const r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t[n]^e[n];return r}function cn(t){if(!Number.isSafeInteger(t))throw new Error("number expected")}function nc(t){if(!ds(t)&&typeof t!="string")throw new Error("DST must be Uint8Array or string");return typeof t=="string"?hn(t):t}function a0(t,e,r,n){nt(t),cn(r),e=nc(e),e.length>255&&(e=n(Ce(hn("H2C-OVERSIZE-DST-"),e)));const{outputLen:i,blockLen:u}=n,f=Math.ceil(r/i);if(r>65535||f>255)throw new Error("expand_message_xmd: invalid lenInBytes");const o=Ce(e,Qt(e.length,1)),w=Qt(0,u),g=Qt(r,2),S=new Array(f),T=n(Ce(w,t,g,Qt(0,1),o));S[0]=n(Ce(T,Qt(1,1),o));for(let _=1;_<=f;_++){const y=[o0(T,S[_-1]),Qt(_+1,1),o];S[_]=n(Ce(...y))}return Ce(...S).slice(0,r)}function c0(t,e,r,n,i){if(nt(t),cn(r),e=nc(e),e.length>255){const u=Math.ceil(2*n/8);e=i.create({dkLen:u}).update(hn("H2C-OVERSIZE-DST-")).update(e).digest()}if(r>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:r}).update(t).update(Qt(r,2)).update(e).update(Qt(e.length,1)).digest()}function Gi(t,e,r){wn(r,{p:"bigint",m:"number",k:"number",hash:"function"});const{p:n,k:i,m:u,hash:f,expand:o,DST:w}=r;if(!Kf(r.hash))throw new Error("expected valid hash");nt(t),cn(e);const g=n.toString(2).length,S=Math.ceil((g+i)/8),T=e*u*S;let x;if(o==="xmd")x=a0(t,w,T,f);else if(o==="xof")x=c0(t,w,T,i,f);else if(o==="_internal_pass")x=t;else throw new Error('expand must be "xmd" or "xof"');const _=new Array(e);for(let y=0;y<e;y++){const $=new Array(u);for(let q=0;q<u;q++){const X=S*(q+y*u),K=x.subarray(X,X+S);$[q]=$e(s0(K),n)}_[y]=$}return _}function ic(t,e){const r=e.map(n=>Array.from(n).reverse());return(n,i)=>{const[u,f,o,w]=r.map(T=>T.reduce((x,_)=>t.add(t.mul(x,n),_))),[g,S]=yr(t,[f,w],!0);return n=t.mul(u,g),i=t.mul(i,t.mul(o,S)),{x:n,y:i}}}const u0=hn("HashToScalar-");function Qs(t,e,r){if(typeof e!="function")throw new Error("mapToCurve() must be defined");function n(u){return t.fromAffine(e(u))}function i(u){const f=u.clearCofactor();return f.equals(t.ZERO)?t.ZERO:(f.assertValidity(),f)}return{defaults:r,hashToCurve(u,f){const o=Object.assign({},r,f),w=Gi(u,2,o),g=n(w[0]),S=n(w[1]);return i(g.add(S))},encodeToCurve(u,f){const o=r.encodeDST?{DST:r.encodeDST}:{},w=Object.assign({},r,o,f),g=Gi(u,1,w),S=n(g[0]);return i(S)},mapToCurve(u){if(!Array.isArray(u))throw new Error("expected array of bigints");for(const f of u)if(typeof f!="bigint")throw new Error("expected array of bigints");return i(n(u))},hashToScalar(u,f){const o=t.Fn.ORDER,w=Object.assign({},r,{p:o,m:1,DST:u0},f);return Gi(u,1,w)[0][0]}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ds=(t,e)=>(t+(t>=0?e:-e)/kt)/e;function f0(t,e,r){const[[n,i],[u,f]]=e,o=Ds(f*t,r),w=Ds(-i*t,r);let g=t-o*n-w*u,S=-o*i-w*f;const T=g<lr,x=S<lr;T&&(g=-g),x&&(S=-S);const _=pr(Math.ceil($r(r)/2))+at;if(g<lr||g>=_||S<lr||S>=_)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:T,k1:g,k2neg:x,k2:S}}const lr=BigInt(0),at=BigInt(1),kt=BigInt(2),Fr=BigInt(3),as=BigInt(4);function sc(t,e,r){function n(i){const u=t.sqr(i),f=t.mul(u,i);return t.add(t.add(f,t.mul(i,e)),r)}return n}function si(t,e){const{BYTES:r}=t;let n;if(typeof e=="bigint")n=e;else{let i=ct("private key",e);try{n=t.fromBytes(i)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof e}`)}}if(!t.isValidNot0(n))throw new Error("invalid private key: out of range [1..N-1]");return n}function l0(t,e={}){const{Fp:r,Fn:n}=rc("weierstrass",t,e),{h:i,n:u}=t;wn(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:f}=e;if(f&&(!r.is0(t.a)||typeof f.beta!="bigint"||!Array.isArray(f.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');function o(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function w(re,U,H){const{x:J,y:b}=U.toAffine(),N=r.toBytes(J);if(sn("isCompressed",H),H){o();const M=!r.isOdd(b);return Ce(h0(M),N)}else return Ce(Uint8Array.of(4),N,r.toBytes(b))}function g(re){nt(re);const U=r.BYTES,H=U+1,J=2*U+1,b=re.length,N=re[0],M=re.subarray(1);if(b===H&&(N===2||N===3)){const L=r.fromBytes(M);if(!r.isValid(L))throw new Error("bad point: is not on curve, wrong x");const ee=x(L);let Q;try{Q=r.sqrt(ee)}catch(oe){const ie=oe instanceof Error?": "+oe.message:"";throw new Error("bad point: is not on curve, sqrt error"+ie)}o();const ne=r.isOdd(Q);return(N&1)===1!==ne&&(Q=r.neg(Q)),{x:L,y:Q}}else if(b===J&&N===4){const L=r.fromBytes(M.subarray(U*0,U*1)),ee=r.fromBytes(M.subarray(U*1,U*2));if(!_(L,ee))throw new Error("bad point: is not on curve");return{x:L,y:ee}}else throw new Error(`bad point: got length ${b}, expected compressed=${H} or uncompressed=${J}`)}const S=e.toBytes||w,T=e.fromBytes||g,x=sc(r,t.a,t.b);function _(re,U){const H=r.sqr(U),J=x(re);return r.eql(H,J)}if(!_(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const y=r.mul(r.pow(t.a,Fr),as),$=r.mul(r.sqr(t.b),BigInt(27));if(r.is0(r.add(y,$)))throw new Error("bad curve params: a or b");function q(re,U,H=!1){if(!r.isValid(U)||H&&r.is0(U))throw new Error(`bad point coordinate ${re}`);return U}function X(re){if(!(re instanceof C))throw new Error("ProjectivePoint expected")}function K(re){if(!f||!f.basises)throw new Error("no endo");return f0(re,f.basises,n.ORDER)}const j=an((re,U)=>{const{X:H,Y:J,Z:b}=re;if(r.eql(b,r.ONE))return{x:H,y:J};const N=re.is0();U==null&&(U=N?r.ONE:r.inv(b));const M=r.mul(H,U),L=r.mul(J,U),ee=r.mul(b,U);if(N)return{x:r.ZERO,y:r.ZERO};if(!r.eql(ee,r.ONE))throw new Error("invZ was invalid");return{x:M,y:L}}),D=an(re=>{if(re.is0()){if(e.allowInfinityPoint&&!r.is0(re.Y))return;throw new Error("bad point: ZERO")}const{x:U,y:H}=re.toAffine();if(!r.isValid(U)||!r.isValid(H))throw new Error("bad point: x or y not field elements");if(!_(U,H))throw new Error("bad point: equation left != right");if(!re.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function R(re,U,H,J,b){return H=new C(r.mul(H.X,re),H.Y,H.Z),U=ii(J,U),H=ii(b,H),U.add(H)}class C{constructor(U,H,J){this.X=q("x",U),this.Y=q("y",H,!0),this.Z=q("z",J),Object.freeze(this)}static fromAffine(U){const{x:H,y:J}=U||{};if(!U||!r.isValid(H)||!r.isValid(J))throw new Error("invalid affine point");if(U instanceof C)throw new Error("projective point not allowed");return r.is0(H)&&r.is0(J)?C.ZERO:new C(H,J,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}static normalizeZ(U){return Ht(C,U)}static fromBytes(U){return nt(U),C.fromHex(U)}static fromHex(U){const H=C.fromAffine(T(ct("pointHex",U)));return H.assertValidity(),H}static fromPrivateKey(U){return C.BASE.multiply(si(n,U))}static msm(U,H){return tc(C,n,U,H)}_setWindowSize(U){this.precompute(U)}precompute(U=8,H=!0){return te.createCache(this,U),H||this.multiply(Fr),this}assertValidity(){D(this)}hasEvenY(){const{y:U}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(U)}equals(U){X(U);const{X:H,Y:J,Z:b}=this,{X:N,Y:M,Z:L}=U,ee=r.eql(r.mul(H,L),r.mul(N,b)),Q=r.eql(r.mul(J,L),r.mul(M,b));return ee&&Q}negate(){return new C(this.X,r.neg(this.Y),this.Z)}double(){const{a:U,b:H}=t,J=r.mul(H,Fr),{X:b,Y:N,Z:M}=this;let L=r.ZERO,ee=r.ZERO,Q=r.ZERO,ne=r.mul(b,b),he=r.mul(N,N),oe=r.mul(M,M),ie=r.mul(b,N);return ie=r.add(ie,ie),Q=r.mul(b,M),Q=r.add(Q,Q),L=r.mul(U,Q),ee=r.mul(J,oe),ee=r.add(L,ee),L=r.sub(he,ee),ee=r.add(he,ee),ee=r.mul(L,ee),L=r.mul(ie,L),Q=r.mul(J,Q),oe=r.mul(U,oe),ie=r.sub(ne,oe),ie=r.mul(U,ie),ie=r.add(ie,Q),Q=r.add(ne,ne),ne=r.add(Q,ne),ne=r.add(ne,oe),ne=r.mul(ne,ie),ee=r.add(ee,ne),oe=r.mul(N,M),oe=r.add(oe,oe),ne=r.mul(oe,ie),L=r.sub(L,ne),Q=r.mul(oe,he),Q=r.add(Q,Q),Q=r.add(Q,Q),new C(L,ee,Q)}add(U){X(U);const{X:H,Y:J,Z:b}=this,{X:N,Y:M,Z:L}=U;let ee=r.ZERO,Q=r.ZERO,ne=r.ZERO;const he=t.a,oe=r.mul(t.b,Fr);let ie=r.mul(H,N),Se=r.mul(J,M),B=r.mul(b,L),Fe=r.add(H,J),ve=r.add(N,M);Fe=r.mul(Fe,ve),ve=r.add(ie,Se),Fe=r.sub(Fe,ve),ve=r.add(H,b);let Me=r.add(N,L);return ve=r.mul(ve,Me),Me=r.add(ie,B),ve=r.sub(ve,Me),Me=r.add(J,b),ee=r.add(M,L),Me=r.mul(Me,ee),ee=r.add(Se,B),Me=r.sub(Me,ee),ne=r.mul(he,ve),ee=r.mul(oe,B),ne=r.add(ee,ne),ee=r.sub(Se,ne),ne=r.add(Se,ne),Q=r.mul(ee,ne),Se=r.add(ie,ie),Se=r.add(Se,ie),B=r.mul(he,B),ve=r.mul(oe,ve),Se=r.add(Se,B),B=r.sub(ie,B),B=r.mul(he,B),ve=r.add(ve,B),ie=r.mul(Se,ve),Q=r.add(Q,ie),ie=r.mul(Me,ve),ee=r.mul(Fe,ee),ee=r.sub(ee,ie),ie=r.mul(Fe,Se),ne=r.mul(Me,ne),ne=r.add(ne,ie),new C(ee,Q,ne)}subtract(U){return this.add(U.negate())}is0(){return this.equals(C.ZERO)}multiply(U){const{endo:H}=e;if(!n.isValidNot0(U))throw new Error("invalid scalar: out of range");let J,b;const N=M=>te.cached(this,M,L=>Ht(C,L));if(H){const{k1neg:M,k1:L,k2neg:ee,k2:Q}=K(U),{p:ne,f:he}=N(L),{p:oe,f:ie}=N(Q);b=he.add(ie),J=R(H.beta,ne,oe,M,ee)}else{const{p:M,f:L}=N(U);J=M,b=L}return Ht(C,[J,b])[0]}multiplyUnsafe(U){const{endo:H}=e,J=this;if(!n.isValid(U))throw new Error("invalid scalar: out of range");if(U===lr||J.is0())return C.ZERO;if(U===at)return J;if(te.hasCache(this))return this.multiply(U);if(H){const{k1neg:b,k1:N,k2neg:M,k2:L}=K(U),{p1:ee,p2:Q}=i0(C,J,N,L);return R(H.beta,ee,Q,b,M)}else return te.unsafe(J,U)}multiplyAndAddUnsafe(U,H,J){const b=this.multiplyUnsafe(H).add(U.multiplyUnsafe(J));return b.is0()?void 0:b}toAffine(U){return j(this,U)}isTorsionFree(){const{isTorsionFree:U}=e;return i===at?!0:U?U(C,this):te.unsafe(this,u).is0()}clearCofactor(){const{clearCofactor:U}=e;return i===at?this:U?U(C,this):this.multiplyUnsafe(i)}isSmallOrder(){return this.multiplyUnsafe(i).is0()}toBytes(U=!0){return sn("isCompressed",U),this.assertValidity(),S(C,this,U)}toRawBytes(U=!0){return this.toBytes(U)}toHex(U=!0){return Vr(this.toBytes(U))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}C.BASE=new C(t.Gx,t.Gy,r.ONE),C.ZERO=new C(r.ZERO,r.ONE,r.ZERO),C.Fp=r,C.Fn=n;const W=n.BITS,te=new ec(C,e.endo?Math.ceil(W/2):W);return C}function eo(t){const{CURVE:e,curveOpts:r}=p0(t),n=l0(e,r);return y0(t,n)}function h0(t){return Uint8Array.of(t?2:3)}function d0(t,e){const r=t.ORDER;let n=lr;for(let y=r-at;y%kt===lr;y/=kt)n+=at;const i=n,u=kt<<i-at-at,f=u*kt,o=(r-at)/f,w=(o-at)/kt,g=f-at,S=u,T=t.pow(e,o),x=t.pow(e,(o+at)/kt);let _=(y,$)=>{let q=T,X=t.pow($,g),K=t.sqr(X);K=t.mul(K,$);let j=t.mul(y,K);j=t.pow(j,w),j=t.mul(j,X),X=t.mul(j,$),K=t.mul(j,y);let D=t.mul(K,X);j=t.pow(D,S);let R=t.eql(j,t.ONE);X=t.mul(K,x),j=t.mul(D,q),K=t.cmov(X,K,R),D=t.cmov(j,D,R);for(let C=i;C>at;C--){let W=C-kt;W=kt<<W-at;let te=t.pow(D,W);const re=t.eql(te,t.ONE);X=t.mul(K,q),q=t.mul(q,q),te=t.mul(D,q),K=t.cmov(X,K,re),D=t.cmov(te,D,re)}return{isValid:R,value:K}};if(t.ORDER%as===Fr){const y=(t.ORDER-Fr)/as,$=t.sqrt(t.neg(e));_=(q,X)=>{let K=t.sqr(X);const j=t.mul(q,X);K=t.mul(K,j);let D=t.pow(K,y);D=t.mul(D,j);const R=t.mul(D,$),C=t.mul(t.sqr(D),X),W=t.eql(C,q);let te=t.cmov(R,D,W);return{isValid:W,value:te}}}return _}function oc(t,e){La(t);const{A:r,B:n,Z:i}=e;if(!t.isValid(r)||!t.isValid(n)||!t.isValid(i))throw new Error("mapToCurveSimpleSWU: invalid opts");const u=d0(t,i);if(!t.isOdd)throw new Error("Field does not have .isOdd()");return f=>{let o,w,g,S,T,x,_,y;o=t.sqr(f),o=t.mul(o,i),w=t.sqr(o),w=t.add(w,o),g=t.add(w,t.ONE),g=t.mul(g,n),S=t.cmov(i,t.neg(w),!t.eql(w,t.ZERO)),S=t.mul(S,r),w=t.sqr(g),x=t.sqr(S),T=t.mul(x,r),w=t.add(w,T),w=t.mul(w,g),x=t.mul(x,S),T=t.mul(x,n),w=t.add(w,T),_=t.mul(o,g);const{isValid:$,value:q}=u(w,x);y=t.mul(o,f),y=t.mul(y,q),_=t.cmov(_,g,$),y=t.cmov(y,q,$);const X=t.isOdd(f)===t.isOdd(y);y=t.cmov(t.neg(y),y,X);const K=yr(t,[S],!0)[0];return _=t.mul(_,K),{x:_,y}}}function p0(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},r=t.Fp;let n=t.allowedPrivateKeyLengths?Array.from(new Set(t.allowedPrivateKeyLengths.map(f=>Math.ceil(f/2)))):void 0;const i=rr(e.n,{BITS:t.nBitLength,allowedLengths:n,modOnDecode:t.wrapPrivateKey}),u={Fp:r,Fn:i,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:u}}function y0(t,e){const{Fp:r,Fn:n}=e;function i(f){return Va(f,at,n.ORDER)}const u=sc(r,t.a,t.b);return Object.assign({},{CURVE:t,Point:e,ProjectivePoint:e,normPrivateKeyToScalar:f=>si(n,f),weierstrassEquation:u,isWithinCurveOrder:i})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const w0=BigInt(0),Nn=BigInt(1),to=BigInt(2),Mr=BigInt(3);function g0(t){const e=[];for(;t>Nn;t>>=Nn)(t&Nn)===w0?e.unshift(0):(t&Mr)===Mr?(e.unshift(-1),t+=Nn):e.unshift(1);return e}function Vi(t){if(!Array.isArray(t)||t.length===0)throw new Error("expected non-empty array")}function m0(t,e,r,n){const{Fp2:i,Fp12:u}=t,{twistType:f,ateLoopSize:o,xNegative:w,postPrecompute:g}=n;let S;if(f==="multiplicative")S=(j,D,R,C,W,te)=>u.mul014(C,j,i.mul(D,W),i.mul(R,te));else if(f==="divisive")S=(j,D,R,C,W,te)=>u.mul034(C,i.mul(R,te),i.mul(D,W),j);else throw new Error("bls: unknown twist type");const T=i.div(i.ONE,i.mul(i.ONE,to));function x(j,D,R,C){const W=i.sqr(R),te=i.sqr(C),re=i.mulByB(i.mul(te,Mr)),U=i.mul(re,Mr),H=i.sub(i.sub(i.sqr(i.add(R,C)),te),W),J=i.sub(re,W),b=i.mul(i.sqr(D),Mr),N=i.neg(H);return j.push([J,b,N]),D=i.mul(i.mul(i.mul(i.sub(W,U),D),R),T),R=i.sub(i.sqr(i.mul(i.add(W,U),T)),i.mul(i.sqr(re),Mr)),C=i.mul(W,H),{Rx:D,Ry:R,Rz:C}}function _(j,D,R,C,W,te){const re=i.sub(R,i.mul(te,C)),U=i.sub(D,i.mul(W,C)),H=i.sub(i.mul(re,W),i.mul(U,te)),J=i.neg(re),b=U;j.push([H,J,b]);const N=i.sqr(U),M=i.mul(N,U),L=i.mul(N,D),ee=i.add(i.sub(M,i.mul(L,to)),i.mul(i.sqr(re),C));return D=i.mul(U,ee),R=i.sub(i.mul(i.sub(L,ee),re),i.mul(M,R)),C=i.mul(C,M),{Rx:D,Ry:R,Rz:C}}const y=g0(o),$=an(j=>{const D=j,{x:R,y:C}=D.toAffine(),W=R,te=C,re=i.neg(C);let U=W,H=te,J=i.ONE;const b=[];for(const N of y){const M=[];({Rx:U,Ry:H,Rz:J}=x(M,U,H,J)),N&&({Rx:U,Ry:H,Rz:J}=_(M,U,H,J,W,N===-1?re:te)),b.push(M)}if(g){const N=b[b.length-1];g(U,H,J,W,te,_.bind(null,N))}return b});function q(j,D=!1){let R=u.ONE;if(j.length){const C=j[0][0].length;for(let W=0;W<C;W++){R=u.sqr(R);for(const[te,re,U]of j)for(const[H,J,b]of te[W])R=S(H,J,b,R,re,U)}}return w&&(R=u.conjugate(R)),D?u.finalExponentiate(R):R}function X(j,D=!0){const R=[];Ht(e,j.map(({g1:C})=>C)),Ht(r,j.map(({g2:C})=>C));for(const{g1:C,g2:W}of j){if(C.is0()||W.is0())throw new Error("pairing is not available for ZERO point");C.assertValidity(),W.assertValidity();const te=C.toAffine();R.push([$(W),te.x,te.y])}return q(R,D)}function K(j,D,R=!0){return X([{g1:j,g2:D}],R)}return{Fp12:u,millerLoopBatch:q,pairing:K,pairingBatch:X,calcPairingPrecomputes:$}}function ro(t,e,r,n,i){const{Fp12:u,pairingBatch:f}=t;function o(T){return T instanceof e.Point?T:e.Point.fromHex(T)}function w(T){return T instanceof r.Point?T:r.Point.fromHex(T)}function g(T){if(!(T instanceof r.Point))throw new Error(`expected valid message hashed to ${i?"G1":"G2"} curve`);return T}const S=i?(T,x)=>({g1:x,g2:T}):(T,x)=>({g1:T,g2:x});return{getPublicKey(T){const x=si(e.Point.Fn,T);return e.Point.BASE.multiply(x)},sign(T,x,_){if(_!=null)throw new Error("sign() expects 2 arguments");const y=si(e.Point.Fn,x);return g(T).assertValidity(),T.multiply(y)},verify(T,x,_,y){if(y!=null)throw new Error("verify() expects 3 arguments");T=w(T),_=o(_);const $=_.negate(),q=e.Point.BASE,X=g(x),K=T,j=f([S($,X),S(q,K)]);return u.eql(j,u.ONE)},verifyBatch(T,x,_){if(Vi(x),_.length!==x.length)throw new Error("amount of public keys and messages should be equal");const y=w(T),$=x,q=_.map(o),X=new Map;for(let D=0;D<q.length;D++){const R=q[D],C=$[D];let W=X.get(C);W===void 0&&(W=[],X.set(C,W)),W.push(R)}const K=[],j=e.Point.BASE;try{for(const[D,R]of X){const C=R.reduce((W,te)=>W.add(te));K.push(S(C,D))}return K.push(S(j.negate(),y)),u.eql(f(K),u.ONE)}catch{return!1}},aggregatePublicKeys(T){Vi(T),T=T.map(_=>o(_));const x=T.reduce((_,y)=>_.add(y),e.Point.ZERO);return x.assertValidity(),x},aggregateSignatures(T){Vi(T),T=T.map(_=>w(_));const x=T.reduce((_,y)=>_.add(y),r.Point.ZERO);return x.assertValidity(),x},hash(T,x){nt(T);const _=x?{DST:x}:void 0;return r.hashToCurve(T,_)},Signature:n}}function b0(t){const{Fp:e,Fr:r,Fp2:n,Fp6:i,Fp12:u}=t.fields,f=eo(t.G1),o=Object.assign(f,Qs(f.Point,t.G1.mapToCurve,{...t.htfDefaults,...t.G1.htfDefaults})),w=eo(t.G2),g=Object.assign(w,Qs(w.Point,t.G2.mapToCurve,{...t.htfDefaults,...t.G2.htfDefaults})),S=m0(t.fields,o.Point,g.Point,{...t.params,postPrecompute:t.postPrecompute}),{millerLoopBatch:T,pairing:x,pairingBatch:_,calcPairingPrecomputes:y}=S,$=ro(S,o,g,t.G2.Signature,!1),q=ro(S,g,o,t.G1.ShortSignature,!0),X=t.randomBytes||So,K=()=>{const Q=Ja(r.ORDER);return t0(X(Q),r.ORDER)},j={randomSecretKey:K,randomPrivateKey:K,calcPairingPrecomputes:y},{ShortSignature:D}=t.G1,{Signature:R}=t.G2;function C(Q,ne){return Q instanceof o.Point?Q:q.hash(ct("point",Q),ne==null?void 0:ne.DST)}function W(Q,ne){return Q instanceof g.Point?Q:$.hash(ct("point",Q),ne==null?void 0:ne.DST)}function te(Q){return $.getPublicKey(Q).toBytes(!0)}function re(Q){return q.getPublicKey(Q).toBytes(!0)}function U(Q,ne,he){const oe=W(Q,he),ie=$.sign(oe,ne);return Q instanceof g.Point?ie:R.toBytes(ie)}function H(Q,ne,he){const oe=C(Q,he),ie=q.sign(oe,ne);return Q instanceof o.Point?ie:D.toBytes(ie)}function J(Q,ne,he,oe){const ie=W(ne,oe);return $.verify(Q,ie,he)}function b(Q,ne,he,oe){const ie=C(ne,oe);return q.verify(Q,ie,he)}function N(Q){const ne=$.aggregatePublicKeys(Q);return Q[0]instanceof o.Point?ne:ne.toBytes(!0)}function M(Q){const ne=$.aggregateSignatures(Q);return Q[0]instanceof g.Point?ne:R.toBytes(ne)}function L(Q){const ne=q.aggregateSignatures(Q);return Q[0]instanceof o.Point?ne:D.toBytes(ne)}function ee(Q,ne,he,oe){const ie=ne.map(Se=>W(Se,oe));return $.verifyBatch(Q,ie,he)}return o.Point.BASE.precompute(4),{longSignatures:$,shortSignatures:q,millerLoopBatch:T,pairing:x,pairingBatch:_,verifyBatch:ee,fields:{Fr:r,Fp:e,Fp2:n,Fp6:i,Fp12:u},params:{ateLoopSize:t.params.ateLoopSize,twistType:t.params.twistType,r:t.params.r,G1b:t.G1.b,G2b:t.G2.b},utils:j,getPublicKey:te,getPublicKeyForShortSignatures:re,sign:U,signShortSignature:H,verify:J,verifyShortSignature:b,aggregatePublicKeys:N,aggregateSignatures:M,aggregateShortSignatures:L,G1:o,G2:g,Signature:R,ShortSignature:D}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const no=BigInt(0),kr=BigInt(1),Ct=BigInt(2),io=BigInt(3);function Hi(t,e,r,n,i=1,u){const f=BigInt(u===void 0?n:u),o=r**BigInt(n),w=[];for(let g=0;g<i;g++){const S=BigInt(g+1),T=[];for(let x=0,_=kr;x<n;x++){const y=(S*_-S)/f%o;T.push(t.pow(e,y)),_*=r}w.push(T)}return w}function _0(t,e,r){const n=e.pow(r,(t.ORDER-kr)/io),i=e.pow(r,(t.ORDER-kr)/Ct);function u(x,_){const y=e.mul(e.frobeniusMap(x,1),n),$=e.mul(e.frobeniusMap(_,1),i);return[y,$]}const f=e.pow(r,(t.ORDER**Ct-kr)/io),o=e.pow(r,(t.ORDER**Ct-kr)/Ct);if(!e.eql(o,e.neg(e.ONE)))throw new Error("psiFrobenius: PSI2_Y!==-1");function w(x,_){return[e.mul(x,f),e.neg(_)]}const g=x=>(_,y)=>{const $=y.toAffine(),q=x($.x,$.y);return _.fromAffine({x:q[0],y:q[1]})},S=g(u),T=g(w);return{psi:u,psi2:w,G2psi:S,G2psi2:T,PSI_X:n,PSI_Y:i,PSI2_X:f,PSI2_Y:o}}function x0(t){const{ORDER:e}=t,r=rr(e),n=r.create(t.NONRESIDUE||BigInt(-1)),i=r.div(r.ONE,Ct),u=Hi(r,n,r.ORDER,2)[0],f=({c0:b,c1:N},{c0:M,c1:L})=>({c0:r.add(b,M),c1:r.add(N,L)}),o=({c0:b,c1:N},{c0:M,c1:L})=>({c0:r.sub(b,M),c1:r.sub(N,L)}),w=({c0:b,c1:N},M)=>{if(typeof M=="bigint")return{c0:r.mul(b,M),c1:r.mul(N,M)};const{c0:L,c1:ee}=M;let Q=r.mul(b,L),ne=r.mul(N,ee);const he=r.sub(Q,ne),oe=r.sub(r.mul(r.add(b,N),r.add(L,ee)),r.add(Q,ne));return{c0:he,c1:oe}},g=({c0:b,c1:N})=>{const M=r.add(b,N),L=r.sub(b,N),ee=r.add(b,b);return{c0:r.mul(M,L),c1:r.mul(ee,N)}},S=b=>{if(b.length!==2)throw new Error("invalid tuple");const N=b.map(M=>r.create(M));return{c0:N[0],c1:N[1]}};function T(b,N){return typeof b=="bigint"&&no<=b&&b<N}const x=e*e,_=S(t.FP2_NONRESIDUE),y={ORDER:x,isLE:r.isLE,NONRESIDUE:_,BITS:$r(x),BYTES:Math.ceil($r(x)/8),MASK:pr($r(x)),ZERO:{c0:r.ZERO,c1:r.ZERO},ONE:{c0:r.ONE,c1:r.ZERO},create:b=>b,isValid:({c0:b,c1:N})=>T(b,x)&&T(N,x),is0:({c0:b,c1:N})=>r.is0(b)&&r.is0(N),isValidNot0:b=>!y.is0(b)&&y.isValid(b),eql:({c0:b,c1:N},{c0:M,c1:L})=>r.eql(b,M)&&r.eql(N,L),neg:({c0:b,c1:N})=>({c0:r.neg(b),c1:r.neg(N)}),pow:(b,N)=>kn(y,b,N),invertBatch:b=>yr(y,b),add:f,sub:o,mul:w,sqr:g,addN:f,subN:o,mulN:w,sqrN:g,div:(b,N)=>y.mul(b,typeof N=="bigint"?r.inv(r.create(N)):y.inv(N)),inv:({c0:b,c1:N})=>{const M=r.inv(r.create(b*b+N*N));return{c0:r.mul(M,r.create(b)),c1:r.mul(M,r.create(-N))}},sqrt:b=>{if(t.Fp2sqrt)return t.Fp2sqrt(b);const{c0:N,c1:M}=b;if(r.is0(M))return ni(r,N)===1?y.create({c0:r.sqrt(N),c1:r.ZERO}):y.create({c0:r.ZERO,c1:r.sqrt(r.div(N,n))});const L=r.sqrt(r.sub(r.sqr(N),r.mul(r.sqr(M),n)));let ee=r.mul(r.add(L,N),i);ni(r,ee)===-1&&(ee=r.sub(ee,L));const ne=r.sqrt(ee),he=y.create({c0:ne,c1:r.div(r.mul(M,i),ne)});if(!y.eql(y.sqr(he),b))throw new Error("Cannot find square root");const oe=he,ie=y.neg(oe),{re:Se,im:B}=y.reim(oe),{re:Fe,im:ve}=y.reim(ie);return B>ve||B===ve&&Se>Fe?oe:ie},isOdd:b=>{const{re:N,im:M}=y.reim(b),L=N%Ct,ee=N===no,Q=M%Ct;return BigInt(L||ee&&Q)==kr},fromBytes(b){if(b.length!==y.BYTES)throw new Error("fromBytes invalid length="+b.length);return{c0:r.fromBytes(b.subarray(0,r.BYTES)),c1:r.fromBytes(b.subarray(r.BYTES))}},toBytes:({c0:b,c1:N})=>Ce(r.toBytes(b),r.toBytes(N)),cmov:({c0:b,c1:N},{c0:M,c1:L},ee)=>({c0:r.cmov(b,M,ee),c1:r.cmov(N,L,ee)}),reim:({c0:b,c1:N})=>({re:b,im:N}),mulByNonresidue:({c0:b,c1:N})=>y.mul({c0:b,c1:N},_),mulByB:t.Fp2mulByB,fromBigTuple:S,frobeniusMap:({c0:b,c1:N},M)=>({c0:b,c1:r.mul(N,u[M%2])})},$=({c0:b,c1:N,c2:M},{c0:L,c1:ee,c2:Q})=>({c0:y.add(b,L),c1:y.add(N,ee),c2:y.add(M,Q)}),q=({c0:b,c1:N,c2:M},{c0:L,c1:ee,c2:Q})=>({c0:y.sub(b,L),c1:y.sub(N,ee),c2:y.sub(M,Q)}),X=({c0:b,c1:N,c2:M},L)=>{if(typeof L=="bigint")return{c0:y.mul(b,L),c1:y.mul(N,L),c2:y.mul(M,L)};const{c0:ee,c1:Q,c2:ne}=L,he=y.mul(b,ee),oe=y.mul(N,Q),ie=y.mul(M,ne);return{c0:y.add(he,y.mulByNonresidue(y.sub(y.mul(y.add(N,M),y.add(Q,ne)),y.add(oe,ie)))),c1:y.add(y.sub(y.mul(y.add(b,N),y.add(ee,Q)),y.add(he,oe)),y.mulByNonresidue(ie)),c2:y.sub(y.add(oe,y.mul(y.add(b,M),y.add(ee,ne))),y.add(he,ie))}},K=({c0:b,c1:N,c2:M})=>{let L=y.sqr(b),ee=y.mul(y.mul(b,N),Ct),Q=y.mul(y.mul(N,M),Ct),ne=y.sqr(M);return{c0:y.add(y.mulByNonresidue(Q),L),c1:y.add(y.mulByNonresidue(ne),ee),c2:y.sub(y.sub(y.add(y.add(ee,y.sqr(y.add(y.sub(b,N),M))),Q),L),ne)}},[j,D]=Hi(y,_,r.ORDER,6,2,3),R={ORDER:y.ORDER,isLE:y.isLE,BITS:3*y.BITS,BYTES:3*y.BYTES,MASK:pr(3*y.BITS),ZERO:{c0:y.ZERO,c1:y.ZERO,c2:y.ZERO},ONE:{c0:y.ONE,c1:y.ZERO,c2:y.ZERO},create:b=>b,isValid:({c0:b,c1:N,c2:M})=>y.isValid(b)&&y.isValid(N)&&y.isValid(M),is0:({c0:b,c1:N,c2:M})=>y.is0(b)&&y.is0(N)&&y.is0(M),isValidNot0:b=>!R.is0(b)&&R.isValid(b),neg:({c0:b,c1:N,c2:M})=>({c0:y.neg(b),c1:y.neg(N),c2:y.neg(M)}),eql:({c0:b,c1:N,c2:M},{c0:L,c1:ee,c2:Q})=>y.eql(b,L)&&y.eql(N,ee)&&y.eql(M,Q),sqrt:zs,div:(b,N)=>R.mul(b,typeof N=="bigint"?r.inv(r.create(N)):R.inv(N)),pow:(b,N)=>kn(R,b,N),invertBatch:b=>yr(R,b),add:$,sub:q,mul:X,sqr:K,addN:$,subN:q,mulN:X,sqrN:K,inv:({c0:b,c1:N,c2:M})=>{let L=y.sub(y.sqr(b),y.mulByNonresidue(y.mul(M,N))),ee=y.sub(y.mulByNonresidue(y.sqr(M)),y.mul(b,N)),Q=y.sub(y.sqr(N),y.mul(b,M)),ne=y.inv(y.add(y.mulByNonresidue(y.add(y.mul(M,ee),y.mul(N,Q))),y.mul(b,L)));return{c0:y.mul(ne,L),c1:y.mul(ne,ee),c2:y.mul(ne,Q)}},fromBytes:b=>{if(b.length!==R.BYTES)throw new Error("fromBytes invalid length="+b.length);return{c0:y.fromBytes(b.subarray(0,y.BYTES)),c1:y.fromBytes(b.subarray(y.BYTES,2*y.BYTES)),c2:y.fromBytes(b.subarray(2*y.BYTES))}},toBytes:({c0:b,c1:N,c2:M})=>Ce(y.toBytes(b),y.toBytes(N),y.toBytes(M)),cmov:({c0:b,c1:N,c2:M},{c0:L,c1:ee,c2:Q},ne)=>({c0:y.cmov(b,L,ne),c1:y.cmov(N,ee,ne),c2:y.cmov(M,Q,ne)}),fromBigSix:b=>{if(!Array.isArray(b)||b.length!==6)throw new Error("invalid Fp6 usage");return{c0:y.fromBigTuple(b.slice(0,2)),c1:y.fromBigTuple(b.slice(2,4)),c2:y.fromBigTuple(b.slice(4,6))}},frobeniusMap:({c0:b,c1:N,c2:M},L)=>({c0:y.frobeniusMap(b,L),c1:y.mul(y.frobeniusMap(N,L),j[L%6]),c2:y.mul(y.frobeniusMap(M,L),D[L%6])}),mulByFp2:({c0:b,c1:N,c2:M},L)=>({c0:y.mul(b,L),c1:y.mul(N,L),c2:y.mul(M,L)}),mulByNonresidue:({c0:b,c1:N,c2:M})=>({c0:y.mulByNonresidue(M),c1:b,c2:N}),mul1:({c0:b,c1:N,c2:M},L)=>({c0:y.mulByNonresidue(y.mul(M,L)),c1:y.mul(b,L),c2:y.mul(N,L)}),mul01({c0:b,c1:N,c2:M},L,ee){let Q=y.mul(b,L),ne=y.mul(N,ee);return{c0:y.add(y.mulByNonresidue(y.sub(y.mul(y.add(N,M),ee),ne)),Q),c1:y.sub(y.sub(y.mul(y.add(L,ee),y.add(b,N)),Q),ne),c2:y.add(y.sub(y.mul(y.add(b,M),L),Q),ne)}}},C=Hi(y,_,r.ORDER,12,1,6)[0],W=({c0:b,c1:N},{c0:M,c1:L})=>({c0:R.add(b,M),c1:R.add(N,L)}),te=({c0:b,c1:N},{c0:M,c1:L})=>({c0:R.sub(b,M),c1:R.sub(N,L)}),re=({c0:b,c1:N},M)=>{if(typeof M=="bigint")return{c0:R.mul(b,M),c1:R.mul(N,M)};let{c0:L,c1:ee}=M,Q=R.mul(b,L),ne=R.mul(N,ee);return{c0:R.add(Q,R.mulByNonresidue(ne)),c1:R.sub(R.mul(R.add(b,N),R.add(L,ee)),R.add(Q,ne))}},U=({c0:b,c1:N})=>{let M=R.mul(b,N);return{c0:R.sub(R.sub(R.mul(R.add(R.mulByNonresidue(N),b),R.add(b,N)),M),R.mulByNonresidue(M)),c1:R.add(M,M)}};function H(b,N){const M=y.sqr(b),L=y.sqr(N);return{first:y.add(y.mulByNonresidue(L),M),second:y.sub(y.sub(y.sqr(y.add(b,N)),M),L)}}const J={ORDER:y.ORDER,isLE:R.isLE,BITS:2*R.BITS,BYTES:2*R.BYTES,MASK:pr(2*R.BITS),ZERO:{c0:R.ZERO,c1:R.ZERO},ONE:{c0:R.ONE,c1:R.ZERO},create:b=>b,isValid:({c0:b,c1:N})=>R.isValid(b)&&R.isValid(N),is0:({c0:b,c1:N})=>R.is0(b)&&R.is0(N),isValidNot0:b=>!J.is0(b)&&J.isValid(b),neg:({c0:b,c1:N})=>({c0:R.neg(b),c1:R.neg(N)}),eql:({c0:b,c1:N},{c0:M,c1:L})=>R.eql(b,M)&&R.eql(N,L),sqrt:zs,inv:({c0:b,c1:N})=>{let M=R.inv(R.sub(R.sqr(b),R.mulByNonresidue(R.sqr(N))));return{c0:R.mul(b,M),c1:R.neg(R.mul(N,M))}},div:(b,N)=>J.mul(b,typeof N=="bigint"?r.inv(r.create(N)):J.inv(N)),pow:(b,N)=>kn(J,b,N),invertBatch:b=>yr(J,b),add:W,sub:te,mul:re,sqr:U,addN:W,subN:te,mulN:re,sqrN:U,fromBytes:b=>{if(b.length!==J.BYTES)throw new Error("fromBytes invalid length="+b.length);return{c0:R.fromBytes(b.subarray(0,R.BYTES)),c1:R.fromBytes(b.subarray(R.BYTES))}},toBytes:({c0:b,c1:N})=>Ce(R.toBytes(b),R.toBytes(N)),cmov:({c0:b,c1:N},{c0:M,c1:L},ee)=>({c0:R.cmov(b,M,ee),c1:R.cmov(N,L,ee)}),fromBigTwelve:b=>({c0:R.fromBigSix(b.slice(0,6)),c1:R.fromBigSix(b.slice(6,12))}),frobeniusMap(b,N){const{c0:M,c1:L,c2:ee}=R.frobeniusMap(b.c1,N),Q=C[N%12];return{c0:R.frobeniusMap(b.c0,N),c1:R.create({c0:y.mul(M,Q),c1:y.mul(L,Q),c2:y.mul(ee,Q)})}},mulByFp2:({c0:b,c1:N},M)=>({c0:R.mulByFp2(b,M),c1:R.mulByFp2(N,M)}),conjugate:({c0:b,c1:N})=>({c0:b,c1:R.neg(N)}),mul014:({c0:b,c1:N},M,L,ee)=>{let Q=R.mul01(b,M,L),ne=R.mul1(N,ee);return{c0:R.add(R.mulByNonresidue(ne),Q),c1:R.sub(R.sub(R.mul01(R.add(N,b),M,y.add(L,ee)),Q),ne)}},mul034:({c0:b,c1:N},M,L,ee)=>{const Q=R.create({c0:y.mul(b.c0,M),c1:y.mul(b.c1,M),c2:y.mul(b.c2,M)}),ne=R.mul01(N,L,ee),he=R.mul01(R.add(b,N),y.add(M,L),ee);return{c0:R.add(R.mulByNonresidue(ne),Q),c1:R.sub(he,R.add(Q,ne))}},_cyclotomicSquare:t.Fp12cyclotomicSquare,_cyclotomicExp:t.Fp12cyclotomicExp,finalExponentiate:t.Fp12finalExponentiate};return{Fp:r,Fp2:y,Fp6:R,Fp12:J,Fp4Square:H}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const rt=BigInt(0),oi=BigInt(1),We=BigInt(2),gi=BigInt(3),un=BigInt(4),Dt=BigInt("0xd201000000010000"),E0=$r(Dt),xr={p:BigInt("0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab"),n:BigInt("0x73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001"),h:BigInt("0x396c8c005555e1568c00aaab0000aaab"),a:rt,b:un,Gx:BigInt("0x17f1d3a73197d7942695638c4fa9ac0fc3688c4f9774b905a14e3a3f171bac586c55e83ff97a1aeffb3af00adb22c6bb"),Gy:BigInt("0x08b3f481e3aaa0f1a09e30ed741d8ae4fcf5e095d5d00af600db18cb2c04b3edd03cc744a2888ae40caa232946c5e7e1")},B0=rr(xr.n,{modOnDecode:!0}),{Fp:pe,Fp2:le,Fp6:cs,Fp4Square:ji,Fp12:Ee}=x0({ORDER:xr.p,FP2_NONRESIDUE:[oi,oi],Fp2mulByB:({c0:t,c1:e})=>{const r=pe.mul(t,un),n=pe.mul(e,un);return{c0:pe.sub(r,n),c1:pe.add(r,n)}},Fp12cyclotomicSquare:({c0:t,c1:e})=>{const{c0:r,c1:n,c2:i}=t,{c0:u,c1:f,c2:o}=e,{first:w,second:g}=ji(r,f),{first:S,second:T}=ji(u,i),{first:x,second:_}=ji(n,o),y=le.mulByNonresidue(_);return{c0:cs.create({c0:le.add(le.mul(le.sub(w,r),We),w),c1:le.add(le.mul(le.sub(S,n),We),S),c2:le.add(le.mul(le.sub(x,i),We),x)}),c1:cs.create({c0:le.add(le.mul(le.add(y,u),We),y),c1:le.add(le.mul(le.add(g,f),We),g),c2:le.add(le.mul(le.add(T,o),We),T)})}},Fp12cyclotomicExp(t,e){let r=Ee.ONE;for(let n=E0-1;n>=0;n--)r=Ee._cyclotomicSquare(r),Zf(e,n)&&(r=Ee.mul(r,t));return r},Fp12finalExponentiate:t=>{const e=Dt,r=Ee.div(Ee.frobeniusMap(t,6),t),n=Ee.mul(Ee.frobeniusMap(r,2),r),i=Ee.conjugate(Ee._cyclotomicExp(n,e)),u=Ee.mul(Ee.conjugate(Ee._cyclotomicSquare(n)),i),f=Ee.conjugate(Ee._cyclotomicExp(u,e)),o=Ee.conjugate(Ee._cyclotomicExp(f,e)),w=Ee.mul(Ee.conjugate(Ee._cyclotomicExp(o,e)),Ee._cyclotomicSquare(i)),g=Ee.conjugate(Ee._cyclotomicExp(w,e)),S=Ee.frobeniusMap(Ee.mul(i,o),2),T=Ee.frobeniusMap(Ee.mul(f,n),3),x=Ee.frobeniusMap(Ee.mul(w,Ee.conjugate(n)),1),_=Ee.mul(Ee.mul(g,Ee.conjugate(u)),n);return Ee.mul(Ee.mul(Ee.mul(S,T),x),_)}}),{G2psi:so,G2psi2:A0}=_0(pe,le,le.div(le.ONE,le.NONRESIDUE)),Yi=Object.freeze({DST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",encodeDST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",p:pe.ORDER,m:2,k:128,expand:"xmd",hash:ys}),Ts={p:le.ORDER,n:xr.n,h:BigInt("0x5d543a95414e7f1091d50792876a202cd91de4547085abaa68a205b2e5a7ddfa628f1cb4d9e82ef21537e293a6691ae1616ec6e786f0c70cf1c38e31c7238e5"),a:le.ZERO,b:le.fromBigTuple([un,un]),Gx:le.fromBigTuple([BigInt("0x024aa2b2f08f0a91260805272dc51051c6e47ad4fa403b02b4510b647ae3d1770bac0326a805bbefd48056c8c121bdb8"),BigInt("0x13e02b6052719f607dacd3a088274f65596bd0d09920b61ab5da61bbdc7f5049334cf11213945d57e5ac7d055d042b7e")]),Gy:le.fromBigTuple([BigInt("0x0ce5d527727d6e118cc9cdc6da2e351aadfd9baa8cbdd3a76d429a695160d12c923ac9cc3baca289e193548608b82801"),BigInt("0x0606c4a02ea734cc32acd2b02bc28b99cb3e287e85a763af267492ab572e99ab3f370d275cec1da1aaa9075ff05f79be")])},mi=gn(pe.toBytes(rt),{infinity:!0,compressed:!0});function bi(t){t=t.slice();const e=t[0]&224,r=!!(e>>7&1),n=!!(e>>6&1),i=!!(e>>5&1);return t[0]&=31,{compressed:r,infinity:n,sort:i,value:t}}function gn(t,e){if(t[0]&224)throw new Error("setMask: non-empty mask");return e.compressed&&(t[0]|=128),e.infinity&&(t[0]|=64),e.sort&&(t[0]|=32),t}function v0(t,e,r){const{BYTES:n,ORDER:i}=pe,u=e.is0(),{x:f,y:o}=e.toAffine();if(r){if(u)return mi.slice();const w=!!(o*We/i);return gn(Xe(f,n),{compressed:!0,sort:w})}else return u?Ce(Uint8Array.of(64),new Uint8Array(2*n-1)):Ce(Xe(f,n),Xe(o,n))}function Zi(t){t.assertValidity();const{BYTES:e,ORDER:r}=pe,{x:n,y:i}=t.toAffine();if(t.is0())return mi.slice();const u=!!(i*We/r);return gn(Xe(n,e),{compressed:!0,sort:u})}function T0(t){const{compressed:e,infinity:r,sort:n,value:i}=bi(t),{BYTES:u,ORDER:f}=pe;if(i.length===48&&e){const o=Ot(i),w=pe.create(o&pe.MASK);if(r){if(w!==rt)throw new Error("invalid G1 point: non-empty, at infinity, with compression");return{x:rt,y:rt}}const g=pe.add(pe.pow(w,gi),pe.create(xr.b));let S=pe.sqrt(g);if(!S)throw new Error("invalid G1 point: compressed point");return S*We/f!==BigInt(n)&&(S=pe.neg(S)),{x:pe.create(w),y:pe.create(S)}}else if(i.length===96&&!e){const o=Ot(i.subarray(0,u)),w=Ot(i.subarray(u));if(r){if(o!==rt||w!==rt)throw new Error("G1: non-empty point at infinity");return _i.G1.Point.ZERO.toAffine()}return{x:pe.create(o),y:pe.create(w)}}else throw new Error("invalid G1 point: expected 48/96 bytes")}function oo(t){const{infinity:e,sort:r,value:n}=bi(ct("signatureHex",t,48)),i=pe.ORDER,u=_i.G1.Point,f=Ot(n);if(e)return u.ZERO;const o=pe.create(f&pe.MASK),w=pe.add(pe.pow(o,gi),pe.create(xr.b));let g=pe.sqrt(w);if(!g)throw new Error("invalid G1 point: compressed");const S=BigInt(r);g*We/i!==S&&(g=pe.neg(g));const T=u.fromAffine({x:o,y:g});return T.assertValidity(),T}function S0(t,e,r){const{BYTES:n,ORDER:i}=pe,u=e.is0(),{x:f,y:o}=e.toAffine();if(r){if(u)return Ce(mi,Xe(rt,n));const w=!!(o.c1===rt?o.c0*We/i:o.c1*We/i);return Ce(gn(Xe(f.c1,n),{compressed:!0,sort:w}),Xe(f.c0,n))}else{if(u)return Ce(Uint8Array.of(64),new Uint8Array(4*n-1));const{re:w,im:g}=le.reim(f),{re:S,im:T}=le.reim(o);return Ce(Xe(g,n),Xe(w,n),Xe(T,n),Xe(S,n))}}function Ki(t){t.assertValidity();const{BYTES:e}=pe;if(t.is0())return Ce(mi,Xe(rt,e));const{x:r,y:n}=t.toAffine(),{re:i,im:u}=le.reim(r),{re:f,im:o}=le.reim(n),g=!!((o>rt?o*We:f*We)/pe.ORDER&oi),S=i;return Ce(gn(Xe(u,e),{sort:g,compressed:!0}),Xe(S,e))}function N0(t){const{BYTES:e,ORDER:r}=pe,{compressed:n,infinity:i,sort:u,value:f}=bi(t);if(!n&&!i&&u||!n&&i&&u||u&&i&&n)throw new Error("invalid encoding flag: "+(t[0]&224));const o=(w,g,S)=>Ot(w.slice(g,S));if(f.length===96&&n){if(i){if(f.reduce((y,$)=>y!==0?$+1:$,0)>0)throw new Error("invalid G2 point: compressed");return{x:le.ZERO,y:le.ZERO}}const w=o(f,0,e),g=o(f,e,2*e),S=le.create({c0:pe.create(g),c1:pe.create(w)}),T=le.add(le.pow(S,gi),Ts.b);let x=le.sqrt(T);const _=x.c1===rt?x.c0*We/r:x.c1*We/r?oi:rt;return x=u&&_>0?x:le.neg(x),{x:S,y:x}}else if(f.length===192&&!n){if(i){if(f.reduce((x,_)=>x!==0?_+1:_,0)>0)throw new Error("invalid G2 point: uncompressed");return{x:le.ZERO,y:le.ZERO}}const w=o(f,0*e,1*e),g=o(f,1*e,2*e),S=o(f,2*e,3*e),T=o(f,3*e,4*e);return{x:le.fromBigTuple([g,w]),y:le.fromBigTuple([T,S])}}else throw new Error("invalid G2 point: expected 96/192 bytes")}function ao(t){const{ORDER:e}=pe,{infinity:r,sort:n,value:i}=bi(ct("signatureHex",t)),u=_i.G2.Point,f=i.length/2;if(f!==48&&f!==96)throw new Error("invalid compressed signature length, expected 96/192 bytes");const o=Ot(i.slice(0,f)),w=Ot(i.slice(f));if(r)return u.ZERO;const g=pe.create(o&pe.MASK),S=pe.create(w),T=le.create({c0:S,c1:g}),x=le.add(le.pow(T,gi),Ts.b);let _=le.sqrt(x);if(!_)throw new Error("Failed to find a square root");const{re:y,im:$}=le.reim(_),q=BigInt(n),X=$>rt&&$*We/e!==q,K=$===rt&&y*We/e!==q;(X||K)&&(_=le.neg(_));const j=u.fromAffine({x:T,y:_});return j.assertValidity(),j}const _i=b0({fields:{Fp:pe,Fp2:le,Fp6:cs,Fp12:Ee,Fr:B0},G1:{...xr,Fp:pe,htfDefaults:{...Yi,m:1,DST:"BLS_SIG_BLS12381G1_XMD:SHA-256_SSWU_RO_NUL_"},wrapPrivateKey:!0,allowInfinityPoint:!0,isTorsionFree:(t,e)=>{const r=BigInt("0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffe"),n=new t(pe.mul(e.X,r),e.Y,e.Z);return e.multiplyUnsafe(Dt).negate().multiplyUnsafe(Dt).equals(n)},clearCofactor:(t,e)=>e.multiplyUnsafe(Dt).add(e),mapToCurve:F0,fromBytes:T0,toBytes:v0,ShortSignature:{fromBytes(t){return nt(t),oo(t)},fromHex(t){return oo(t)},toBytes(t){return Zi(t)},toRawBytes(t){return Zi(t)},toHex(t){return Vr(Zi(t))}}},G2:{...Ts,Fp:le,hEff:BigInt("0xbc69f08f2ee75b3584c6a0ea91b352888e2a8e9145ad7689986ff031508ffe1329c2f178731db956d82bf015d1212b02ec0ec69d7477c1ae954cbc06689f6a359894c0adebbf6b4e8020005aaa95551"),htfDefaults:{...Yi},wrapPrivateKey:!0,allowInfinityPoint:!0,mapToCurve:M0,isTorsionFree:(t,e)=>e.multiplyUnsafe(Dt).negate().equals(so(t,e)),clearCofactor:(t,e)=>{const r=Dt;let n=e.multiplyUnsafe(r).negate(),i=so(t,e),u=e.double();return u=A0(t,u),u=u.subtract(i),i=n.add(i),i=i.multiplyUnsafe(r).negate(),u=u.add(i),u=u.subtract(n),u.subtract(e)},fromBytes:N0,toBytes:S0,Signature:{fromBytes(t){return nt(t),ao(t)},fromHex(t){return ao(t)},toBytes(t){return Ki(t)},toRawBytes(t){return Ki(t)},toHex(t){return Vr(Ki(t))}}},params:{ateLoopSize:Dt,r:xr.n,xNegative:!0,twistType:"multiplicative"},htfDefaults:Yi,hash:ys}),I0=ic(le,[[["0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6"],["0x0","0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71a"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71e","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38d"],["0x171d6541fa38ccfaed6dea691f5fb614cb14b4e7f4e810aa22d6108f142b85757098e38d0f671c7188e2aaaaaaaa5ed1","0x0"]],[["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa63"],["0xc","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa9f"],["0x1","0x0"]],[["0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706","0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706"],["0x0","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97be"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71c","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38f"],["0x124c9ad43b6cf79bfbf7043de3811ad0761b0f37a1e26286b0e977c69aa274524e79097a56dc4bd9e1b371c71c718b10","0x0"]],[["0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb"],["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa9d3"],["0x12","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa99"],["0x1","0x0"]]].map(t=>t.map(e=>le.fromBigTuple(e.map(BigInt))))),R0=ic(pe,[["0x11a05f2b1e833340b809101dd99815856b303e88a2d7005ff2627b56cdb4e2c85610c2d5f2e62d6eaeac1662734649b7","0x17294ed3e943ab2f0588bab22147a81c7c17e75b2f6a8417f565e33c70d1e86b4838f2a6f318c356e834eef1b3cb83bb","0xd54005db97678ec1d1048c5d10a9a1bce032473295983e56878e501ec68e25c958c3e3d2a09729fe0179f9dac9edcb0","0x1778e7166fcc6db74e0609d307e55412d7f5e4656a8dbf25f1b33289f1b330835336e25ce3107193c5b388641d9b6861","0xe99726a3199f4436642b4b3e4118e5499db995a1257fb3f086eeb65982fac18985a286f301e77c451154ce9ac8895d9","0x1630c3250d7313ff01d1201bf7a74ab5db3cb17dd952799b9ed3ab9097e68f90a0870d2dcae73d19cd13c1c66f652983","0xd6ed6553fe44d296a3726c38ae652bfb11586264f0f8ce19008e218f9c86b2a8da25128c1052ecaddd7f225a139ed84","0x17b81e7701abdbe2e8743884d1117e53356de5ab275b4db1a682c62ef0f2753339b7c8f8c8f475af9ccb5618e3f0c88e","0x80d3cf1f9a78fc47b90b33563be990dc43b756ce79f5574a2c596c928c5d1de4fa295f296b74e956d71986a8497e317","0x169b1f8e1bcfa7c42e0c37515d138f22dd2ecb803a0c5c99676314baf4bb1b7fa3190b2edc0327797f241067be390c9e","0x10321da079ce07e272d8ec09d2565b0dfa7dccdde6787f96d50af36003b14866f69b771f8c285decca67df3f1605fb7b","0x6e08c248e260e70bd1e962381edee3d31d79d7e22c837bc23c0bf1bc24c6b68c24b1b80b64d391fa9c8ba2e8ba2d229"],["0x8ca8d548cff19ae18b2e62f4bd3fa6f01d5ef4ba35b48ba9c9588617fc8ac62b558d681be343df8993cf9fa40d21b1c","0x12561a5deb559c4348b4711298e536367041e8ca0cf0800c0126c2588c48bf5713daa8846cb026e9e5c8276ec82b3bff","0xb2962fe57a3225e8137e629bff2991f6f89416f5a718cd1fca64e00b11aceacd6a3d0967c94fedcfcc239ba5cb83e19","0x3425581a58ae2fec83aafef7c40eb545b08243f16b1655154cca8abc28d6fd04976d5243eecf5c4130de8938dc62cd8","0x13a8e162022914a80a6f1d5f43e7a07dffdfc759a12062bb8d6b44e833b306da9bd29ba81f35781d539d395b3532a21e","0xe7355f8e4e667b955390f7f0506c6e9395735e9ce9cad4d0a43bcef24b8982f7400d24bc4228f11c02df9a29f6304a5","0x772caacf16936190f3e0c63e0596721570f5799af53a1894e2e073062aede9cea73b3538f0de06cec2574496ee84a3a","0x14a7ac2a9d64a8b230b3f5b074cf01996e7f63c21bca68a81996e1cdf9822c580fa5b9489d11e2d311f7d99bbdcc5a5e","0xa10ecf6ada54f825e920b3dafc7a3cce07f8d1d7161366b74100da67f39883503826692abba43704776ec3a79a1d641","0x95fc13ab9e92ad4476d6e3eb3a56680f682b4ee96f7d03776df533978f31c1593174e4b4b7865002d6384d168ecdd0a","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"],["0x90d97c81ba24ee0259d1f094980dcfa11ad138e48a869522b52af6c956543d3cd0c7aee9b3ba3c2be9845719707bb33","0x134996a104ee5811d51036d776fb46831223e96c254f383d0f906343eb67ad34d6c56711962fa8bfe097e75a2e41c696","0xcc786baa966e66f4a384c86a3b49942552e2d658a31ce2c344be4b91400da7d26d521628b00523b8dfe240c72de1f6","0x1f86376e8981c217898751ad8746757d42aa7b90eeb791c09e4a3ec03251cf9de405aba9ec61deca6355c77b0e5f4cb","0x8cc03fdefe0ff135caf4fe2a21529c4195536fbe3ce50b879833fd221351adc2ee7f8dc099040a841b6daecf2e8fedb","0x16603fca40634b6a2211e11db8f0a6a074a7d0d4afadb7bd76505c3d3ad5544e203f6326c95a807299b23ab13633a5f0","0x4ab0b9bcfac1bbcb2c977d027796b3ce75bb8ca2be184cb5231413c4d634f3747a87ac2460f415ec961f8855fe9d6f2","0x987c8d5333ab86fde9926bd2ca6c674170a05bfe3bdd81ffd038da6c26c842642f64550fedfe935a15e4ca31870fb29","0x9fc4018bd96684be88c9e221e4da1bb8f3abd16679dc26c1e8b6e6a1f20cabe69d65201c78607a360370e577bdba587","0xe1bba7a1186bdb5223abde7ada14a23c42a0ca7915af6fe06985e7ed1e4d43b9b3f7055dd4eba6f2bafaaebca731c30","0x19713e47937cd1be0dfd0b8f1d43fb93cd2fcbcb6caf493fd1183e416389e61031bf3a5cce3fbafce813711ad011c132","0x18b46a908f36f6deb918c143fed2edcc523559b8aaf0c2462e6bfe7f911f643249d9cdf41b44d606ce07c8a4d0074d8e","0xb182cac101b9399d155096004f53f447aa7b12a3426b08ec02710e807b4633f06c851c1919211f20d4c04f00b971ef8","0x245a394ad1eca9b72fc00ae7be315dc757b3b080d4c158013e6632d3c40659cc6cf90ad1c232a6442d9d3f5db980133","0x5c129645e44cf1102a159f748c4a3fc5e673d81d7e86568d9ab0f5d396a7ce46ba1049b6579afb7866b1e715475224b","0x15e6be4e990f03ce4ea50b3b42df2eb5cb181d8f84965a3957add4fa95af01b2b665027efec01c7704b456be69c8b604"],["0x16112c4c3a9c98b252181140fad0eae9601a6de578980be6eec3232b5be72e7a07f3688ef60c206d01479253b03663c1","0x1962d75c2381201e1a0cbd6c43c348b885c84ff731c4d59ca4a10356f453e01f78a4260763529e3532f6102c2e49a03d","0x58df3306640da276faaae7d6e8eb15778c4855551ae7f310c35a5dd279cd2eca6757cd636f96f891e2538b53dbf67f2","0x16b7d288798e5395f20d23bf89edb4d1d115c5dbddbcd30e123da489e726af41727364f2c28297ada8d26d98445f5416","0xbe0e079545f43e4b00cc912f8228ddcc6d19c9f0f69bbb0542eda0fc9dec916a20b15dc0fd2ededda39142311a5001d","0x8d9e5297186db2d9fb266eaac783182b70152c65550d881c5ecd87b6f0f5a6449f38db9dfa9cce202c6477faaf9b7ac","0x166007c08a99db2fc3ba8734ace9824b5eecfdfa8d0cf8ef5dd365bc400a0051d5fa9c01a58b1fb93d1a1399126a775c","0x16a3ef08be3ea7ea03bcddfabba6ff6ee5a4375efa1f4fd7feb34fd206357132b920f5b00801dee460ee415a15812ed9","0x1866c8ed336c61231a1be54fd1d74cc4f9fb0ce4c6af5920abc5750c4bf39b4852cfe2f7bb9248836b233d9d55535d4a","0x167a55cda70a6e1cea820597d94a84903216f763e13d87bb5308592e7ea7d4fbc7385ea3d529b35e346ef48bb8913f55","0x4d2f259eea405bd48f010a01ad2911d9c6dd039bb61a6290e591b36e636a5c871a5c29f4f83060400f8b49cba8f6aa8","0xaccbb67481d033ff5852c1e48c50c477f94ff8aefce42d28c0f9a88cea7913516f968986f7ebbea9684b529e2561092","0xad6b9514c767fe3c3613144b45f1496543346d98adf02267d5ceef9a00d9b8693000763e3b90ac11e99b138573345cc","0x2660400eb2e4f3b628bdd0d53cd76f2bf565b94e72927c1cb748df27942480e420517bd8714cc80d1fadc1326ed06f7","0xe0fa1d816ddc03e6b24255e0d7819c171c40f65e273b853324efcd6356caa205ca2f570f13497804415473a1d634b8f","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"]].map(t=>t.map(e=>BigInt(e)))),U0=oc(pe,{A:pe.create(BigInt("0x144698a3b8e9433d693a02c96d4982b0ea985383ee66a8d8e8981aefd881ac98936f8da0e0f97f5cf428082d584c1d")),B:pe.create(BigInt("0x12e2908d11688030018b12e8753eee3b2016c1f0f24f4070a0b9c14fcef35ef55a23215a316ceaa5d1cc48e98e172be0")),Z:pe.create(BigInt(11))}),O0=oc(le,{A:le.create({c0:pe.create(rt),c1:pe.create(BigInt(240))}),B:le.create({c0:pe.create(BigInt(1012)),c1:pe.create(BigInt(1012))}),Z:le.create({c0:pe.create(BigInt(-2)),c1:pe.create(BigInt(-1))})});function F0(t){const{x:e,y:r}=U0(pe.create(t[0]));return R0(e,r)}function M0(t){const{x:e,y:r}=O0(le.fromBigTuple(t));return I0(e,r)}function k0(t,e,r){const n=typeof t=="string"?t:ze(t),i=typeof e=="string"?e:ze(e),u=typeof r=="string"?r:ze(r);return _i.verifyShortSignature(i,u,n)}const ac=t=>Ke(new Zr(t)),Ss=t=>{const e=ac(t);return new Date(Number(e)/1e6)};var P0=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},$0=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Pn;class Nt extends ke{constructor(e){super(`Invalid certificate: ${e}`)}}var ft;(function(t){t[t.Empty=0]="Empty",t[t.Fork=1]="Fork",t[t.Labeled=2]="Labeled",t[t.Leaf=3]="Leaf",t[t.Pruned=4]="Pruned"})(ft||(ft={}));function C0(t,e){const r=new Uint8Array(t),n=new Uint8Array(e);for(let i=0;i<r.length;i++)if(r[i]>n[i])return!0;return!1}class wr{constructor(e,r,n,i,u=5,f=!1){this._rootKey=r,this._canisterId=n,this._blsVerify=i,this._maxAgeInMinutes=u,Pn.set(this,!1),P0(this,Pn,f,"f"),this.cert=Vt(new Uint8Array(e))}static async create(e){const r=wr.createUnverified(e);return await r.verify(),r}static createUnverified(e){let r=e.blsVerify;return r||(r=k0),new wr(e.certificate,e.rootKey,e.canisterId,r,e.maxAgeInMinutes,e.disableTimeVerification)}lookup(e){return Yr(e,this.cert.tree)}lookup_label(e){return this.lookup([e])}async verify(){const e=await $n(this.cert.tree),r=await this._checkDelegationAndGetKey(this.cert.delegation),n=this.cert.signature,i=G0(r),u=Ut(Qr("ic-state-root"),e);let f=!1;const o=dt(this.lookup(["time"]));if(!o)throw new Nt("Certificate does not contain a time");if(!$0(this,Pn,"f")){const g=this._maxAgeInMinutes*60*1e3,S=Date.now(),T=S-g,x=S+3e5,_=Ss(o);if(_.getTime()<T)throw new Nt(`Certificate is signed more than ${this._maxAgeInMinutes} minutes in the past. Certificate time: `+_.toISOString()+" Current time: "+new Date(S).toISOString());if(_.getTime()>x)throw new Nt("Certificate is signed more than 5 minutes in the future. Certificate time: "+_.toISOString()+" Current time: "+new Date(S).toISOString())}try{f=await this._blsVerify(new Uint8Array(i),new Uint8Array(n),new Uint8Array(u))}catch{f=!1}if(!f)throw new Nt("Signature verification failed")}async _checkDelegationAndGetKey(e){if(!e)return this._rootKey;const r=await wr.createUnverified({certificate:e.certificate,rootKey:this._rootKey,canisterId:this._canisterId,blsVerify:this._blsVerify,maxAgeInMinutes:1/0});if(r.cert.delegation)throw new Nt("Delegation certificates cannot be nested");if(await r.verify(),this._canisterId.toString()!==pl&&!cc({canisterId:this._canisterId,subnetId:_e.fromUint8Array(new Uint8Array(e.subnet_id)),tree:r.cert.tree}))throw new Nt(`Canister ${this._canisterId} not in range of delegations for subnet 0x${ze(e.subnet_id)}`);const n=dt(r.lookup(["subnet",e.subnet_id,"public_key"]));if(!n)throw new Error(`Could not find subnet key for subnet 0x${ze(e.subnet_id)}`);return n}}Pn=new WeakMap;const Wr=Jn("308182301d060d2b0601040182dc7c0503010201060c2b0601040182dc7c05030201036100"),q0=96;function G0(t){const e=Wr.byteLength+q0;if(t.byteLength!==e)throw new TypeError(`BLS DER-encoded public key must be ${e} bytes long`);const r=t.slice(0,Wr.byteLength);if(!ai(r,Wr))throw new TypeError(`BLS DER-encoded public key is invalid. Expect the following prefix: ${Wr}, but get ${r}`);return t.slice(Wr.byteLength)}function dt(t){if(t.status===He.Found){if(t.value instanceof ArrayBuffer)return t.value;if(t.value instanceof Uint8Array)return t.value.buffer}}async function $n(t){switch(t[0]){case ft.Empty:return bt(Qr("ic-hashtree-empty"));case ft.Pruned:return t[1];case ft.Leaf:return bt(Ut(Qr("ic-hashtree-leaf"),t[1]));case ft.Labeled:return bt(Ut(Qr("ic-hashtree-labeled"),t[1],await $n(t[2])));case ft.Fork:return bt(Ut(Qr("ic-hashtree-fork"),await $n(t[1]),await $n(t[2])));default:throw new Error("unreachable")}}function Qr(t){const e=new Uint8Array([t.length]),r=new TextEncoder().encode(t);return Ut(e,r)}var He;(function(t){t.Unknown="unknown",t.Absent="absent",t.Found="found"})(He||(He={}));var qt;(function(t){t.Less="less",t.Greater="greater"})(qt||(qt={}));function Yr(t,e){if(t.length===0)switch(e[0]){case ft.Leaf:{if(!e[1])throw new Error("Invalid tree structure for leaf");return e[1]instanceof ArrayBuffer?{status:He.Found,value:e[1]}:e[1]instanceof Uint8Array?{status:He.Found,value:e[1].buffer}:{status:He.Found,value:e[1]}}default:return{status:He.Found,value:e}}const r=typeof t[0]=="string"?new TextEncoder().encode(t[0]):t[0],n=Cn(r,e);switch(n.status){case He.Found:return Yr(t.slice(1),n.value);case qt.Greater:case qt.Less:return{status:He.Absent};default:return n}}function us(t){switch(t[0]){case ft.Empty:return[];case ft.Fork:return us(t[1]).concat(us(t[2]));default:return[t]}}function Cn(t,e){switch(e[0]){case ft.Labeled:return C0(t,e[1])?{status:qt.Greater}:ai(t,e[1])?{status:He.Found,value:e[2]}:{status:qt.Less};case ft.Fork:const r=Cn(t,e[1]);switch(r.status){case qt.Greater:{const n=Cn(t,e[2]);return n.status===qt.Less?{status:He.Absent}:n}case He.Unknown:{let n=Cn(t,e[2]);return n.status===qt.Less?{status:He.Unknown}:n}default:return r}case ft.Pruned:return{status:He.Unknown};default:return{status:He.Absent}}}function cc(t){const{canisterId:e,subnetId:r,tree:n}=t,i=Yr(["subnet",r.toUint8Array(),"canister_ranges"],n);if(i.status!==He.Found||!(i.value instanceof ArrayBuffer))throw new Error(`Could not find canister ranges for subnet ${r}`);return Vt(i.value).map(w=>[_e.fromUint8Array(w[0]),_e.fromUint8Array(w[1])]).some(w=>w[0].ltEq(e)&&w[1].gtEq(e))}class V0{constructor(e,r,n){this.key=e,this.path=r,this.decodeStrategy=n}}const uc=async t=>{const{agent:e,paths:r}=t,n=_e.from(t.canisterId),i=[...new Set(r)],u=i.map(w=>fs(w,n)),f=new Map,o=i.map((w,g)=>(async()=>{var S;try{const T=await e.readState(n,{paths:[u[g]]});if(e.rootKey==null)throw new Error("Agent is missing root key");const x=await wr.create({certificate:T.certificate,rootKey:e.rootKey,canisterId:n,disableTimeVerification:!0}),_=(q,X)=>{if(X==="subnet"){if(e.rootKey==null)throw new Error("Agent is missing root key");const K=fc(T.certificate,n,e.rootKey);return{path:X,data:K}}else return{path:X,data:dt(q.lookup(fs(X,n)))}},{path:y,data:$}=_(x,i[g]);if(!$)console.warn(`Expected to find result for path ${y}, but instead found nothing.`),typeof y=="string"?f.set(y,null):f.set(y.key,null);else switch(y){case"time":{f.set(y,Ss($));break}case"controllers":{f.set(y,j0($));break}case"module_hash":{f.set(y,co($));break}case"subnet":{f.set(y,$);break}case"candid":{f.set(y,new TextDecoder().decode($));break}default:if(typeof y!="string"&&"key"in y&&"path"in y)switch(y.decodeStrategy){case"raw":f.set(y.key,$);break;case"leb128":{f.set(y.key,ac($));break}case"cbor":{f.set(y.key,lc($));break}case"hex":{f.set(y.key,co($));break}case"utf-8":f.set(y.key,H0($))}}}catch(T){if(!((S=T==null?void 0:T.message)===null||S===void 0)&&S.includes("Invalid certificate"))throw new ke(T.message);typeof w!="string"&&"key"in w&&"path"in w?f.set(w.key,null):f.set(w,null),console.group(),console.warn(`Expected to find result for path ${w}, but instead found nothing.`),console.warn(T),console.groupEnd()}})());return await Promise.all(o),f},fc=(t,e,r)=>{if(!e._isPrincipal)throw new Error("Invalid canisterId");const n=Vt(new Uint8Array(t)),i=n.tree;let u=n.delegation,f;if(u&&u.subnet_id?f=_e.fromUint8Array(new Uint8Array(u.subnet_id)):!u&&typeof r<"u"?(f=_e.selfAuthenticating(new Uint8Array(r)),u={subnet_id:f.toUint8Array(),certificate:new ArrayBuffer(0)}):(f=_e.selfAuthenticating(_e.fromText("tdb26-jop6k-aogll-7ltgs-eruif-6kk7m-qpktf-gdiqx-mxtrf-vb5e6-eqe").toUint8Array()),u={subnet_id:f.toUint8Array(),certificate:new ArrayBuffer(0)}),!cc({canisterId:e,subnetId:f,tree:i}))throw new Error("Canister not in range");const w=Yr(["subnet",u.subnet_id,"node"],i);if(w.status!==He.Found)throw new Error("Node not found");if(w.value instanceof ArrayBuffer)throw new Error("Invalid node tree");const g=us(w.value),S=new Map;return g.forEach(T=>{const x=_e.from(new Uint8Array(T[1])).toText(),_=Yr(["public_key"],T[2]);if(_.status!==He.Found)throw new Error("Public key not found");const y=_.value;if(y.byteLength!==44)throw new Error("Invalid public key length");S.set(x,y)}),{subnetId:_e.fromUint8Array(new Uint8Array(u.subnet_id)).toText(),nodeKeys:S}},fs=(t,e)=>{const r=new TextEncoder,n=u=>new DataView(r.encode(u).buffer).buffer,i=new DataView(e.toUint8Array().buffer).buffer;switch(t){case"time":return[n("time")];case"controllers":return[n("canister"),i,n("controllers")];case"module_hash":return[n("canister"),i,n("module_hash")];case"subnet":return[n("subnet")];case"candid":return[n("canister"),i,n("metadata"),n("candid:service")];default:if("key"in t&&"path"in t)if(typeof t.path=="string"||t.path instanceof ArrayBuffer){const u=t.path,f=typeof u=="string"?n(u):u;return[n("canister"),i,n("metadata"),f]}else return t.path}throw new Error(`An unexpeected error was encountered while encoding your path for canister status. Please ensure that your path, ${t} was formatted correctly.`)},co=t=>ze(t),lc=t=>Vt(t),H0=t=>new TextDecoder().decode(t),j0=t=>lc(t).map(r=>_e.fromUint8Array(new Uint8Array(r))),Y0=Object.freeze(Object.defineProperty({__proto__:null,CustomPath:V0,encodePath:fs,fetchNodeKeys:fc,request:uc},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const At=BigInt(0),Ve=BigInt(1),zi=BigInt(2),Z0=BigInt(8);function K0(t,e,r,n){const i=t.sqr(r),u=t.sqr(n),f=t.add(t.mul(e.a,i),u),o=t.add(t.ONE,t.mul(e.d,t.mul(i,u)));return t.eql(f,o)}function z0(t,e={}){const{Fp:r,Fn:n}=rc("edwards",t,e),{h:i,n:u}=t;wn(e,{},{uvRatio:"function"});const f=zi<<BigInt(n.BYTES*8)-Ve,o=$=>r.create($),w=e.uvRatio||(($,q)=>{try{return{isValid:!0,value:r.sqrt(r.div($,q))}}catch{return{isValid:!1,value:At}}});if(!K0(r,t,t.Gx,t.Gy))throw new Error("bad curve params: generator point");function g($,q,X=!1){const K=X?Ve:At;return Jr("coordinate "+$,q,K,f),q}function S($){if(!($ instanceof _))throw new Error("ExtendedPoint expected")}const T=an(($,q)=>{const{X,Y:K,Z:j}=$,D=$.is0();q==null&&(q=D?Z0:r.inv(j));const R=o(X*q),C=o(K*q),W=r.mul(j,q);if(D)return{x:At,y:Ve};if(W!==Ve)throw new Error("invZ was invalid");return{x:R,y:C}}),x=an($=>{const{a:q,d:X}=t;if($.is0())throw new Error("bad point: ZERO");const{X:K,Y:j,Z:D,T:R}=$,C=o(K*K),W=o(j*j),te=o(D*D),re=o(te*te),U=o(C*q),H=o(te*o(U+W)),J=o(re+o(X*o(C*W)));if(H!==J)throw new Error("bad point: equation left != right (1)");const b=o(K*j),N=o(D*R);if(b!==N)throw new Error("bad point: equation left != right (2)");return!0});class _{constructor(q,X,K,j){this.X=g("x",q),this.Y=g("y",X),this.Z=g("z",K,!0),this.T=g("t",j),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(q){return Ht(_,q)}static msm(q,X){return tc(_,n,q,X)}_setWindowSize(q){this.precompute(q)}static fromAffine(q){if(q instanceof _)throw new Error("extended point not allowed");const{x:X,y:K}=q||{};return g("x",X),g("y",K),new _(X,K,Ve,o(X*K))}precompute(q=8,X=!0){return y.createCache(this,q),X||this.multiply(zi),this}assertValidity(){x(this)}equals(q){S(q);const{X,Y:K,Z:j}=this,{X:D,Y:R,Z:C}=q,W=o(X*C),te=o(D*j),re=o(K*C),U=o(R*j);return W===te&&re===U}is0(){return this.equals(_.ZERO)}negate(){return new _(o(-this.X),this.Y,this.Z,o(-this.T))}double(){const{a:q}=t,{X,Y:K,Z:j}=this,D=o(X*X),R=o(K*K),C=o(zi*o(j*j)),W=o(q*D),te=X+K,re=o(o(te*te)-D-R),U=W+R,H=U-C,J=W-R,b=o(re*H),N=o(U*J),M=o(re*J),L=o(H*U);return new _(b,N,L,M)}add(q){S(q);const{a:X,d:K}=t,{X:j,Y:D,Z:R,T:C}=this,{X:W,Y:te,Z:re,T:U}=q,H=o(j*W),J=o(D*te),b=o(C*K*U),N=o(R*re),M=o((j+D)*(W+te)-H-J),L=N-b,ee=N+b,Q=o(J-X*H),ne=o(M*L),he=o(ee*Q),oe=o(M*Q),ie=o(L*ee);return new _(ne,he,ie,oe)}subtract(q){return this.add(q.negate())}multiply(q){const X=q;Jr("scalar",X,Ve,u);const{p:K,f:j}=y.cached(this,X,D=>Ht(_,D));return Ht(_,[K,j])[0]}multiplyUnsafe(q,X=_.ZERO){const K=q;return Jr("scalar",K,At,u),K===At?_.ZERO:this.is0()||K===Ve?this:y.unsafe(this,K,j=>Ht(_,j),X)}isSmallOrder(){return this.multiplyUnsafe(i).is0()}isTorsionFree(){return y.unsafe(this,u).is0()}toAffine(q){return T(this,q)}clearCofactor(){return i===Ve?this:this.multiplyUnsafe(i)}static fromBytes(q,X=!1){return nt(q),_.fromHex(q,X)}static fromHex(q,X=!1){const{d:K,a:j}=t,D=r.BYTES;q=ct("pointHex",q,D),sn("zip215",X);const R=q.slice(),C=q[D-1];R[D-1]=C&-129;const W=on(R),te=X?f:r.ORDER;Jr("pointHex.y",W,At,te);const re=o(W*W),U=o(re-Ve),H=o(K*re-j);let{isValid:J,value:b}=w(U,H);if(!J)throw new Error("Point.fromHex: invalid y coordinate");const N=(b&Ve)===Ve,M=(C&128)!==0;if(!X&&b===At&&M)throw new Error("Point.fromHex: x=0 and x_0=1");return M!==N&&(b=o(-b)),_.fromAffine({x:b,y:W})}toBytes(){const{x:q,y:X}=this.toAffine(),K=wi(X,r.BYTES);return K[K.length-1]|=q&Ve?128:0,K}toRawBytes(){return this.toBytes()}toHex(){return Vr(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}_.BASE=new _(t.Gx,t.Gy,Ve,o(t.Gx*t.Gy)),_.ZERO=new _(At,Ve,Ve,At),_.Fp=r,_.Fn=n;const y=new ec(_,n.BYTES*8);return _}function W0(t,e,r){if(typeof e!="function")throw new Error('"hash" function param is required');wn(r,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:n}=r,{BASE:i,Fp:u,Fn:f}=t,o=f.ORDER,w=r.randomBytes||So,g=r.adjustScalarBytes||(H=>H),S=r.domain||((H,J,b)=>{if(sn("phflag",b),J.length||b)throw new Error("Contexts/pre-hash are not supported");return H});function T(H){return f.create(H)}function x(H){return T(on(H))}function _(H){const J=u.BYTES;H=ct("private key",H,J);const b=ct("hashed private key",e(H),2*J),N=g(b.slice(0,J)),M=b.slice(J,2*J),L=x(N);return{head:N,prefix:M,scalar:L}}function y(H){const{head:J,prefix:b,scalar:N}=_(H),M=i.multiply(N),L=M.toBytes();return{head:J,prefix:b,scalar:N,point:M,pointBytes:L}}function $(H){return y(H).pointBytes}function q(H=Uint8Array.of(),...J){const b=Ce(...J);return x(e(S(b,ct("context",H),!!n)))}function X(H,J,b={}){H=ct("message",H),n&&(H=n(H));const{prefix:N,scalar:M,pointBytes:L}=y(J),ee=q(b.context,N,H),Q=i.multiply(ee).toBytes(),ne=q(b.context,Q,L,H),he=T(ee+ne*M);Jr("signature.s",he,At,o);const oe=u.BYTES,ie=Ce(Q,wi(he,oe));return ct("result",ie,oe*2)}const K={zip215:!0};function j(H,J,b,N=K){const{context:M,zip215:L}=N,ee=u.BYTES;H=ct("signature",H,2*ee),J=ct("message",J),b=ct("publicKey",b,ee),L!==void 0&&sn("zip215",L),n&&(J=n(J));const Q=on(H.slice(ee,2*ee));let ne,he,oe;try{ne=t.fromHex(b,L),he=t.fromHex(H.slice(0,ee),L),oe=i.multiplyUnsafe(Q)}catch{return!1}if(!L&&ne.isSmallOrder())return!1;const ie=q(M,he.toBytes(),ne.toBytes(),J);return he.add(ne.multiplyUnsafe(ie)).subtract(oe).clearCofactor().is0()}i.precompute(8);const D=u.BYTES,R={secret:D,public:D,signature:2*D,seed:D};function C(H=w(R.seed)){return H}const W={getExtendedPublicKey:y,randomSecretKey:C,isValidSecretKey:re,isValidPublicKey:U,randomPrivateKey:C,toMontgomery(H){const{y:J}=t.fromBytes(H),b=D===32;if(!b&&D!==57)throw new Error("only defined for 25519 and 448");const N=b?u.div(Ve+J,Ve-J):u.div(J-Ve,J+Ve);return u.toBytes(N)},toMontgomeryPriv(H){nt(H,D);const J=e(H.subarray(0,D));return g(J).subarray(0,D)},precompute(H=8,J=t.BASE){return J.precompute(H,!1)}};function te(H){const J=W.randomSecretKey(H);return{secretKey:J,publicKey:$(J)}}function re(H){try{return!!f.fromBytes(H,!1)}catch{return!1}}function U(H,J){try{return!!t.fromBytes(H,J)}catch{return!1}}return Object.freeze({keygen:te,getPublicKey:$,sign:X,verify:j,utils:W,Point:t,info:{type:"edwards",lengths:R}})}function L0(t){const e={a:t.a,d:t.d,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},r=t.Fp,n=rr(e.n,t.nBitLength,!0),i={Fp:r,Fn:n,uvRatio:t.uvRatio},u={randomBytes:t.randomBytes,adjustScalarBytes:t.adjustScalarBytes,domain:t.domain,prehash:t.prehash,mapToCurve:t.mapToCurve};return{CURVE:e,curveOpts:i,hash:t.hash,eddsaOpts:u}}function X0(t,e){return Object.assign({},e,{ExtendedPoint:e.Point,CURVE:t})}function J0(t){const{CURVE:e,curveOpts:r,hash:n,eddsaOpts:i}=L0(t),u=z0(e,r),f=W0(u,n,i);return X0(t,f)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */BigInt(0);const Q0=BigInt(1),uo=BigInt(2);BigInt(3);const D0=BigInt(5),el=BigInt(8),xi={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:el,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function tl(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),u=xi.p,o=t*t%u*t%u,w=Et(o,uo,u)*o%u,g=Et(w,Q0,u)*t%u,S=Et(g,D0,u)*g%u,T=Et(S,e,u)*S%u,x=Et(T,r,u)*T%u,_=Et(x,n,u)*x%u,y=Et(_,i,u)*_%u,$=Et(y,i,u)*_%u,q=Et($,e,u)*S%u;return{pow_p_5_8:Et(q,uo,u)*t%u,b2:o}}function rl(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const fo=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function nl(t,e){const r=xi.p,n=$e(e*e*e,r),i=$e(n*n*e,r),u=tl(t*i).pow_p_5_8;let f=$e(t*n*u,r);const o=$e(e*f*f,r),w=f,g=$e(f*fo,r),S=o===t,T=o===$e(-t,r),x=o===$e(-t*fo,r);return S&&(f=w),(T||x)&&(f=g),Qf(f,r)&&(f=$e(-f,r)),{isValid:S||T,value:f}}const il=(()=>rr(xi.p,{isLE:!0}))(),sl=(()=>({...xi,Fp:il,hash:vu,adjustScalarBytes:rl,uvRatio:nl}))(),ol=(()=>J0(sl))();var lo=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},ot=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},et,Dr,hc,dc;class al{constructor(e={}){et.set(this,void 0),Dr.set(this,void 0),this[hc]=this.entries.bind(this),this[dc]="ExpirableMap";const{source:r=[],expirationTime:n=10*60*1e3}=e,i=Date.now();lo(this,et,new Map([...r].map(([u,f])=>[u,{value:f,timestamp:i}])),"f"),lo(this,Dr,n,"f")}prune(){const e=Date.now();for(const[r,n]of ot(this,et,"f").entries())e-n.timestamp>ot(this,Dr,"f")&&ot(this,et,"f").delete(r);return this}set(e,r){this.prune();const n={value:r,timestamp:Date.now()};return ot(this,et,"f").set(e,n),this}get(e){const r=ot(this,et,"f").get(e);if(r!==void 0){if(Date.now()-r.timestamp>ot(this,Dr,"f")){ot(this,et,"f").delete(e);return}return r.value}}clear(){ot(this,et,"f").clear()}entries(){const e=ot(this,et,"f").entries();return function*(){for(const[n,i]of e)yield[n,i.value]}()}values(){const e=ot(this,et,"f").values();return function*(){for(const n of e)yield n.value}()}keys(){return ot(this,et,"f").keys()}forEach(e,r){for(const[n,i]of ot(this,et,"f").entries())e.call(r,i.value,n,this)}has(e){return ot(this,et,"f").has(e)}delete(e){return ot(this,et,"f").delete(e)}get size(){return ot(this,et,"f").size}}et=new WeakMap,Dr=new WeakMap,hc=Symbol.iterator,dc=Symbol.toStringTag;const ho=t=>{if(t<=127)return 1;if(t<=255)return 2;if(t<=65535)return 3;if(t<=16777215)return 4;throw new Error("Length too long (> 4 bytes)")},po=(t,e,r)=>{if(r<=127)return t[e]=r,1;if(r<=255)return t[e]=129,t[e+1]=r,2;if(r<=65535)return t[e]=130,t[e+1]=r>>8,t[e+2]=r,3;if(r<=16777215)return t[e]=131,t[e+1]=r>>16,t[e+2]=r>>8,t[e+3]=r,4;throw new Error("Length too long (> 4 bytes)")},ls=(t,e)=>{if(t[e]<128)return 1;if(t[e]===128)throw new Error("Invalid length 0");if(t[e]===129)return 2;if(t[e]===130)return 3;if(t[e]===131)return 4;throw new Error("Length too long (> 4 bytes)")},cl=(t,e)=>{const r=ls(t,e);if(r===1)return t[e];if(r===2)return t[e+1];if(r===3)return(t[e+1]<<8)+t[e+2];if(r===4)return(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];throw new Error("Length too long (> 4 bytes)")};Uint8Array.from([48,12,6,10,43,6,1,4,1,131,184,67,1,1]);const yo=Uint8Array.from([48,5,6,3,43,101,112]);Uint8Array.from([48,16,6,7,42,134,72,206,61,2,1,6,5,43,129,4,0,10]);function ul(t,e){const r=2+ho(t.byteLength+1),n=e.byteLength+r+t.byteLength;let i=0;const u=new Uint8Array(1+ho(n)+n);return u[i++]=48,i+=po(u,i,n),u.set(e,i),i+=e.byteLength,u[i++]=3,i+=po(u,i,t.byteLength+1),u[i++]=0,u.set(new Uint8Array(t),i),u}const fl=(t,e)=>{let r=0;const n=(o,w)=>{if(i[r++]!==o)throw new Error("Expected: "+w)},i=new Uint8Array(t);if(n(48,"sequence"),r+=ls(i,r),!ai(i.slice(r,r+e.byteLength),e))throw new Error("Not the expected OID.");r+=e.byteLength,n(3,"bit string");const u=cl(i,r)-1;r+=ls(i,r),n(0,"0 padding");const f=i.slice(r);if(u!==f.length)throw new Error(`DER payload mismatch: Expected length ${u} actual length ${f.length}`);return f};var wo=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},go=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},qn,Gn;class hr{constructor(e){if(qn.set(this,void 0),Gn.set(this,void 0),e.byteLength!==hr.RAW_KEY_LENGTH)throw new Error("An Ed25519 public key must be exactly 32bytes long");wo(this,qn,e,"f"),wo(this,Gn,hr.derEncode(e),"f")}static from(e){return this.fromDer(e.toDer())}static fromRaw(e){return new hr(e)}static fromDer(e){return new hr(this.derDecode(e))}static derEncode(e){return ul(e,yo).buffer}static derDecode(e){const r=fl(e,yo);if(r.length!==this.RAW_KEY_LENGTH)throw new Error("An Ed25519 public key must be exactly 32bytes long");return r}get rawKey(){return go(this,qn,"f")}get derKey(){return go(this,Gn,"f")}toDer(){return this.derKey}toRaw(){return this.rawKey}}qn=new WeakMap,Gn=new WeakMap;hr.RAW_KEY_LENGTH=32;class ll{constructor(){this.observers=[]}subscribe(e){this.observers.push(e)}unsubscribe(e){this.observers=this.observers.filter(r=>r!==e)}notify(e,...r){this.observers.forEach(n=>n(e,...r))}}class hl extends ll{constructor(){super()}print(e,...r){this.notify({message:e,level:"info"},...r)}warn(e,...r){this.notify({message:e,level:"warn"},...r)}error(e,r,...n){this.notify({message:e,level:"error",error:r},...n)}}var Bt=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},De=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},vt,Vn,Hn,jn,Yn,Zn,Kn,zn,Ir;const pc=.5,yc=1.5,wc=500,gc=6e4,mc=9e5,bc=10;class Ei{constructor(e=Ei.default){vt.set(this,void 0),Vn.set(this,void 0),Hn.set(this,void 0),jn.set(this,void 0),Yn.set(this,void 0),Zn.set(this,void 0),Kn.set(this,void 0),zn.set(this,void 0),Ir.set(this,0);const{initialInterval:r=wc,randomizationFactor:n=pc,multiplier:i=yc,maxInterval:u=gc,maxElapsedTime:f=mc,maxIterations:o=bc,date:w=Date}=e;Bt(this,vt,r,"f"),Bt(this,Vn,n,"f"),Bt(this,Hn,i,"f"),Bt(this,jn,u,"f"),Bt(this,zn,w,"f"),Bt(this,Yn,w.now(),"f"),Bt(this,Zn,f,"f"),Bt(this,Kn,o,"f")}get ellapsedTimeInMsec(){return De(this,zn,"f").now()-De(this,Yn,"f")}get currentInterval(){return De(this,vt,"f")}get count(){return De(this,Ir,"f")}get randomValueFromInterval(){const e=De(this,Vn,"f")*De(this,vt,"f"),r=De(this,vt,"f")-e,n=De(this,vt,"f")+e;return Math.random()*(n-r)+r}incrementCurrentInterval(){var e;return Bt(this,vt,Math.min(De(this,vt,"f")*De(this,Hn,"f"),De(this,jn,"f")),"f"),Bt(this,Ir,(e=De(this,Ir,"f"),e++,e),"f"),De(this,vt,"f")}next(){return this.ellapsedTimeInMsec>=De(this,Zn,"f")||De(this,Ir,"f")>=De(this,Kn,"f")?null:(this.incrementCurrentInterval(),this.randomValueFromInterval)}}vt=new WeakMap,Vn=new WeakMap,Hn=new WeakMap,jn=new WeakMap,Yn=new WeakMap,Zn=new WeakMap,Kn=new WeakMap,zn=new WeakMap,Ir=new WeakMap;Ei.default={initialInterval:wc,randomizationFactor:pc,multiplier:yc,maxInterval:gc,maxElapsedTime:mc,maxIterations:bc,date:Date};var Le=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},ae=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},tt,nr,Cr,Tt,Pt,Pr,en,Rr,gt,mt,ir,sr,tn,Ur,Or,or,cr,_c,Wn,Ln,ar,$t;(function(t){t.Received="received",t.Processing="processing",t.Replied="replied",t.Rejected="rejected",t.Unknown="unknown",t.Done="done"})($t||($t={}));const In=60*1e3,dl="308182301d060d2b0601040182dc7c0503010201060c2b0601040182dc7c05030201036100814c0e6ec71fab583b08bd81373c255c3c371b2e84863c98a4f1e08b74235d14fb5d9c0cd546d9685f913a0c0b2cc5341583bf4b4392e467db96d65b9bb4cb717112f8472e0d5a4d14505ffd7484b01291091c5f87b98883463f98091a0baaae",pl="aaaaa-aa",yl="ic0.app",wl=".ic0.app",gl="icp0.io",ml=".icp0.io",bl="icp-api.io",_l=".icp-api.io";class Wi extends ke{constructor(e){super(e),this.message=e}}class Rn extends ke{constructor(e){super(e),this.message=e}}function xl(){let t;if(typeof window<"u")if(window.fetch)t=window.fetch.bind(window);else throw new Wi("Fetch implementation was not available. You appear to be in a browser context, but window.fetch was not present.");else if(typeof global<"u")if(global.fetch)t=global.fetch.bind(global);else throw new Wi("Fetch implementation was not available. You appear to be in a Node.js context, but global.fetch was not available.");else typeof self<"u"&&self.fetch&&(t=self.fetch.bind(self));if(t)return t;throw new Wi("Fetch implementation was not available. Please provide fetch to the HttpAgent constructor, or ensure it is available in the window or global context.")}function El(t){let e;if(t!==void 0)!t.match(/^[a-z]+:/)&&typeof window<"u"?e=new URL(window.location.protocol+"//"+t):e=new URL(t);else{const r=["ic0.app","icp0.io","127.0.0.1","localhost"],n=[".github.dev",".gitpod.io"],i=typeof window<"u"?window.location:void 0,u=i==null?void 0:i.hostname;let f;u&&typeof u=="string"&&(n.some(o=>u.endsWith(o))?f=u:f=r.find(o=>u.endsWith(o))),i&&f?e=new URL(`${i.protocol}//${f}${i.port?":"+i.port:""}`):e=new URL("https://icp-api.io")}return e.toString()}class dr{constructor(e={}){var r,n;tt.add(this),nr.set(this,null),Cr.set(this,!1),Tt.set(this,void 0),Pt.set(this,void 0),Pr.set(this,void 0),en.set(this,void 0),Rr.set(this,0),gt.set(this,void 0),mt.set(this,void 0),ir.set(this,void 0),sr.set(this,void 0),this._isAgent=!0,this.config={},tn.set(this,0),this.log=new hl,Ur.set(this,[]),Or.set(this,[]),or.set(this,new al({expirationTime:5*60*1e3})),cr.set(this,!0),Ln.set(this,(f,o)=>{if(ae(this,cr,"f")===!1)return f;if(!o)throw new Nt("Invalid signature from replica signed query: no matching node key found.");const{status:w,signatures:g=[],requestId:S}=f,T=Lr(new TextEncoder().encode("\vic-response"));for(const x of g){const{timestamp:_,identity:y}=x,$=_e.fromUint8Array(y).toText();let q;if(w==="replied"){const{reply:R}=f;q=ti({status:w,reply:R,timestamp:BigInt(_),request_id:S})}else if(w==="rejected"){const{reject_code:R,reject_message:C,error_code:W}=f;q=ti({status:w,reject_code:R,reject_message:C,error_code:W,timestamp:BigInt(_),request_id:S})}else throw new Error(`Unknown status: ${w}`);const X=Ut(T,Lr(new Uint8Array(q))),K=o==null?void 0:o.nodeKeys.get($);if(!K)throw new Nt("Invalid signature from replica signed query: no matching node key found.");const j=hr.fromDer(K).rawKey;if(ol.verify(x.signature,new Uint8Array(X),new Uint8Array(j)))return f;throw new Nt(`Invalid signature from replica ${$} signed query.`)}return f}),this.config=e,Le(this,Pt,e.fetch||xl()||fetch.bind(global),"f"),Le(this,Pr,e.fetchOptions,"f"),Le(this,en,e.callOptions,"f"),Le(this,Cr,(r=e.shouldFetchRootKey)!==null&&r!==void 0?r:!1,"f"),e.rootKey?this.rootKey=e.rootKey:ae(this,Cr,"f")?this.rootKey=null:this.rootKey=Jn(dl);const i=El(e.host);this.host=new URL(i),e.verifyQuerySignatures!==void 0&&Le(this,cr,e.verifyQuerySignatures,"f"),Le(this,mt,(n=e.retryTimes)!==null&&n!==void 0?n:3,"f");const u=()=>new Ei({maxIterations:ae(this,mt,"f")});if(Le(this,ir,e.backoffStrategy||u,"f"),this.host.hostname.endsWith(wl)?this.host.hostname=yl:this.host.hostname.endsWith(ml)?this.host.hostname=gl:this.host.hostname.endsWith(_l)&&(this.host.hostname=bl),e.credentials){const{name:f,password:o}=e.credentials;Le(this,gt,`${f}${o?":"+o:""}`,"f")}if(Le(this,Tt,Promise.resolve(e.identity||new js),"f"),e.ingressExpiryInMinutes&&e.ingressExpiryInMinutes>5)throw new ke(`The maximum ingress expiry time is 5 minutes. Provided ingress expiry time is ${e.ingressExpiryInMinutes} minutes.`);if(e.ingressExpiryInMinutes&&e.ingressExpiryInMinutes<=0)throw new ke(`Ingress expiry time must be greater than 0. Provided ingress expiry time is ${e.ingressExpiryInMinutes} minutes.`);Le(this,sr,e.ingressExpiryInMinutes||5,"f"),this.addTransform("update",Ks(os)),e.useQueryNonces&&this.addTransform("query",Ks(os)),e.logToConsole&&this.log.subscribe(f=>{f.level==="error"?console.error(f.message):f.level==="warn"?console.warn(f.message):console.log(f.message)})}get waterMark(){return ae(this,tn,"f")}static createSync(e={}){return new this(Object.assign({},e))}static async create(e={shouldFetchRootKey:!1}){const r=dr.createSync(e),n=[r.syncTime()];return r.host.toString()!=="https://icp-api.io"&&e.shouldFetchRootKey&&n.push(r.fetchRootKey()),await Promise.all(n),r}static async from(e){var r;try{return"config"in e?await dr.create(e.config):await dr.create({fetch:e._fetch,fetchOptions:e._fetchOptions,callOptions:e._callOptions,host:e._host.toString(),identity:(r=e._identity)!==null&&r!==void 0?r:void 0})}catch{throw new ke("Failed to create agent from provided agent")}}isLocal(){const e=this.host.hostname;return e==="127.0.0.1"||e.endsWith("127.0.0.1")}addTransform(e,r,n=r.priority||0){if(e==="update"){const i=ae(this,Or,"f").findIndex(u=>(u.priority||0)<n);ae(this,Or,"f").splice(i>=0?i:ae(this,Or,"f").length,0,Object.assign(r,{priority:n}))}else if(e==="query"){const i=ae(this,Ur,"f").findIndex(u=>(u.priority||0)<n);ae(this,Ur,"f").splice(i>=0?i:ae(this,Ur,"f").length,0,Object.assign(r,{priority:n}))}}async getPrincipal(){if(!ae(this,Tt,"f"))throw new Rn("This identity has expired due this application's security policy. Please refresh your authentication.");return(await ae(this,Tt,"f")).getPrincipal()}async call(e,r,n){var i,u;await ae(this,tt,"m",ar).call(this);const f=(i=r.callSync)!==null&&i!==void 0?i:!0,o=await(n!==void 0?await n:await ae(this,Tt,"f"));if(!o)throw new Rn("This identity has expired due this application's security policy. Please refresh your authentication.");const w=_e.from(e),g=r.effectiveCanisterId?_e.from(r.effectiveCanisterId):w,S=o.getPrincipal()||_e.anonymous();let T=new Sn(ae(this,sr,"f")*In);Math.abs(ae(this,Rr,"f"))>1e3*30&&(T=new Sn(ae(this,sr,"f")*In+ae(this,Rr,"f")));const x={request_type:ss.Call,canister_id:w,method_name:r.methodName,arg:r.arg,sender:S,ingress_expiry:T};let _=await this._transform({request:{body:null,method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},ae(this,gt,"f")?{Authorization:"Basic "+btoa(ae(this,gt,"f"))}:{})},endpoint:"call",body:x}),y;r!=null&&r.nonce?y=$(r.nonce):_.body.nonce?y=$(_.body.nonce):y=void 0,x.nonce=y;function $(j){return new Uint8Array(j)}_=await o.transformRequest(_);const q=Mi(_.body),X=ae(this,ir,"f").call(this),K=Hs(x);try{const j=()=>(this.log.print(`fetching "/api/v3/canister/${g.toText()}/call" with request:`,_),ae(this,Pt,"f").call(this,""+new URL(`/api/v3/canister/${g.toText()}/call`,this.host),Object.assign(Object.assign(Object.assign({},ae(this,en,"f")),_.request),{body:q}))),D=()=>(this.log.print(`fetching "/api/v2/canister/${g.toText()}/call" with request:`,_),ae(this,Pt,"f").call(this,""+new URL(`/api/v2/canister/${g.toText()}/call`,this.host),Object.assign(Object.assign(Object.assign({},ae(this,en,"f")),_.request),{body:q}))),C=await ae(this,tt,"m",Wn).call(this,{request:f?j:D,backoff:X,tries:0}),W=await C.arrayBuffer(),te=C.status===200&&W.byteLength>0?Vt(W):null;if(te&&"certificate"in te){const re=await this.parseTimeFromResponse({certificate:te.certificate});Le(this,tn,re,"f")}return{requestId:K,response:{ok:C.ok,status:C.status,statusText:C.statusText,body:te,headers:Xr(C.headers)},requestDetails:x}}catch(j){if(j.message.includes("v3 api not supported."))return this.log.warn("v3 api not supported. Fall back to v2"),this.call(e,Object.assign(Object.assign({},r),{callSync:!1}),n);const D=`Error while making call: ${(u=j.message)!==null&&u!==void 0?u:String(j)}`,R=new Hf(D,j,ze(K),ze(_.body.sender_pubkey),ze(_.body.sender_sig),String(_.body.content.ingress_expiry._value));throw this.log.error(D,R),R}}async query(e,r,n){var i,u,f,o;await ae(this,tt,"m",ar).call(this);const w=ae(this,ir,"f").call(this),g=r.effectiveCanisterId?_e.from(r.effectiveCanisterId):_e.from(e);this.log.print(`ecid ${g.toString()}`),this.log.print(`canisterId ${e.toString()}`);let S,T;const x=await(n!==void 0?n:ae(this,Tt,"f"));if(!x)throw new Rn("This identity has expired due this application's security policy. Please refresh your authentication.");const _=_e.from(e),y=(x==null?void 0:x.getPrincipal())||_e.anonymous(),$={request_type:"query",canister_id:_,method_name:r.methodName,arg:r.arg,sender:y,ingress_expiry:new Sn(ae(this,sr,"f")*In)},q=Hs($);S=await this._transform({request:{method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},ae(this,gt,"f")?{Authorization:"Basic "+btoa(ae(this,gt,"f"))}:{})},endpoint:"read",body:$}),S=await(x==null?void 0:x.transformRequest(S));const X=Mi(S.body),K={canister:_.toText(),ecid:g,transformedRequest:S,body:X,requestId:q,backoff:w,tries:0},j=async()=>({requestDetails:$,query:await ae(this,tt,"m",_c).call(this,K)}),D=async()=>{if(!ae(this,cr,"f"))return;const R=ae(this,or,"f").get(g.toString());return R||(await this.fetchSubnetKeys(g.toString()),ae(this,or,"f").get(g.toString()))};try{const[R,C]=await Promise.all([j(),D()]);T=R;const{requestDetails:W,query:te}=T,re=Object.assign(Object.assign({},te),{requestDetails:W});if(this.log.print("Query response:",re),!ae(this,cr,"f"))return re;try{return ae(this,Ln,"f").call(this,re,C)}catch{this.log.warn("Query response verification failed. Retrying with fresh subnet keys."),ae(this,or,"f").delete(e.toString()),await this.fetchSubnetKeys(g.toString());const H=ae(this,or,"f").get(e.toString());if(!H)throw new Nt("Invalid signature from replica signed query: no matching node key found.");return ae(this,Ln,"f").call(this,re,H)}}catch(R){const C=`Error while making call: ${(i=R.message)!==null&&i!==void 0?i:String(R)}`,W=new jf(C,R,String(q),ze((u=S==null?void 0:S.body)===null||u===void 0?void 0:u.sender_pubkey),ze((f=S==null?void 0:S.body)===null||f===void 0?void 0:f.sender_sig),String((o=S==null?void 0:S.body)===null||o===void 0?void 0:o.content.ingress_expiry._value));throw this.log.error(C,W),W}}async createReadStateRequest(e,r){await ae(this,tt,"m",ar).call(this);const n=await(r!==void 0?await r:await ae(this,Tt,"f"));if(!n)throw new Rn("This identity has expired due this application's security policy. Please refresh your authentication.");const i=(n==null?void 0:n.getPrincipal())||_e.anonymous(),u=await this._transform({request:{method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},ae(this,gt,"f")?{Authorization:"Basic "+btoa(ae(this,gt,"f"))}:{})},endpoint:"read_state",body:{request_type:"read_state",paths:e.paths,sender:i,ingress_expiry:new Sn(ae(this,sr,"f")*In)}});return n==null?void 0:n.transformRequest(u)}async readState(e,r,n,i){var u,f,o,w;function g($){for(const q of $.paths){const[X,K]=q,j=Lr(new TextEncoder().encode("request_status"));if(ai(X,j))return K}}const S=g(r);await ae(this,tt,"m",ar).call(this);const T=typeof e=="string"?_e.fromText(e):e,x=i??await this.createReadStateRequest(r,n),_=Mi(x.body);this.log.print(`fetching "/api/v2/canister/${T}/read_state" with request:`,x);const y=ae(this,ir,"f").call(this);try{const $=await ae(this,tt,"m",Wn).call(this,{request:()=>ae(this,Pt,"f").call(this,""+new URL(`/api/v2/canister/${T.toString()}/read_state`,this.host),Object.assign(Object.assign(Object.assign({},ae(this,Pr,"f")),x.request),{body:_})),backoff:y,tries:0});if(!$.ok)throw new Error(`Server returned an error:
  Code: ${$.status} (${$.statusText})
  Body: ${await $.text()}
`);const q=Vt(await $.arrayBuffer());this.log.print("Read state response:",q);const X=await this.parseTimeFromResponse(q);return X>0&&(this.log.print("Read state response time:",X),Le(this,tn,X,"f")),q}catch($){const q=`Caught exception while attempting to read state: ${(u=$.message)!==null&&u!==void 0?u:String($)}`,X=new Yf(q,$,String(S),ze((f=x==null?void 0:x.body)===null||f===void 0?void 0:f.sender_pubkey),ze((o=x==null?void 0:x.body)===null||o===void 0?void 0:o.sender_sig),String((w=x==null?void 0:x.body)===null||w===void 0?void 0:w.content.ingress_expiry._value));throw this.log.error(q,X),X}}async parseTimeFromResponse(e){let r;if(e.certificate){const n=Vt(e.certificate);if(n&&"tree"in n)r=n.tree;else throw new Error("Could not decode time from response");const i=Yr(["time"],r);if(i.status!==He.Found)throw new Error("Time was not found in the response or was not in its expected format.");if(!(i.value instanceof ArrayBuffer)&&!ArrayBuffer.isView(i))throw new Error("Time was not found in the response or was not in its expected format.");const u=Ss(Lr(i.value));return this.log.print("Time from response:",u),this.log.print("Time from response in milliseconds:",Number(u)),Number(u)}else this.log.warn("No certificate found in response");return 0}async syncTime(e){await ae(this,tt,"m",ar).call(this);const r=await Dc(()=>Promise.resolve().then(()=>Y0),void 0),n=Date.now();try{e||this.log.print("Syncing time with the IC. No canisterId provided, so falling back to ryjl3-tyaaa-aaaaa-aaaba-cai");const i=dr.createSync({identity:new js,host:this.host.toString(),fetch:ae(this,Pt,"f"),retryTimes:0}),f=(await r.request({canisterId:e??_e.from("ryjl3-tyaaa-aaaaa-aaaba-cai"),agent:i,paths:["time"]})).get("time");f&&(Le(this,Rr,Number(f)-Number(n),"f"),this.log.notify({message:`Syncing time: offset of ${ae(this,Rr,"f")}`,level:"info"}))}catch(i){this.log.error("Caught exception while attempting to sync time",i)}}async status(){const e=ae(this,gt,"f")?{Authorization:"Basic "+btoa(ae(this,gt,"f"))}:{};this.log.print('fetching "/api/v2/status"');const r=ae(this,ir,"f").call(this),n=await ae(this,tt,"m",Wn).call(this,{backoff:r,request:()=>ae(this,Pt,"f").call(this,""+new URL("/api/v2/status",this.host),Object.assign({headers:e},ae(this,Pr,"f"))),tries:0});return Vt(await n.arrayBuffer())}async fetchRootKey(){let e;return ae(this,nr,"f")?e=await ae(this,nr,"f"):(Le(this,nr,new Promise((r,n)=>{this.status().then(i=>{const u=i.root_key;this.rootKey=u,r(u)}).catch(n)}),"f"),e=await ae(this,nr,"f")),Le(this,nr,null,"f"),e}invalidateIdentity(){Le(this,Tt,null,"f")}replaceIdentity(e){Le(this,Tt,Promise.resolve(e),"f")}async fetchSubnetKeys(e){await ae(this,tt,"m",ar).call(this);const r=_e.from(e),i=(await uc({canisterId:r,paths:["subnet"],agent:this})).get("subnet");if(i&&typeof i=="object"&&"nodeKeys"in i)return ae(this,or,"f").set(r.toText(),i),i}_transform(e){let r=Promise.resolve(e);if(e.endpoint==="call")for(const n of ae(this,Or,"f"))r=r.then(i=>n(i).then(u=>u||i));else for(const n of ae(this,Ur,"f"))r=r.then(i=>n(i).then(u=>u||i));return r}}nr=new WeakMap,Cr=new WeakMap,Tt=new WeakMap,Pt=new WeakMap,Pr=new WeakMap,en=new WeakMap,Rr=new WeakMap,gt=new WeakMap,mt=new WeakMap,ir=new WeakMap,sr=new WeakMap,tn=new WeakMap,Ur=new WeakMap,Or=new WeakMap,or=new WeakMap,cr=new WeakMap,Ln=new WeakMap,tt=new WeakSet,_c=async function t(e){var r,n;const{ecid:i,transformedRequest:u,body:f,requestId:o,backoff:w,tries:g}=e,S=g===0?0:w.next();if(this.log.print(`fetching "/api/v2/canister/${i.toString()}/query" with tries:`,{tries:g,backoff:w,delay:S}),S===null)throw new ke(`Timestamp failed to pass the watermark after retrying the configured ${ae(this,mt,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`);S>0&&await new Promise(y=>setTimeout(y,S));let T;try{this.log.print(`fetching "/api/v2/canister/${i.toString()}/query" with request:`,u);const y=await ae(this,Pt,"f").call(this,""+new URL(`/api/v2/canister/${i.toString()}/query`,this.host),Object.assign(Object.assign(Object.assign({},ae(this,Pr,"f")),u.request),{body:f}));if(y.status===200){const $=Vt(await y.arrayBuffer());T=Object.assign(Object.assign({},$),{httpDetails:{ok:y.ok,status:y.status,statusText:y.statusText,headers:Xr(y.headers)},requestId:o})}else throw new ki(`Gateway returned an error:
  Code: ${y.status} (${y.statusText})
  Body: ${await y.text()}
`,{ok:y.ok,status:y.status,statusText:y.statusText,headers:Xr(y.headers)})}catch(y){if(g<ae(this,mt,"f"))return this.log.warn(`Caught exception while attempting to make query:
  ${y}
  Retrying query.`),await ae(this,tt,"m",t).call(this,Object.assign(Object.assign({},e),{tries:g+1}));throw y}const x=(n=(r=T.signatures)===null||r===void 0?void 0:r[0])===null||n===void 0?void 0:n.timestamp;if(!ae(this,cr,"f"))return T;if(!x)throw new Error("Timestamp not found in query response. This suggests a malformed or malicious response.");const _=Number(BigInt(x)/BigInt(1e6));if(this.log.print("watermark and timestamp",{waterMark:this.waterMark,timestamp:_}),Number(this.waterMark)>_){const y=new ke("Timestamp is below the watermark. Retrying query.");if(this.log.error("Timestamp is below",y,{timestamp:x,waterMark:this.waterMark}),g<ae(this,mt,"f"))return await ae(this,tt,"m",t).call(this,Object.assign(Object.assign({},e),{tries:g+1}));throw new ke(`Timestamp failed to pass the watermark after retrying the configured ${ae(this,mt,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`)}return T},Wn=async function t(e){const{request:r,backoff:n,tries:i}=e,u=i===0?0:n.next();if(u===null)throw new ke(`Timestamp failed to pass the watermark after retrying the configured ${ae(this,mt,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`);u>0&&await new Promise(g=>setTimeout(g,u));let f;try{f=await r()}catch(g){if(ae(this,mt,"f")>i)return this.log.warn(`Caught exception while attempting to make request:
  ${g}
  Retrying request.`),await ae(this,tt,"m",t).call(this,{request:r,backoff:n,tries:i+1});throw g}if(f.ok)return f;const o=await f.clone().text(),w=`Server returned an error:
  Code: ${f.status} (${f.statusText})
  Body: ${o}
`;if(f.status===404&&f.url.includes("api/v3"))throw new ki("v3 api not supported. Fall back to v2",{ok:f.ok,status:f.status,statusText:f.statusText,headers:Xr(f.headers)});if(i<ae(this,mt,"f"))return await ae(this,tt,"m",t).call(this,{request:r,backoff:n,tries:i+1});throw new ki(w,{ok:f.ok,status:f.status,statusText:f.statusText,headers:Xr(f.headers)})},ar=async function(){if(!this.rootKey)if(this.rootKey===null&&ae(this,Cr,"f"))await this.fetchRootKey();else throw new ke(`Invalid root key detected. The root key for this agent is ${this.rootKey} and the shouldFetchRootKey value is set to ${ae(this,Cr,"f")}. The root key should only be unknown if you are in local development. Otherwise you should avoid fetching and use the default IC Root Key or the known root key of your environment.`)};var mo;(function(t){t.Error="err",t.GetPrincipal="gp",t.GetPrincipalResponse="gpr",t.Query="q",t.QueryResponse="qr",t.Call="c",t.CallResponse="cr",t.ReadState="rs",t.ReadStateResponse="rsr",t.Status="s",t.StatusResponse="sr"})(mo||(mo={}));function bo(){const t=typeof window>"u"?typeof global>"u"?typeof self>"u"?void 0:self.ic.agent:global.ic.agent:window.ic.agent;if(!t)throw new Error("No Agent could be found.");return t}const Bl=5*60*1e3;function xc(){return Nl(vl(Al(),1e3),Sl(1e3,1.2),Tl(Bl))}function Al(){let t=!0;return async()=>t?(t=!1,!0):!1}function vl(t,e){return async(r,n,i)=>{if(await t(r,n,i))return new Promise(u=>setTimeout(u,e))}}function Tl(t){const e=Date.now()+t;return async(r,n,i)=>{if(Date.now()>e)throw new Error(`Request timed out after ${t} msec:
  Request ID: ${ze(n)}
  Request status: ${i}
`)}}function Sl(t,e){let r=t;return()=>new Promise(n=>setTimeout(()=>{r*=e,n()},r))}function Nl(...t){return async(e,r,n)=>{for(const i of t)await i(e,r,n)}}async function Ec(t,e,r,n=xc(),i,u){var f;const o=[new TextEncoder().encode("request_status"),r],w=i??await((f=t.createReadStateRequest)===null||f===void 0?void 0:f.call(t,{paths:[o]})),g=await t.readState(e,{paths:[o]},void 0,w);if(t.rootKey==null)throw new Error("Agent root key not initialized before polling");const S=await wr.create({certificate:g.certificate,rootKey:t.rootKey,canisterId:e,blsVerify:u}),T=dt(S.lookup([...o,new TextEncoder().encode("status")]));let x;switch(typeof T>"u"?x=$t.Unknown:x=new TextDecoder().decode(T),x){case $t.Replied:return{reply:dt(S.lookup([...o,"reply"])),certificate:S};case $t.Received:case $t.Unknown:case $t.Processing:return await n(e,r,x),Ec(t,e,r,n,w,u);case $t.Rejected:{const _=new Uint8Array(dt(S.lookup([...o,"reject_code"])))[0],y=new TextDecoder().decode(dt(S.lookup([...o,"reject_message"])));throw new Error(`Call was rejected:
  Request ID: ${ze(r)}
  Reject code: ${_}
  Reject text: ${y}
`)}case $t.Done:throw new Error(`Call was marked as done but we never saw the reply:
  Request ID: ${ze(r)}
`)}throw new Error("unreachable")}const Il=({IDL:t})=>{const e=t.Variant({mainnet:t.Null,testnet:t.Null}),r=t.Text,n=t.Record({network:e,address:r,min_confirmations:t.Opt(t.Nat32)}),i=t.Nat64,u=i,f=t.Nat32,o=t.Record({start_height:f,end_height:t.Opt(f),network:e}),w=t.Vec(t.Nat8),g=t.Record({tip_height:f,block_headers:t.Vec(w)}),S=t.Record({network:e}),T=t.Nat64,x=t.Vec(T),_=t.Record({network:e,filter:t.Opt(t.Variant({page:t.Vec(t.Nat8),min_confirmations:t.Nat32})),address:r}),y=t.Vec(t.Nat8),$=t.Record({txid:t.Vec(t.Nat8),vout:t.Nat32}),q=t.Record({height:t.Nat32,value:i,outpoint:$}),X=t.Record({next_page:t.Opt(t.Vec(t.Nat8)),tip_height:f,tip_block_hash:y,utxos:t.Vec(q)}),K=t.Record({transaction:t.Vec(t.Nat8),network:e}),j=t.Principal,D=t.Record({canister_id:j,num_requested_changes:t.Opt(t.Nat64)}),R=t.Variant({from_user:t.Record({user_id:t.Principal}),from_canister:t.Record({canister_version:t.Opt(t.Nat64),canister_id:t.Principal})}),C=t.Vec(t.Nat8),W=t.Variant({creation:t.Record({controllers:t.Vec(t.Principal)}),code_deployment:t.Record({mode:t.Variant({reinstall:t.Null,upgrade:t.Null,install:t.Null}),module_hash:t.Vec(t.Nat8)}),load_snapshot:t.Record({canister_version:t.Nat64,taken_at_timestamp:t.Nat64,snapshot_id:C}),controllers_change:t.Record({controllers:t.Vec(t.Principal)}),code_uninstall:t.Null}),te=t.Record({timestamp_nanos:t.Nat64,canister_version:t.Nat64,origin:R,details:W}),re=t.Record({controllers:t.Vec(t.Principal),module_hash:t.Opt(t.Vec(t.Nat8)),recent_changes:t.Vec(te),total_num_changes:t.Nat64}),U=t.Record({canister_id:j}),H=t.Variant({controllers:t.Null,public:t.Null,allowed_viewers:t.Vec(t.Principal)}),J=t.Record({freezing_threshold:t.Nat,controllers:t.Vec(t.Principal),reserved_cycles_limit:t.Nat,log_visibility:H,wasm_memory_limit:t.Nat,memory_allocation:t.Nat,compute_allocation:t.Nat}),b=t.Record({status:t.Variant({stopped:t.Null,stopping:t.Null,running:t.Null}),memory_size:t.Nat,cycles:t.Nat,settings:J,query_stats:t.Record({response_payload_bytes_total:t.Nat,num_instructions_total:t.Nat,num_calls_total:t.Nat,request_payload_bytes_total:t.Nat}),idle_cycles_burned_per_day:t.Nat,module_hash:t.Opt(t.Vec(t.Nat8)),reserved_cycles:t.Nat}),N=t.Record({canister_id:j}),M=t.Record({freezing_threshold:t.Opt(t.Nat),controllers:t.Opt(t.Vec(t.Principal)),reserved_cycles_limit:t.Opt(t.Nat),log_visibility:t.Opt(H),wasm_memory_limit:t.Opt(t.Nat),memory_allocation:t.Opt(t.Nat),compute_allocation:t.Opt(t.Nat)}),L=t.Record({settings:t.Opt(M),sender_canister_version:t.Opt(t.Nat64)}),ee=t.Record({canister_id:j}),Q=t.Record({canister_id:j}),ne=t.Record({canister_id:j,snapshot_id:C}),he=t.Record({canister_id:j}),oe=t.Variant({secp256k1:t.Null}),ie=t.Record({key_id:t.Record({name:t.Text,curve:oe}),canister_id:t.Opt(j),derivation_path:t.Vec(t.Vec(t.Nat8))}),Se=t.Record({public_key:t.Vec(t.Nat8),chain_code:t.Vec(t.Nat8)}),B=t.Record({canister_id:j}),Fe=t.Record({idx:t.Nat64,timestamp_nanos:t.Nat64,content:t.Vec(t.Nat8)}),ve=t.Record({canister_log_records:t.Vec(Fe)}),Me=t.Record({value:t.Text,name:t.Text}),ce=t.Record({status:t.Nat,body:t.Vec(t.Nat8),headers:t.Vec(Me)}),de=t.Record({url:t.Text,method:t.Variant({get:t.Null,head:t.Null,post:t.Null}),max_response_bytes:t.Opt(t.Nat64),body:t.Opt(t.Vec(t.Nat8)),transform:t.Opt(t.Record({function:t.Func([t.Record({context:t.Vec(t.Nat8),response:ce})],[ce],["query"]),context:t.Vec(t.Nat8)})),headers:t.Vec(Me)}),E=t.Variant({reinstall:t.Null,upgrade:t.Opt(t.Record({wasm_memory_persistence:t.Opt(t.Variant({keep:t.Null,replace:t.Null})),skip_pre_upgrade:t.Opt(t.Bool)})),install:t.Null}),v=t.Record({hash:t.Vec(t.Nat8)}),O=t.Record({arg:t.Vec(t.Nat8),wasm_module_hash:t.Vec(t.Nat8),mode:E,chunk_hashes_list:t.Vec(v),target_canister:j,store_canister:t.Opt(j),sender_canister_version:t.Opt(t.Nat64)}),G=t.Vec(t.Nat8),P=t.Record({arg:t.Vec(t.Nat8),wasm_module:G,mode:E,canister_id:j,sender_canister_version:t.Opt(t.Nat64)}),V=t.Record({canister_id:j}),h=t.Record({id:C,total_size:t.Nat64,taken_at_timestamp:t.Nat64}),s=t.Vec(h),a=t.Record({canister_id:j,sender_canister_version:t.Opt(t.Nat64),snapshot_id:C}),p=t.Record({start_at_timestamp_nanos:t.Nat64,subnet_id:t.Principal}),m=t.Record({num_block_failures_total:t.Nat64,node_id:t.Principal,num_blocks_proposed_total:t.Nat64}),I=t.Vec(t.Record({timestamp_nanos:t.Nat64,node_metrics:t.Vec(m)})),Y=t.Record({settings:t.Opt(M),specified_id:t.Opt(j),amount:t.Opt(t.Nat),sender_canister_version:t.Opt(t.Nat64)}),se=t.Record({canister_id:j}),ue=t.Record({canister_id:j,amount:t.Nat}),fe=t.Vec(t.Nat8),me=t.Variant({ed25519:t.Null,bip340secp256k1:t.Null}),d=t.Record({key_id:t.Record({algorithm:me,name:t.Text}),canister_id:t.Opt(j),derivation_path:t.Vec(t.Vec(t.Nat8))}),c=t.Record({public_key:t.Vec(t.Nat8),chain_code:t.Vec(t.Nat8)}),l=t.Record({key_id:t.Record({name:t.Text,curve:oe}),derivation_path:t.Vec(t.Vec(t.Nat8)),message_hash:t.Vec(t.Nat8)}),A=t.Record({signature:t.Vec(t.Nat8)}),k=t.Variant({bip341:t.Record({merkle_root_hash:t.Vec(t.Nat8)})}),z=t.Record({aux:t.Opt(k),key_id:t.Record({algorithm:me,name:t.Text}),derivation_path:t.Vec(t.Vec(t.Nat8)),message:t.Vec(t.Nat8)}),Z=t.Record({signature:t.Vec(t.Nat8)}),we=t.Record({canister_id:j}),be=t.Record({canister_id:j}),ge=t.Record({canister_id:j}),ye=t.Vec(v),Te=t.Record({subnet_id:t.Principal}),Oe=t.Record({replica_version:t.Text}),Bi=t.Record({replace_snapshot:t.Opt(C),canister_id:j}),Ai=h,vi=t.Record({canister_id:j,sender_canister_version:t.Opt(t.Nat64)}),Ti=t.Record({canister_id:t.Principal,settings:M,sender_canister_version:t.Opt(t.Nat64)}),Si=t.Record({chunk:t.Vec(t.Nat8),canister_id:t.Principal}),Zt=v;return t.Service({bitcoin_get_balance:t.Func([n],[u],[]),bitcoin_get_block_headers:t.Func([o],[g],[]),bitcoin_get_current_fee_percentiles:t.Func([S],[x],[]),bitcoin_get_utxos:t.Func([_],[X],[]),bitcoin_send_transaction:t.Func([K],[],[]),canister_info:t.Func([D],[re],[]),canister_status:t.Func([U],[b],[]),clear_chunk_store:t.Func([N],[],[]),create_canister:t.Func([L],[ee],[]),delete_canister:t.Func([Q],[],[]),delete_canister_snapshot:t.Func([ne],[],[]),deposit_cycles:t.Func([he],[],[]),ecdsa_public_key:t.Func([ie],[Se],[]),fetch_canister_logs:t.Func([B],[ve],["query"]),http_request:t.Func([de],[ce],[]),install_chunked_code:t.Func([O],[],[]),install_code:t.Func([P],[],[]),list_canister_snapshots:t.Func([V],[s],[]),load_canister_snapshot:t.Func([a],[],[]),node_metrics_history:t.Func([p],[I],[]),provisional_create_canister_with_cycles:t.Func([Y],[se],[]),provisional_top_up_canister:t.Func([ue],[],[]),raw_rand:t.Func([],[fe],[]),schnorr_public_key:t.Func([d],[c],[]),sign_with_ecdsa:t.Func([l],[A],[]),sign_with_schnorr:t.Func([z],[Z],[]),start_canister:t.Func([we],[],[]),stop_canister:t.Func([be],[],[]),stored_chunks:t.Func([ge],[ye],[]),subnet_info:t.Func([Te],[Oe],[]),take_canister_snapshot:t.Func([Bi],[Ai],[]),uninstall_code:t.Func([vi],[],[]),update_settings:t.Func([Ti],[],[]),upload_chunk:t.Func([Si],[Zt],[])})};class Bc extends ke{constructor(e,r,n,i){super(["Call failed:",`  Canister: ${e.toText()}`,`  Method: ${r} (${n})`,...Object.getOwnPropertyNames(i).map(u=>`  "${u}": ${JSON.stringify(i[u])}`)].join(`
`)),this.canisterId=e,this.methodName=r,this.type=n,this.props=i}}class Rl extends Bc{constructor(e,r,n){var i;super(e,r,"query",{Status:n.status,Code:(i=Li[n.reject_code])!==null&&i!==void 0?i:`Unknown Code "${n.reject_code}"`,Message:n.reject_message}),this.result=n}}class _o extends Bc{constructor(e,r,n,i,u,f,o){super(e,r,"update",Object.assign({"Request ID":ze(n)},i.body?Object.assign(Object.assign({},o?{"Error code":o}:{}),{"Reject code":String(u),"Reject message":f}):{"HTTP status code":i.status.toString(),"HTTP status text":i.statusText})),this.requestId=n,this.response=i,this.reject_code=u,this.reject_message=f,this.error_code=o}}const ht=Symbol.for("ic-agent-metadata");class mn{constructor(e){this[ht]=Object.freeze(e)}static agentOf(e){return e[ht].config.agent}static interfaceOf(e){return e[ht].service}static canisterIdOf(e){return _e.from(e[ht].config.canisterId)}static async install(e,r){const n=e.mode===void 0?{install:null}:e.mode,i=e.arg?[...new Uint8Array(e.arg)]:[],u=[...new Uint8Array(e.module)],f=typeof r.canisterId=="string"?_e.fromText(r.canisterId):r.canisterId;await xo(r).install_code({mode:n,arg:i,wasm_module:u,canister_id:f,sender_canister_version:[]})}static async createCanister(e,r){function n(u){return[{controllers:u.controllers?[u.controllers]:[],compute_allocation:u.compute_allocation?[u.compute_allocation]:[],freezing_threshold:u.freezing_threshold?[u.freezing_threshold]:[],memory_allocation:u.memory_allocation?[u.memory_allocation]:[],reserved_cycles_limit:[],log_visibility:[],wasm_memory_limit:[]}]}const{canister_id:i}=await xo(e||{}).provisional_create_canister_with_cycles({amount:[],settings:n(r||{}),specified_id:[],sender_canister_version:[]});return i}static async createAndInstallCanister(e,r,n){const i=await this.createCanister(n);return await this.install(Object.assign({},r),Object.assign(Object.assign({},n),{canisterId:i})),this.createActor(e,Object.assign(Object.assign({},n),{canisterId:i}))}static createActorClass(e,r){const n=e({IDL:Gu});class i extends mn{constructor(f){if(!f.canisterId)throw new ke(`Canister ID is required, but received ${typeof f.canisterId} instead. If you are using automatically generated declarations, this may be because your application is not setting the canister ID in process.env correctly.`);const o=typeof f.canisterId=="string"?_e.fromText(f.canisterId):f.canisterId;super({config:Object.assign(Object.assign(Object.assign({},Ac),f),{canisterId:o}),service:n});for(const[w,g]of n._fields)r!=null&&r.httpDetails&&g.annotations.push(hs),r!=null&&r.certificate&&g.annotations.push(vc),this[w]=Ul(this,w,g,f.blsVerify)}}return i}static createActor(e,r){if(!r.canisterId)throw new ke(`Canister ID is required, but received ${typeof r.canisterId} instead. If you are using automatically generated declarations, this may be because your application is not setting the canister ID in process.env correctly.`);return new(this.createActorClass(e))(r)}static createActorWithHttpDetails(e,r){return new(this.createActorClass(e,{httpDetails:!0}))(r)}static createActorWithExtendedDetails(e,r,n={httpDetails:!0,certificate:!0}){return new(this.createActorClass(e,n))(r)}}function Nr(t,e){const r=jo(t,Eo.Buffer.from(e));switch(r.length){case 0:return;case 1:return r[0];default:return r}}const Ac={pollingStrategyFactory:xc},hs="http-details",vc="certificate";function Ul(t,e,r,n){let i;r.annotations.includes("query")||r.annotations.includes("composite_query")?i=async(f,...o)=>{var w,g;f=Object.assign(Object.assign({},f),(g=(w=t[ht].config).queryTransform)===null||g===void 0?void 0:g.call(w,e,o,Object.assign(Object.assign({},t[ht].config),f)));const S=f.agent||t[ht].config.agent||bo(),T=_e.from(f.canisterId||t[ht].config.canisterId),x=Ji(r.argTypes,o),_=await S.query(T,{methodName:e,arg:x,effectiveCanisterId:f.effectiveCanisterId}),y=Object.assign(Object.assign({},_.httpDetails),{requestDetails:_.requestDetails});switch(_.status){case"rejected":throw new Rl(T,e,_);case"replied":return r.annotations.includes(hs)?{httpDetails:y,result:Nr(r.retTypes,_.reply.arg)}:Nr(r.retTypes,_.reply.arg)}}:i=async(f,...o)=>{var w,g;f=Object.assign(Object.assign({},f),(g=(w=t[ht].config).callTransform)===null||g===void 0?void 0:g.call(w,e,o,Object.assign(Object.assign({},t[ht].config),f)));const S=f.agent||t[ht].config.agent||bo(),{canisterId:T,effectiveCanisterId:x,pollingStrategyFactory:_}=Object.assign(Object.assign(Object.assign({},Ac),t[ht].config),f),y=_e.from(T),$=x!==void 0?_e.from(x):y,q=Ji(r.argTypes,o),{requestId:X,response:K,requestDetails:j}=await S.call(y,{methodName:e,arg:q,effectiveCanisterId:$});let D,R;if(K.body&&K.body.certificate){if(S.rootKey==null)throw new Error("Agent is missing root key");const re=K.body.certificate;R=await wr.create({certificate:Qn(re),rootKey:S.rootKey,canisterId:_e.from(T),blsVerify:n});const U=[new TextEncoder().encode("request_status"),X];switch(new TextDecoder().decode(dt(R.lookup([...U,"status"])))){case"replied":D=dt(R.lookup([...U,"reply"]));break;case"rejected":{const J=new Uint8Array(dt(R.lookup([...U,"reject_code"])))[0],b=new TextDecoder().decode(dt(R.lookup([...U,"reject_message"]))),N=dt(R.lookup([...U,"error_code"])),M=N?new TextDecoder().decode(N):void 0;throw new _o(y,e,X,K,J,b,M)}}}else if(K.body&&"reject_message"in K.body){const{reject_code:re,reject_message:U,error_code:H}=K.body;throw new _o(y,e,X,K,re,U,H)}if(K.status===202){const re=_(),U=await Ec(S,$,X,re,n);R=U.certificate,D=U.reply}const C=r.annotations.includes(hs),W=r.annotations.includes(vc),te=Object.assign(Object.assign({},K),{requestDetails:j});if(D!==void 0)return C&&W?{httpDetails:te,certificate:R,result:Nr(r.retTypes,D)}:W?{certificate:R,result:Nr(r.retTypes,D)}:C?{httpDetails:te,result:Nr(r.retTypes,D)}:Nr(r.retTypes,D);if(r.retTypes.length===0)return C?{httpDetails:K,result:void 0}:void 0;throw new Error(`Call was returned undefined, but type [${r.retTypes.join(",")}].`)};const u=(...f)=>i({},...f);return u.withOptions=f=>(...o)=>i(f,...o),u}function xo(t){function e(r,n){if(t.effectiveCanisterId)return{effectiveCanisterId:_e.from(t.effectiveCanisterId)};const i=n[0];let u=_e.fromHex("");return i&&typeof i=="object"&&i.target_canister&&r==="install_chunked_code"&&(u=_e.from(i.target_canister)),i&&typeof i=="object"&&i.canister_id&&(u=_e.from(i.canister_id)),{effectiveCanisterId:u}}return mn.createActor(Il,Object.assign(Object.assign(Object.assign({},t),{canisterId:_e.fromHex("")}),{callTransform:e,queryTransform:e}))}const Tc=({IDL:t})=>t.Service({greet:t.Func([t.Text],[t.Text],["query"])}),Sc="uzt4z-lp777-77774-qaabq-cai",Ol=(t,e={})=>{const r=e.agent||new dr({...e.agentOptions});return e.agent&&e.agentOptions&&console.warn("Detected both agent and agentOptions passed to createActor. Ignoring agentOptions and proceeding with the provided agent."),r.fetchRootKey().catch(n=>{console.warn("Unable to fetch root key. Check to ensure that your local replica is running"),console.error(n)}),mn.createActor(Tc,{agent:r,canisterId:t,...e.actorOptions})};Ol(Sc);const Fl=new dr,Ml=mn.createActor(Tc,{agent:Fl,canisterId:Sc});document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector("form");t.addEventListener("submit",async e=>{e.preventDefault();const r=document.querySelector("#letter").value.trim(),i=document.querySelector("#lockTime").value==="1year"?31536e3:2592e3;if(r.length<10){document.querySelector(".error-message").style.display="block";return}try{await Ml.submit_letter(r,i),alert("Letter submitted successfully!"),t.reset()}catch(u){console.error("Submission error:",u),alert("There was an error submitting your letter.")}})});
